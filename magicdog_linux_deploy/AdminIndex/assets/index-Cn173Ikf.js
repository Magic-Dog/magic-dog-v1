import{_ as Le,b as $e,a as je}from"./table-header-operation.vue_vue_type_script_setup_true_lang-e-OyP4HL.js";import{d as J,a2 as y,bB as Ke,L as Fe,bC as ze,bD as qe,bE as We,aS as Ge,aT as ye,N as ne,Q as W,V as Te,R as He,S as Ye,W as Qe,bF as Xe,r as G,aQ as te,bb as Je,X as Ce,a as j,bf as Ze,Y as ea,a1 as aa,ba as ta,B as K,a5 as ke,bG as Ne,bH as ie,bI as me,bJ as la,a8 as Z,bK as Re,bL as na,bo as pe,bM as oa,ad as ua,o as R,b as ee,e as Ae,bN as I,ai as Oe,aj as ra,$ as l,f as a,_ as ge,ak as we,c as M,w as i,g as Ve,t as De,h as o,I as ce,J as de,ae as Q,bO as sa,bP as ia,bQ as ma,al as pa,bR as ca,bS as da,bT as va,x as fa,ag as ga,ap as ve,bU as ya,K as fe,H as ha,aq as ba,bV as _a}from"./index-ClXfI4FU.js";import{u as Pa,a as Ia}from"./table-Dvx1bO8G.js";import{m as Ta,h as ka,s as Na,i as Ra,b as Oa}from"./business-B_Lx5lMj.js";import{u as wa,a as Va}from"./form-DySsNS_1.js";import{_ as Da}from"./ButtonGroup-_qnTEK8D.js";import{A as Ca,a as Aa,_ as Ea,N as Ua}from"./DataTable-BPNYEKTe.js";import{N as Sa}from"./Space-CXAaFBqz.js";import{_ as xa}from"./Grid-CH66uKej.js";import{a as Ma}from"./FormItem-0Apn8Goa.js";import{N as Ba}from"./Popconfirm-CSNmD-NH.js";import"./get-slot-Bk_rJcZu.js";import"./Pagination-BdniygT7.js";const La=J({name:"ArrowUp",render(){return y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},y("g",{fill:"none"},y("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}});function $a(){return We}const ja=Ke({name:"DynamicInput",common:Fe,peers:{Input:ze,Button:qe},self:$a}),he=Ge("n-dynamic-input"),Ka=J({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:s,placeholderRef:f}=ye(he);return{mergedTheme:s,placeholder:f}},render(){const{mergedTheme:s,placeholder:f,value:c,clsPrefix:d,onUpdateValue:g,disabled:w}=this;return y("div",{class:`${d}-dynamic-input-preset-input`},y(ne,{theme:s.peers.Input,"theme-overrides":s.peerOverrides.Input,value:c,placeholder:f,onUpdateValue:g,disabled:w}))}}),Fa=J({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},disabled:Boolean,parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(s){const{mergedThemeRef:f,keyPlaceholderRef:c,valuePlaceholderRef:d}=ye(he);return{mergedTheme:f,keyPlaceholder:c,valuePlaceholder:d,handleKeyInput(g){s.onUpdateValue({key:g,value:s.value.value})},handleValueInput(g){s.onUpdateValue({key:s.value.key,value:g})}}},render(){const{mergedTheme:s,keyPlaceholder:f,valuePlaceholder:c,value:d,clsPrefix:g,disabled:w}=this;return y("div",{class:`${g}-dynamic-input-preset-pair`},y(ne,{theme:s.peers.Input,"theme-overrides":s.peerOverrides.Input,value:d.key,class:`${g}-dynamic-input-pair-input`,placeholder:f,onUpdateValue:this.handleKeyInput,disabled:w}),y(ne,{theme:s.peers.Input,"theme-overrides":s.peerOverrides.Input,value:d.value,class:`${g}-dynamic-input-pair-input`,placeholder:c,onUpdateValue:this.handleValueInput,disabled:w}))}}),za=W("dynamic-input",{width:"100%"},[W("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[W("dynamic-input-preset-input",{flex:1,alignItems:"center"}),W("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[W("dynamic-input-pair-input",[Te("&:first-child",{"margin-right":"12px"})])]),He("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[Ye("icon",{cursor:"pointer"})]),Te("&:last-child",{marginBottom:0})]),W("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[W("form-item-blank",{paddingTop:"0 !important"})])]),le=new WeakMap,qa=Object.assign(Object.assign({},Ce.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemClass:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},disabled:Boolean,showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]}),Wa=J({name:"DynamicInput",props:qa,setup(s,{slots:f}){const{mergedComponentPropsRef:c,mergedClsPrefixRef:d,mergedRtlRef:g,inlineThemeDisabled:w}=Qe(),k=ye(Xe,null),V=G(s.defaultValue),U=te(s,"value"),O=Je(U,V),e=Ce("DynamicInput","-dynamic-input",za,ja,s,d),T=j(()=>{const{value:t}=O;if(Array.isArray(t)){const{max:u}=s;return u!==void 0&&t.length>=u}return!1}),A=j(()=>{const{value:t}=O;return Array.isArray(t)?t.length<=s.min:!0}),F=j(()=>{var t,u;return(u=(t=c==null?void 0:c.value)===null||t===void 0?void 0:t.DynamicInput)===null||u===void 0?void 0:u.buttonSize});function D(t){const{onInput:u,"onUpdate:value":m,onUpdateValue:p}=s;u&&pe(u,t),m&&pe(m,t),p&&pe(p,t),V.value=t}function S(t,u){if(t==null||typeof t!="object")return u;const m=ie(t)?me(t):t;let p=le.get(m);return p===void 0&&le.set(m,p=la()),p}function B(t,u){const{value:m}=O,p=Array.from(m??[]),v=p[t];if(p[t]=u,v&&u&&typeof v=="object"&&typeof u=="object"){const r=ie(v)?me(v):v,b=ie(u)?me(u):u,P=le.get(r);P!==void 0&&le.set(b,P)}D(p)}function L(){N(-1)}function N(t){const{value:u}=O,{onCreate:m}=s,p=Array.from(u??[]);if(m)p.splice(t+1,0,m(t+1)),D(p);else if(f.default)p.splice(t+1,0,null),D(p);else switch(s.preset){case"input":p.splice(t+1,0,""),D(p);break;case"pair":p.splice(t+1,0,{key:"",value:""}),D(p);break}}function E(t){const{value:u}=O;if(!Array.isArray(u))return;const{min:m}=s;if(u.length<=m)return;const{onRemove:p}=s;p&&p(t);const v=Array.from(u);v.splice(t,1),D(v)}function h(t,u,m){if(u<0||m<0||u>=t.length||m>=t.length||u===m)return;const p=t[u];t[u]=t[m],t[m]=p}function $(t,u){const{value:m}=O;if(!Array.isArray(m))return;const p=Array.from(m);t==="up"&&h(p,u,u-1),t==="down"&&h(p,u,u+1),D(p)}Ze(he,{mergedThemeRef:e,keyPlaceholderRef:te(s,"keyPlaceholder"),valuePlaceholderRef:te(s,"valuePlaceholder"),placeholderRef:te(s,"placeholder")});const H=ea("DynamicInput",g,d),z=j(()=>{const{self:{actionMargin:t,actionMarginRtl:u}}=e.value;return{"--action-margin":t,"--action-margin-rtl":u}}),x=w?aa("dynamic-input",void 0,z,s):void 0;return{locale:ta("DynamicInput").localeRef,rtlEnabled:H,buttonSize:F,mergedClsPrefix:d,NFormItem:k,uncontrolledValue:V,mergedValue:O,insertionDisabled:T,removeDisabled:A,handleCreateClick:L,ensureKey:S,handleValueChange:B,remove:E,move:$,createItem:N,mergedTheme:e,cssVars:w?void 0:z,themeClass:x==null?void 0:x.themeClass,onRender:x==null?void 0:x.onRender}},render(){const{$slots:s,itemClass:f,buttonSize:c,mergedClsPrefix:d,mergedValue:g,locale:w,mergedTheme:k,keyField:V,itemStyle:U,preset:O,showSortButton:e,NFormItem:T,ensureKey:A,handleValueChange:F,remove:D,createItem:S,move:B,onRender:L,disabled:N}=this;return L==null||L(),y("div",{class:[`${d}-dynamic-input`,this.rtlEnabled&&`${d}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(g)||g.length===0?y(K,Object.assign({block:!0,ghost:!0,dashed:!0,size:c},this.createButtonProps,{disabled:this.insertionDisabled||N,theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>ke(s["create-button-default"],()=>[w.create]),icon:()=>ke(s["create-button-icon"],()=>[y(Z,{clsPrefix:d},{default:()=>y(Re,null)})])}):g.map((E,h)=>y("div",{key:V?E[V]:A(E,h),"data-key":V?E[V]:A(E,h),class:[`${d}-dynamic-input-item`,f],style:U},Ne(s.default,{value:g[h],index:h},()=>[O==="input"?y(Ka,{disabled:N,clsPrefix:d,value:g[h],parentPath:T?T.path.value:void 0,path:T!=null&&T.path.value?`${T.path.value}[${h}]`:void 0,onUpdateValue:$=>{F(h,$)}}):O==="pair"?y(Fa,{disabled:N,clsPrefix:d,value:g[h],parentPath:T?T.path.value:void 0,path:T!=null&&T.path.value?`${T.path.value}[${h}]`:void 0,onUpdateValue:$=>{F(h,$)}}):null]),Ne(s.action,{value:g[h],index:h,create:S,remove:D,move:B},()=>[y("div",{class:`${d}-dynamic-input-item__action`},y(Da,{size:c},{default:()=>[y(K,{disabled:this.removeDisabled||N,theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,circle:!0,onClick:()=>{D(h)}},{icon:()=>y(Z,{clsPrefix:d},{default:()=>y(na,null)})}),y(K,{disabled:this.insertionDisabled||N,circle:!0,theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,onClick:()=>{S(h)}},{icon:()=>y(Z,{clsPrefix:d},{default:()=>y(Re,null)})}),e?y(K,{disabled:h===0||N,circle:!0,theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,onClick:()=>{B("up",h)}},{icon:()=>y(Z,{clsPrefix:d},{default:()=>y(La,null)})}):null,e?y(K,{disabled:h===g.length-1||N,circle:!0,theme:k.peers.Button,themeOverrides:k.peerOverrides.Button,onClick:()=>{B("down",h)}},{icon:()=>y(Z,{clsPrefix:d},{default:()=>y(Ca,null)})}):null]}))]))))}}),Ee={Y:"common.yesOrNo.yes",N:"common.yesOrNo.no"};oa(Ee);const Ga={class:"inline-block",viewBox:"0 0 24 24",width:"1em",height:"1em"};function Ha(s,f){return R(),ee("svg",Ga,f[0]||(f[0]=[Ae("path",{fill:"currentColor",d:"M18 13H6c-.55 0-1-.45-1-1s.45-1 1-1h12c.55 0 1 .45 1 1s-.45 1-1 1"},null,-1)]))}const Ya=ua({name:"ic-round-remove",render:Ha});function Qa(){return Object.keys(Object.assign({"/src/assets/svg-icon/activity.svg":()=>I(()=>import("./activity-B4XY664I.js"),[],import.meta.url),"/src/assets/svg-icon/alova.svg":()=>I(()=>import("./alova-eaFl3sWq.js"),[],import.meta.url),"/src/assets/svg-icon/at-sign.svg":()=>I(()=>import("./at-sign-DvqQw7Qx.js"),[],import.meta.url),"/src/assets/svg-icon/avatar.svg":()=>I(()=>import("./avatar-J8WTe7Vl.js"),[],import.meta.url),"/src/assets/svg-icon/banner.svg":()=>I(()=>import("./banner-DbbqyEja.js"),[],import.meta.url),"/src/assets/svg-icon/cast.svg":()=>I(()=>import("./cast-n3EmpXB4.js"),[],import.meta.url),"/src/assets/svg-icon/chrome.svg":()=>I(()=>import("./chrome-BM_Le6p_.js"),[],import.meta.url),"/src/assets/svg-icon/copy.svg":()=>I(()=>import("./copy-BsYpLlfM.js"),[],import.meta.url),"/src/assets/svg-icon/custom-icon.svg":()=>I(()=>import("./custom-icon-857Ak5pp.js"),[],import.meta.url),"/src/assets/svg-icon/empty-data.svg":()=>I(()=>import("./empty-data-d7zBxAXC.js"),[],import.meta.url),"/src/assets/svg-icon/expectation.svg":()=>I(()=>import("./expectation-BpMRrUTU.js"),[],import.meta.url),"/src/assets/svg-icon/heart.svg":()=>I(()=>import("./heart-DOH2U7VV.js"),[],import.meta.url),"/src/assets/svg-icon/logo.svg":()=>I(()=>import("./logo-BeLY4cv9.js"),[],import.meta.url),"/src/assets/svg-icon/network-error.svg":()=>I(()=>import("./network-error-DvJjy6k-.js"),[],import.meta.url),"/src/assets/svg-icon/no-icon.svg":()=>I(()=>import("./no-icon-DvM5OApu.js"),[],import.meta.url),"/src/assets/svg-icon/no-permission.svg":()=>I(()=>import("./no-permission-2sXrCwb0.js"),[],import.meta.url),"/src/assets/svg-icon/not-found.svg":()=>I(()=>import("./not-found-B7LenTnI.js"),[],import.meta.url),"/src/assets/svg-icon/service-error.svg":()=>I(()=>import("./service-error-BwOwwfMv.js"),[],import.meta.url),"/src/assets/svg-icon/visactor.svg":()=>I(()=>import("./visactor-DWgZNho9.js"),[],import.meta.url),"/src/assets/svg-icon/wind.svg":()=>I(()=>import("./wind-Dy5zdHKW.js"),[],import.meta.url)})).map(c=>{var d;return((d=c.split("/").at(-1))==null?void 0:d.replace(".svg",""))||""}).filter(Boolean)}const oe="layout.",ue="view.",Ue="$";function Xa(s){let f="",c="";const[d="",g=""]=(s==null?void 0:s.split(Ue))||[];return f=Ja(d),c=Za(g||d),{layout:f,page:c}}function Ja(s){return s.startsWith(oe)?s.replace(oe,""):""}function Za(s){return s.startsWith(ue)?s.replace(ue,""):""}function et(s,f){const c=!!s,d=!!f;return c&&d?`${oe}${s}${Ue}${ue}${f}`:c?`${oe}${s}`:d?`${ue}${f}`:""}function at(s){return`/${s.replace(/_/g,"/")}`}function tt(s){const[f,c=""]=s.split("/:");return{path:f,param:c}}function lt(s,f){return f.trim()?`${s}/:${f}`:s}const nt={class:"ml-8px flex-y-center flex-1 gap-12px"},ot=J({name:"MenuOperateModal",__name:"menu-operate-modal",props:Oe({operateType:{},rowData:{},allPages:{}},{visible:{type:Boolean,default:!1},visibleModifiers:{}}),emits:Oe(["submitted"],["update:visible"]),setup(s,{emit:f}){const c=s,d=f,g=ra(s,"visible"),{formRef:w,validate:k,restoreValidation:V}=wa(),{defaultRequiredRule:U}=Va(),O=j(()=>({add:l("page.manage.menu.addMenu"),addChild:l("page.manage.menu.addChildMenu"),edit:l("page.manage.menu.editMenu")})[c.operateType]),e=G(T());function T(){return{menuType:"1",menuName:"",routeName:"",routePath:"",pathParam:"",component:"",layout:"",page:"",i18nKey:null,icon:"",iconType:"1",parentId:0,statusType:"1",keepAlive:!1,constant:!1,order:0,href:null,hideInMenu:!1,activeMenu:null,multiTab:!1,fixedIndexInTab:null,query:[],buttons:[]}}const A={menuName:U,statusType:U,routeName:U,routePath:U},F=j(()=>c.operateType==="edit"),S=Qa().map(v=>({label:()=>a("div",{class:"flex-y-center gap-16px"},[a(ge,{localIcon:v,class:"text-icon"},null),a("span",null,[v])]),value:v})),B=j(()=>e.value.parentId===0),L=j(()=>e.value.menuType==="2"),N=j(()=>{const v=[...c.allPages];return e.value.routeName&&!v.includes(e.value.routeName)&&v.unshift(e.value.routeName),v.map(b=>({label:b,value:b}))}),E=[{label:"base",value:"base"},{label:"blank",value:"blank"}],h=G([]);async function $(){const{error:v,data:r}=await sa({statusType:"1"});if(!v){const b=r.records.map(P=>({label:P.roleName,value:P.roleCode}));h.value=[...b]}}function H(){if(e.value=T(),!!c.rowData){if(c.operateType==="addChild"){const{id:v}=c.rowData;Object.assign(e.value,{parentId:v})}if(c.operateType==="edit"){const{component:v,...r}=c.rowData,{layout:b,page:P}=Xa(v),{path:_,param:C}=tt(r.routePath);Object.assign(e.value,r,{layout:b,page:P,routePath:_,pathParam:C})}e.value.query||(e.value.query=[]),e.value.buttons||(e.value.buttons=[])}}function z(){g.value=!1}function x(){e.value.routeName?e.value.routePath=at(e.value.routeName):e.value.routePath=""}function t(){e.value.routeName?e.value.i18nKey=`route.${e.value.routeName}`:e.value.i18nKey=null}function u(){return{buttonCode:"",buttonDesc:""}}function m(){const{layout:v,page:r,pathParam:b,...P}=e.value,_=et(v,r),C=lt(e.value.routePath,b);return P.component=_,P.routePath=C,P}async function p(){var r,b;await k();const v=m();if(console.log("params: ",v),e.value.component=v.component,e.value.routePath=v.routePath,c.operateType==="add"||c.operateType==="addChild"){const{error:P}=await ia(e.value);P||(r=window.$message)==null||r.success(l("common.addSuccess"))}else if(c.operateType==="edit"){const{error:P}=await ma(e.value);P||(b=window.$message)==null||b.success(l("common.updateSuccess"))}z(),d("submitted")}return we(g,()=>{g.value&&(H(),V(),$())}),we(()=>e.value.routeName,()=>{x(),t()}),(v,r)=>{const b=Aa,P=Ea,_=Le,C=ne,ae=pa,be=ca,_e=$e,Y=K,Pe=Ya,re=Sa,Ie=Wa,Se=xa,xe=Ma,Me=da,Be=va;return R(),M(Be,{show:g.value,"onUpdate:show":r[22]||(r[22]=n=>g.value=n),title:O.value,preset:"card",class:"w-800px"},{footer:i(()=>[a(re,{justify:"end",size:16},{default:i(()=>[a(Y,{onClick:z},{default:i(()=>[Ve(De(o(l)("common.cancel")),1)]),_:1}),a(Y,{type:"primary",onClick:p},{default:i(()=>[Ve(De(o(l)("common.confirm")),1)]),_:1})]),_:1})]),default:i(()=>[a(Me,{class:"h-480px pr-20px"},{default:i(()=>[a(xe,{ref_key:"formRef",ref:w,model:e.value,rules:A,"label-placement":"left","label-width":100},{default:i(()=>[a(Se,{responsive:"screen","item-responsive":""},{default:i(()=>[a(_,{span:"24 m:12",label:o(l)("page.manage.menu.menuType"),path:"menuType"},{default:i(()=>[a(P,{value:e.value.menuType,"onUpdate:value":r[0]||(r[0]=n=>e.value.menuType=n),disabled:F.value},{default:i(()=>[(R(!0),ee(de,null,ce(o(Ta),n=>(R(),M(b,{key:n.value,value:n.value,label:o(l)(n.label)},null,8,["value","label"]))),128))]),_:1},8,["value","disabled"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.menuName"),path:"menuName"},{default:i(()=>[a(C,{value:e.value.menuName,"onUpdate:value":r[1]||(r[1]=n=>e.value.menuName=n),placeholder:o(l)("page.manage.menu.form.menuName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.routeName"),path:"routeName"},{default:i(()=>[a(C,{value:e.value.routeName,"onUpdate:value":r[2]||(r[2]=n=>e.value.routeName=n),placeholder:o(l)("page.manage.menu.form.routeName")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.routePath"),path:"routePath"},{default:i(()=>[a(C,{value:e.value.routePath,"onUpdate:value":r[3]||(r[3]=n=>e.value.routePath=n),disabled:"",placeholder:o(l)("page.manage.menu.form.routePath")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.pathParam"),path:"pathParam"},{default:i(()=>[a(C,{value:e.value.pathParam,"onUpdate:value":r[4]||(r[4]=n=>e.value.pathParam=n),placeholder:o(l)("page.manage.menu.form.pathParam")},null,8,["value","placeholder"])]),_:1},8,["label"]),B.value?(R(),M(_,{key:0,span:"24 m:12",label:o(l)("page.manage.menu.layout"),path:"layout"},{default:i(()=>[a(ae,{value:e.value.layout,"onUpdate:value":r[5]||(r[5]=n=>e.value.layout=n),options:E,placeholder:o(l)("page.manage.menu.form.layout"),filterable:"",clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"])):Q("",!0),L.value?(R(),M(_,{key:1,span:"24 m:12",label:o(l)("page.manage.menu.page"),path:"page"},{default:i(()=>[a(ae,{value:e.value.page,"onUpdate:value":r[6]||(r[6]=n=>e.value.page=n),options:N.value,placeholder:o(l)("page.manage.menu.form.page"),filterable:"",clearable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Q("",!0),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.i18nKey"),path:"i18nKey"},{default:i(()=>[a(C,{value:e.value.i18nKey,"onUpdate:value":r[7]||(r[7]=n=>e.value.i18nKey=n),placeholder:o(l)("page.manage.menu.form.i18nKey")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.order"),path:"order"},{default:i(()=>[a(be,{value:e.value.order,"onUpdate:value":r[8]||(r[8]=n=>e.value.order=n),class:"w-full",placeholder:o(l)("page.manage.menu.form.order")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.iconTypeTitle"),path:"iconType"},{default:i(()=>[a(P,{value:e.value.iconType,"onUpdate:value":r[9]||(r[9]=n=>e.value.iconType=n)},{default:i(()=>[(R(!0),ee(de,null,ce(o(ka),n=>(R(),M(b,{key:n.value,value:n.value,label:o(l)(n.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.icon"),path:"icon"},{default:i(()=>[e.value.iconType==="1"?(R(),M(C,{key:0,value:e.value.icon,"onUpdate:value":r[10]||(r[10]=n=>e.value.icon=n),placeholder:o(l)("page.manage.menu.form.icon"),class:"flex-1"},{suffix:i(()=>[e.value.icon?(R(),M(ge,{key:0,icon:e.value.icon,class:"text-icon"},null,8,["icon"])):Q("",!0)]),_:1},8,["value","placeholder"])):Q("",!0),e.value.iconType==="2"?(R(),M(ae,{key:1,value:e.value.icon,"onUpdate:value":r[11]||(r[11]=n=>e.value.icon=n),placeholder:o(l)("page.manage.menu.form.localIcon"),options:o(S),filterable:"",clearable:""},null,8,["value","placeholder","options"])):Q("",!0)]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.menuStatusType"),path:"status"},{default:i(()=>[a(P,{value:e.value.statusType,"onUpdate:value":r[12]||(r[12]=n=>e.value.statusType=n)},{default:i(()=>[(R(!0),ee(de,null,ce(o(Na),n=>(R(),M(b,{key:n.value,value:n.value,label:o(l)(n.label)},null,8,["value","label"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.keepAlive"),path:"keepAlive"},{default:i(()=>[a(P,{value:e.value.keepAlive,"onUpdate:value":r[13]||(r[13]=n=>e.value.keepAlive=n)},{default:i(()=>[a(b,{value:!0,label:o(l)("common.yesOrNo.yes")},null,8,["label"]),a(b,{value:!1,label:o(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.constant"),path:"constant"},{default:i(()=>[a(P,{value:e.value.constant,"onUpdate:value":r[14]||(r[14]=n=>e.value.constant=n)},{default:i(()=>[a(b,{value:!0,label:o(l)("common.yesOrNo.yes")},null,8,["label"]),a(b,{value:!1,label:o(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.href"),path:"href"},{default:i(()=>[a(C,{value:e.value.href,"onUpdate:value":r[15]||(r[15]=n=>e.value.href=n),placeholder:o(l)("page.manage.menu.form.href")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.hideInMenu"),path:"hideInMenu"},{default:i(()=>[a(P,{value:e.value.hideInMenu,"onUpdate:value":r[16]||(r[16]=n=>e.value.hideInMenu=n)},{default:i(()=>[a(b,{value:!0,label:o(l)("common.yesOrNo.yes")},null,8,["label"]),a(b,{value:!1,label:o(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),e.value.hideInMenu?(R(),M(_,{key:2,span:"24 m:12",label:o(l)("page.manage.menu.activeMenu"),path:"activeMenu"},{default:i(()=>[a(ae,{value:e.value.activeMenu,"onUpdate:value":r[17]||(r[17]=n=>e.value.activeMenu=n),options:N.value,placeholder:o(l)("page.manage.menu.form.activeMenu"),filterable:"",clearable:""},null,8,["value","options","placeholder"])]),_:1},8,["label"])):Q("",!0),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.multiTab"),path:"multiTab"},{default:i(()=>[a(P,{value:e.value.multiTab,"onUpdate:value":r[18]||(r[18]=n=>e.value.multiTab=n)},{default:i(()=>[a(b,{value:!0,label:o(l)("common.yesOrNo.yes")},null,8,["label"]),a(b,{value:!1,label:o(l)("common.yesOrNo.no")},null,8,["label"])]),_:1},8,["value"])]),_:1},8,["label"]),a(_,{span:"24 m:12",label:o(l)("page.manage.menu.fixedIndexInTab"),path:"fixedIndexInTab"},{default:i(()=>[a(be,{value:e.value.fixedIndexInTab,"onUpdate:value":r[19]||(r[19]=n=>e.value.fixedIndexInTab=n),class:"w-full",clearable:"",placeholder:o(l)("page.manage.menu.form.fixedIndexInTab")},null,8,["value","placeholder"])]),_:1},8,["label"]),a(_,{span:"24",label:o(l)("page.manage.menu.query")},{default:i(()=>[a(Ie,{value:e.value.query,"onUpdate:value":r[20]||(r[20]=n=>e.value.query=n),preset:"pair","key-placeholder":o(l)("page.manage.menu.form.queryKey"),"value-placeholder":o(l)("page.manage.menu.form.queryValue")},{action:i(({index:n,create:q,remove:se})=>[a(re,{class:"ml-12px"},{default:i(()=>[a(Y,{size:"medium",onClick:()=>q(n)},{default:i(()=>[a(_e,{class:"text-icon"})]),_:2},1032,["onClick"]),a(Y,{size:"medium",onClick:()=>se(n)},{default:i(()=>[a(Pe,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value","key-placeholder","value-placeholder"])]),_:1},8,["label"]),a(_,{span:"24",label:o(l)("page.manage.menu.button")},{default:i(()=>[a(Ie,{value:e.value.buttons,"onUpdate:value":r[21]||(r[21]=n=>e.value.buttons=n),"on-create":u},{default:i(({value:n})=>[Ae("div",nt,[a(C,{value:n.buttonCode,"onUpdate:value":q=>n.buttonCode=q,placeholder:o(l)("page.manage.menu.form.buttonCode"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"]),a(C,{value:n.buttonDesc,"onUpdate:value":q=>n.buttonDesc=q,placeholder:o(l)("page.manage.menu.form.buttonDesc"),class:"flex-1"},null,8,["value","onUpdate:value","placeholder"])])]),action:i(({index:n,create:q,remove:se})=>[a(re,{class:"ml-12px"},{default:i(()=>[a(Y,{size:"medium",onClick:()=>q(n)},{default:i(()=>[a(_e,{class:"text-icon"})]),_:2},1032,["onClick"]),a(Y,{size:"medium",onClick:()=>se(n)},{default:i(()=>[a(Pe,{class:"text-icon"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title"])}}});function X(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!ba(s)}const bt=J({name:"manage_menu",__name:"index",setup(s){const f=fa(),{bool:c,setTrue:d}=ga(),g=G(null),{columns:w,columnChecks:k,data:V,loading:U,pagination:O,getData:e,getDataByPage:T}=Pa({apiFn:ya,columns:()=>[{type:"selection",align:"center",width:48},{key:"id",title:l("page.manage.menu.id"),align:"center"},{key:"menuType",title:l("page.manage.menu.menuType"),align:"center",width:80,render:t=>{const u={1:"default",2:"primary"},m=l(Ra[t.menuType]);return a(fe,{type:u[t.menuType]},X(m)?m:{default:()=>[m]})}},{key:"menuName",title:l("page.manage.menu.menuName"),align:"center",minWidth:120,render:t=>{const{i18nKey:u,menuName:m}=t,p=u?l(u):m;return a("span",null,[p])}},{key:"icon",title:l("page.manage.menu.icon"),align:"center",width:60,render:t=>{const u=t.iconType==="1"?t.icon:void 0,m=t.iconType==="2"?t.icon:void 0;return a("div",{class:"flex-center"},[a(ge,{icon:u,localIcon:m,class:"text-icon"},null)])}},{key:"routeName",title:l("page.manage.menu.routeName"),align:"center",minWidth:120},{key:"routePath",title:l("page.manage.menu.routePath"),align:"center",minWidth:120},{key:"statusType",title:l("page.manage.menu.menuStatusType"),align:"center",width:80,render:t=>{if(t.statusType===null)return null;const u={1:"success",2:"warning"},m=l(Oa[t.statusType]);return a(fe,{type:u[t.statusType]},X(m)?m:{default:()=>[m]})}},{key:"hideInMenu",title:l("page.manage.menu.hideInMenu"),align:"center",width:80,render:t=>{const u=t.hideInMenu?"Y":"N",m={Y:"error",N:"default"},p=l(Ee[u]);return a(fe,{type:m[u]},X(p)?p:{default:()=>[p]})}},{key:"parentId",title:l("page.manage.menu.parentId"),width:90,align:"center"},{key:"order",title:l("page.manage.menu.order"),align:"center",width:60},{key:"operate",title:l("common.operate"),align:"center",width:230,render:t=>{let u,m;return a("div",{class:"flex-center justify-end gap-8px"},[t.menuType==="1"&&a(K,{type:"primary",ghost:!0,size:"small",onClick:()=>$(t)},X(u=l("page.manage.menu.addChildMenu"))?u:{default:()=>[u]}),a(K,{type:"primary",ghost:!0,size:"small",onClick:()=>h(t)},X(m=l("common.edit"))?m:{default:()=>[m]}),a(Ba,{onPositiveClick:()=>N(t.id)},{default:()=>l("common.confirmDelete"),trigger:()=>{let p;return a(K,{type:"error",ghost:!0,size:"small"},X(p=l("common.delete"))?p:{default:()=>[p]})}})])}}]}),{checkedRowKeys:A,onBatchDeleted:F,onDeleted:D}=Ia(V,e),S=G("add");function B(){S.value="add",d()}async function L(){console.log(A.value),F()}function N(t){console.log(t),D()}const E=G(null);function h(t){S.value="edit",E.value={...t},d()}function $(t){S.value="addChild",E.value={...t},d()}const H=G([]);async function z(){const{data:t}=await _a();H.value=(t==null?void 0:t.map(u=>u.value))||[]}function x(){z()}return x(),(t,u)=>{const m=je,p=Ua,v=ha;return R(),ee("div",{ref_key:"wrapperRef",ref:g,class:"flex-col-stretch gap-16px overflow-hidden lt-sm:overflow-auto"},[a(v,{title:o(l)("page.manage.menu.title"),bordered:!1,size:"small",class:"sm:flex-1-hidden card-wrapper"},{"header-extra":i(()=>[a(m,{columns:o(k),"onUpdate:columns":u[0]||(u[0]=r=>ve(k)?k.value=r:null),"disabled-delete":o(A).length===0,loading:o(U),"table-id":"menu",onAdd:B,onDelete:L,onRefresh:o(e)},null,8,["columns","disabled-delete","loading","onRefresh"])]),default:i(()=>[a(p,{"checked-row-keys":o(A),"onUpdate:checkedRowKeys":u[1]||(u[1]=r=>ve(A)?A.value=r:null),columns:o(w),data:o(V),size:"small","flex-height":!o(f).isMobile,"scroll-x":1088,loading:o(U),"row-key":r=>r.id,remote:"",pagination:o(O),class:"sm:h-full"},null,8,["checked-row-keys","columns","data","flex-height","loading","row-key","pagination"]),a(ot,{visible:o(c),"onUpdate:visible":u[2]||(u[2]=r=>ve(c)?c.value=r:null),"operate-type":S.value,"row-data":E.value,"all-pages":H.value,onSubmitted:o(T)},null,8,["visible","operate-type","row-data","all-pages","onSubmitted"])]),_:1},8,["title"])],512)}}});export{bt as default};
