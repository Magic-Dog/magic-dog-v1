import{_ as It}from"./web-site-link.vue_vue_type_script_setup_true_lang-DVr_NS00.js";import{G as I,c as ee,S as _t,i as N,T as oe,a as pt,b as Pt,I as Ye,C as vt,L as Ft,d as Et,B as Rt,e as Nt,f as jt,P as Gt,g as Xt,v as Xe,h as Yt,j as Vt,D as Ne,k as mt,l as Kt}from"./index-BDIlfyrQ.js";import{d as $t,y as Ut,c4 as Ae,ak as qt,i as Zt,as as Qt,o as Jt,c as ei,w as Fe,f as Ee,e as lt,H as ti}from"./index-iA9TGKTo.js";import{N as ii}from"./Space-DMNzUGPF.js";import"./linear-scale-N-yw5l3z.js";import"./index-BYXeyosJ.js";import"./get-slot-Bk_rJcZu.js";var A;(function(s){s.default="default",s.grabing="grabing",s.scrolling="scrolling"})(A||(A={}));var X;(function(s){s.FinishToStart="finish_to_start",s.StartToStart="start_to_start",s.FinishToFinish="finish_to_finish",s.StartToFinish="start_to_finish"})(X||(X={}));var S;(function(s){s.Tasks_Separate="tasks_separate",s.Sub_Tasks_Inline="sub_tasks_inline",s.Sub_Tasks_Separate="sub_tasks_separate",s.Sub_Tasks_Arrange="sub_tasks_arrange",s.Sub_Tasks_Compact="sub_tasks_compact"})(S||(S={}));const G={SCROLL:"scroll",CHANGE_DATE_RANGE:"change_date_range",CLICK_TASK_BAR:"click_task_bar",MOUSEENTER_TASK_BAR:"mouseenter_task_bar",MOUSELEAVE_TASK_BAR:"mouseleave_task_bar",CREATE_TASK_SCHEDULE:"create_task_schedule",CREATE_DEPENDENCY_LINK:"create_dependency_link",CLICK_DEPENDENCY_LINK_POINT:"click_dependency_link_point"};class si{constructor(e){var t,i,a,n,r,o,d;this._scene=e,this.vertical=!!e._gantt.parsedOptions.grid.verticalLine,this.horizontal=!!e._gantt.parsedOptions.grid.horizontalLine,this.gridStyle=e._gantt.parsedOptions.grid,this.scrollLeft=0,this.scrollTop=0,this.x=0,this.y=e._gantt.getAllHeaderRowsHeight(),this.width=e.tableGroup.attribute.width,this.height=e.tableGroup.attribute.height-e.timelineHeader.group.attribute.height,this.rowHeight=e._gantt.parsedOptions.rowHeight,this.rowCount=e._gantt.itemCount,this.allGridWidth=e._gantt.getAllDateColsWidth(),this.allGridHeight=e._gantt.getAllTaskBarsHeight(),this.group=new I({x:this.x,y:this.y,width:this.width,height:this.height,clip:!0,fill:(t=this.gridStyle)===null||t===void 0?void 0:t.backgroundColor}),this.group.name="grid-container",e.tableGroup.addChild(this.group),this.createVerticalLines(),this.createHorizontalLines();const l=(a=(i=e._gantt.parsedOptions.horizontalSplitLine)===null||i===void 0?void 0:i.lineWidth)!==null&&a!==void 0?a:(n=e._gantt.parsedOptions.timelineHeaderHorizontalLineStyle)===null||n===void 0?void 0:n.lineWidth,h=(1&l?-.5:0)+l/2,p=ee({pickable:!1,stroke:(o=(r=e._gantt.parsedOptions.horizontalSplitLine)===null||r===void 0?void 0:r.lineColor)!==null&&o!==void 0?o:(d=e._gantt.parsedOptions.timelineHeaderHorizontalLineStyle)===null||d===void 0?void 0:d.lineColor,lineWidth:l+(1&l?1:0),points:[{x:0,y:h},{x:e._gantt.getAllDateColsWidth(),y:h}]});p.name="timeLine-header-bottom-line",this.group.addChild(p)}createVerticalLines(){var e,t,i;if(this.vertical){this.verticalLineGroup=new I({x:0,y:0,width:this.allGridWidth,height:this.allGridHeight}),this.verticalLineGroup.name="grid-vertical",this.group.appendChild(this.verticalLineGroup);const a=this._scene._gantt.parsedOptions.reverseSortedTimelineScales[0].timelineDates,n=this._scene._gantt.parsedOptions.timelineColWidth;for(let r=0;r<(a==null?void 0:a.length)-1;r++){const o=Math.ceil(n*(r+1))+(1&((e=this.gridStyle)===null||e===void 0?void 0:e.verticalLine.lineWidth)?.5:0),d=ee({pickable:!1,stroke:(t=this.gridStyle)===null||t===void 0?void 0:t.verticalLine.lineColor,lineWidth:(i=this.gridStyle)===null||i===void 0?void 0:i.verticalLine.lineWidth,points:[{x:o,y:0},{x:o,y:this.allGridHeight}]});this.verticalLineGroup.appendChild(d)}}}createHorizontalLines(){var e,t,i;if(this.horizontal){this.horizontalLineGroup=new I({x:0,y:0,width:this.allGridWidth,height:this.allGridHeight}),this.horizontalLineGroup.name="grid-horizontal",this.group.appendChild(this.horizontalLineGroup);let a=0;1&((e=this.gridStyle)===null||e===void 0?void 0:e.horizontalLine.lineWidth)&&(a+=.5);for(let n=0;n<this.rowCount-1;n++){a+=this._scene._gantt.getRowHeightByIndex(n);const r=ee({pickable:!1,stroke:(t=this.gridStyle)===null||t===void 0?void 0:t.horizontalLine.lineColor,lineWidth:(i=this.gridStyle)===null||i===void 0?void 0:i.horizontalLine.lineWidth,points:[{x:0,y:a},{x:this.allGridWidth,y:a}]});this.horizontalLineGroup.appendChild(r)}}}refresh(){var e,t;this.width=this._scene.tableGroup.attribute.width,this.height=this._scene.tableGroup.attribute.height-this._scene.timelineHeader.group.attribute.height,this.group.setAttributes({width:this.width,height:this.height,y:this._scene._gantt.getAllHeaderRowsHeight()}),this.rowCount=this._scene._gantt.itemCount,this.allGridWidth=this._scene._gantt.getAllDateColsWidth(),this.allGridHeight=this._scene._gantt.getAllTaskBarsHeight(),(e=this.verticalLineGroup)===null||e===void 0||e.parent.removeChild(this.verticalLineGroup),(t=this.horizontalLineGroup)===null||t===void 0||t.parent.removeChild(this.horizontalLineGroup),this.createVerticalLines(),this.createHorizontalLines()}setX(e){var t,i;(t=this.verticalLineGroup)===null||t===void 0||t.setAttribute("x",e),(i=this.horizontalLineGroup)===null||i===void 0||i.setAttribute("x",e)}setY(e){var t,i;(t=this.verticalLineGroup)===null||t===void 0||t.setAttribute("y",e),(i=this.horizontalLineGroup)===null||i===void 0||i.setAttribute("y",e)}resize(){this.width=this._scene.tableGroup.attribute.width,this.height=this._scene.tableGroup.attribute.height-this._scene.timelineHeader.group.attribute.height,this.group.setAttribute("width",this.width),this.group.setAttribute("height",this.height)}}class F{static get mode(){return F._mode||(F._mode=ai()),F._mode}static set mode(e){F._mode=e}static RegisterCreateCanvas(e){F.CreateCanvas=e}static RegisterLoadImage(e){F.LoadImage=e}static GetCreateCanvasFunc(){return F.CreateCanvas?F.CreateCanvas:F.mode==="worker"?(e=200,t=200)=>new OffscreenCanvas(e,t):void 0}static RegisterRequestAnimationFrame(e){F.RequestAnimationFrame=e()}static GetRequestAnimationFrame(){if(F.RequestAnimationFrame)return F.RequestAnimationFrame}static RegisterCancelAnimationFrame(e){F.CancelAnimationFrame=e()}static GetCancelAnimationFrame(){if(F.CancelAnimationFrame)return F.CancelAnimationFrame}}function ai(){let s="browser";try{window.type==="node"?s="node":typeof window>"u"||window.performance?typeof window>"u"&&(s="node"):s="miniApp"}catch{s="node"}return s}F.dpr=0;class ni{constructor(e){this._gantt=e,this.createScrollBar(e.tableNoFrameWidth,e.tableNoFrameHeight-e.getAllHeaderRowsHeight())}createScrollBar(e,t){var i,a;const n=this._gantt.parsedOptions.scrollStyle.scrollRailColor,r=this._gantt.parsedOptions.scrollStyle.scrollSliderColor,o=this._gantt.parsedOptions.scrollStyle.scrollSliderCornerRadius,d=this._gantt.parsedOptions.scrollStyle.width;let l;l=N(o)?{cornerRadius:o,fill:r}:{fill:r},(i=this._gantt.parsedOptions.scrollStyle)===null||i===void 0||i.visible,(a=this._gantt.parsedOptions.scrollStyle)===null||a===void 0||a.hoverOn,this.hScrollBar=new _t({direction:"horizontal",x:2*-e,y:2*-t,width:e,height:d,padding:0,railStyle:{fill:n},sliderStyle:l,range:[0,.1],visible:!1}),this.hScrollBar.render(),this.hScrollBar.hideAll(),this.vScrollBar=new _t({direction:"vertical",x:2*-e,y:2*-t,width:d,height:t,padding:0,railStyle:{fill:n},sliderStyle:l,range:[0,.1],visible:!1}),this.vScrollBar.render(),this.vScrollBar.hideAll()}refresh(){}hideVerticalScrollBar(){const e=this._gantt.parsedOptions.scrollStyle.visible;e!=="focus"&&e!=="scrolling"||(this.vScrollBar.setAttribute("visible",!1),this.vScrollBar.hideAll(),this._gantt.scenegraph.updateNextFrame())}showVerticalScrollBar(e){const t=this._gantt.parsedOptions.scrollStyle.visible;t!=="focus"&&t!=="scrolling"||(this.vScrollBar.setAttribute("visible",!0),this.vScrollBar.showAll(),this._gantt.scenegraph.updateNextFrame(),e&&(clearTimeout(this._clearVerticalScrollBar),this._clearVerticalScrollBar=setTimeout(()=>{this.hideVerticalScrollBar()},1e3)))}hideHorizontalScrollBar(){const e=this._gantt.parsedOptions.scrollStyle.visible;e!=="focus"&&e!=="scrolling"||(this.hScrollBar.setAttribute("visible",!1),this.hScrollBar.hideAll(),this._gantt.scenegraph.updateNextFrame())}showHorizontalScrollBar(e){const t=this._gantt.parsedOptions.scrollStyle.visible;t!=="focus"&&t!=="scrolling"||(this.hScrollBar.setAttribute("visible",!0),this.hScrollBar.showAll(),this._gantt.scenegraph.updateNextFrame(),e&&(clearTimeout(this._clearHorizontalScrollBar),this._clearHorizontalScrollBar=setTimeout(()=>{this.hideHorizontalScrollBar()},1e3)))}updateVerticalScrollBarPos(e){const t=this.vScrollBar.attribute.range,i=t[1]-t[0],a=e*(1-i);this.vScrollBar.setAttribute("range",[a,a+i]);const n=this.vScrollBar.AABBBounds&&this.vScrollBar.globalAABBBounds;this.vScrollBar._viewPosition={x:n.x1,y:n.y1}}updateHorizontalScrollBarPos(e){const t=this.hScrollBar.attribute.range,i=t[1]-t[0],a=e*(1-i);this.hScrollBar.setAttribute("range",[a,a+i]);const n=this.hScrollBar.AABBBounds&&this.hScrollBar.globalAABBBounds;this.hScrollBar._viewPosition={x:n.x1,y:n.y1}}updateScrollBar(){const e=this._gantt.stateManager.scroll.horizontalBarPos,t=this._gantt.stateManager.scroll.verticalBarPos,i=this._gantt.parsedOptions.scrollStyle,a=i==null?void 0:i.width,n=i==null?void 0:i.visible,r=Math.ceil(this._gantt.scenegraph.tableGroup.attribute.width),o=Math.ceil(this._gantt.scenegraph.tableGroup.attribute.height),d=this._gantt.getAllRowsHeight(),l=this._gantt.getAllDateColsWidth(),h=this._gantt.getAllHeaderRowsHeight();if(l>r){const p=Math.min(o,d),u=Math.max(.05,r/l),c=i.hoverOn;let g=0;g=i.barToSide?this._gantt.tableNoFrameHeight-(c?a:-this._gantt.scenegraph.tableGroup.attribute.y)+this._gantt.tableY:p-(c?a:-this._gantt.scenegraph.tableGroup.attribute.y)+this._gantt.tableY,this.hScrollBar.setAttributes({x:this._gantt.scenegraph.tableGroup.attribute.x,y:g,width:r,range:[0,u],visible:n==="always"});const _=this.hScrollBar.AABBBounds&&this.hScrollBar.globalAABBBounds;this.hScrollBar._viewPosition={x:_.x1,y:_.y1},n==="always"&&this.hScrollBar.showAll()}else this.hScrollBar.setAttributes({x:2*-this._gantt.tableNoFrameWidth,y:2*-this._gantt.tableNoFrameHeight,width:0,visible:!1});if(d>o){const p=Math.min(r,l)+this._gantt.scenegraph.tableGroup.attribute.x,u=Math.max(.05,(o-h)/(d-h));let c=0;const g=this._gantt.parsedOptions.scrollStyle.hoverOn;c=this._gantt.parsedOptions.scrollStyle.barToSide?this._gantt.tableNoFrameWidth-(g?a:-this._gantt.scenegraph.tableGroup.attribute.x):p-(g?a:-this._gantt.scenegraph.tableGroup.attribute.x),this.vScrollBar.setAttributes({x:c,y:h+(g?0:this._gantt.scenegraph.tableGroup.attribute.y)+this._gantt.tableY,height:o-h,range:[0,u],visible:n==="always"});const _=this.vScrollBar.AABBBounds&&this.vScrollBar.globalAABBBounds;this.vScrollBar._viewPosition={x:_.x1,y:_.y1},n==="always"&&this.vScrollBar.showAll()}else this.vScrollBar.setAttributes({x:2*-this._gantt.tableNoFrameWidth,y:2*-this._gantt.tableNoFrameHeight,height:0,visible:!1});this._gantt.stateManager.setScrollLeft(e),this._gantt.stateManager.setScrollTop(t)}}function yt(s,e){let t=null;return function(...i){t||(s.apply(this,i),t=setTimeout(()=>{t=null},e))}}function de(s,e){const t=s.getFullYear().toString(),i=(s.getMonth()+1).toString().padStart(2,"0"),a=s.getDate().toString().padStart(2,"0");if((e=(e=(e=e.replace("yyyy",t)).replace("mm",i)).replace("dd",a)).length>10){const n=s.getHours().toString().padStart(2,"0"),r=s.getMinutes().toString().padStart(2,"0"),o=s.getSeconds().toString().padStart(2,"0");e=(e=(e=e.replace("hh",n)).replace("mm",r)).replace("ss",o)}return e}function ri(s,e){const t=e.indexOf("yyyy"),i=e.indexOf("mm"),a=e.indexOf("dd"),n=i<t?i<a?0:1:i<a?1:2,r=a<t?a<i?0:1:a<i?1:2,o=parseInt(s[t<i?t<a?0:1:i<a?1:2],10),d=parseInt(s[n],10)-1,l=parseInt(s[r],10);if(isNaN(o)||o<1||isNaN(d)||d<0||d>11)return!1;const h=[31,li(o)?29:28,31,30,31,30,31,31,30,31,30,31];return!(isNaN(l)||l<1||l>h[d])}function oi(s,e){if(e.includes("hh")||e.includes("mm")||e.includes("ss")){const t=e.indexOf("hh")>-1?e.indexOf("hh"):e.indexOf("HH"),i=parseInt(s[t],10),a=parseInt(s[t+1],10),n=s.length>t+2?parseInt(s[t+2],10):0;if(isNaN(i)||i<0||i>23||isNaN(a)||a<0||a>59||isNaN(n)||n<0||n>59)return!1}return!0}function li(s){return s%4==0&&s%100!=0||s%400==0}function Ge(s){const e=["yyyy-mm-dd","dd-mm-yyyy","mm/dd/yyyy","yyyy/mm/dd","dd/mm/yyyy","yyyy.mm.dd","mm.dd.yyyy","dd.mm.yyyy"],t=["hh:mm:ss","hh:mm"],i=(s=s.trim()).split(" "),a=i[0],n=i[1];let r,o;if(a)for(let d=0;d<e.length;d++){const l=e[d],h=a.split(dt(l)),p=ri(h,l);if(h.length===3&&p){r=l;break}}if(r&&n)for(let d=0;d<t.length;d++){const l=t[d],h=n.split(dt(l)),p=l.split(dt(l));if(oi(h,l)&&h.length===p.length){o=l;break}}return a&&n&&r&&o?r+" "+o:a&&!n?r:"yyyy-mm-dd hh:mm:ss"}function dt(s){const e=s.match(/[^\w]/g);if(e){const t=e.map(i=>"\\"+i).join("|");return new RegExp(t,"g")}return/[^\w]/}function di(s,e){return s.replace(/\{([^}]+)\}/g,(t,i)=>{const a=i.split(".");let n=e;for(const r of a){if(!n.hasOwnProperty(r)){n=t;break}n=n[r]}return n})}function Tt(s){return Array.isArray(s)?s.length===3?[s[0],s[1],s[2],s[1]]:s.length===2?[s[0],s[1],s[0],s[1]]:s.length===1?[s[0],s[0],s[0],s[0]]:[s[0],s[1],s[2],s[3]]:[s,s,s,s]}function hi(s){const e=new Date(s.getFullYear(),0,1);return Math.ceil(((s.getTime()+1-e.getTime())/864e5+1)/7)}function ci(s,e="long"){const t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=new Date(s);return e==="short"?t[i.getDay()].substr(0,3):e==="long"?t[i.getDay()]:'Invalid format specified. Please use "short" or "long".'}function pi(s,e){const t=Object.getOwnPropertyDescriptor(s,e);return!!t&&(!!t.set||t.writable===!0)}function E(s,e=!1){let t;if(s){if(t=new Date(s),typeof s=="string"){if(s.length>10)return e&&t.setHours(0,0,0,0),t;t.setHours(0,0,0,0)}}else t=new Date;return e&&t.setHours(0,0,0,0),t}function gi(s,e=!1){let t;if(s){if(t=new Date(s),typeof s=="string"){if(s.length>10)return e&&t.setMinutes(59,59,999),t;t.setMinutes(59,59,999)}}else t=new Date;return e&&t.setMinutes(59,59,999),t}function ui(s,e=!1){let t;if(s){if(t=new Date(s),typeof s=="string"){if(s.length>10)return e&&t.setSeconds(59,999),t;t.setSeconds(59,999)}}else t=new Date;return e&&t.setSeconds(59,999),t}function wt(s,e=!1){let t;if(s){if(t=new Date(s),typeof s=="string"){if(s.length>10)return e&&t.setMilliseconds(999),t;t.setMilliseconds(999)}}else t=new Date;return e&&t.setMilliseconds(999),t}function le(s,e=!1){let t;if(s){if(t=new Date(s),typeof s=="string"){if(s.length>10)return e&&t.setHours(23,59,59,999),t;t.setHours(23,59,59,999)}}else t=new Date;return e&&t.setHours(23,59,59,999),t}function ut(s,e,t,i){let a=new Date(e);switch(t){case"second":a.setMilliseconds(999);break;case"minute":a.setSeconds(59,999);break;case"hour":a.setMinutes(59,59,999);break;case"day":a.setHours(23,59,59,999);break;case"week":const o=6-a.getDay();a.setDate(a.getDate()+o),a.setHours(23,59,59,999);break;case"month":const d=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();a.setDate(d),a.setHours(23,59,59,999);break;case"quarter":const l=a.getMonth(),h=l-l%3+2,p=new Date(a.getFullYear(),h+1,0).getDate();a.setMonth(h,p),a.setHours(23,59,59,999);break;case"year":a.setMonth(11,31),a.setHours(23,59,59,999);break;default:throw new Error("Invalid time scale")}const n=j(a,s,t,i,1),r=Math.ceil(n);if(r>n){const o=(r-n)*i,d=1e3,l=60*d,h=60*l,p=24*h,u=7*p;switch(new Date(a.getTime()+1),t){case"second":a.setTime(a.getTime()+o*d);break;case"minute":a.setTime(a.getTime()+o*l);break;case"hour":a.setTime(a.getTime()+o*h);break;case"day":a.setTime(a.getTime()+o*p);break;case"week":a.setTime(a.getTime()+o*u);break;case"month":a=new Date(a.getFullYear(),a.getMonth()+1+Math.round(o),0),a.setHours(23,59,59,999);break;case"quarter":const c=a.getMonth(),g=c-c%3+2;a=new Date(a.getFullYear(),g+Math.round(3*o)+1,0),a.setHours(23,59,59,999);break;case"year":a.setFullYear(a.getFullYear()+Math.floor(o)),a.setHours(23,59,59,999);break;default:throw new Error("Invalid time scale")}}return a}function Ve(s,e,t="monday"){const i=new Date(s);switch(e){case"second":i.setMilliseconds(0);break;case"minute":i.setSeconds(0,0);break;case"hour":i.setMinutes(0,0,0);break;case"day":i.setHours(0,0,0,0);break;case"week":const a=i.getDay();let n=a;n=t==="monday"?a===0?-6:1-a:-a,i.setDate(i.getDate()+n),i.setHours(0,0,0,0);break;case"month":i.setDate(1),i.setHours(0,0,0,0);break;case"quarter":const r=i.getMonth(),o=r-r%3;i.setMonth(o,1),i.setHours(0,0,0,0);break;case"year":i.setMonth(0,1),i.setHours(0,0,0,0);break;default:throw new Error("Invalid time scale")}return i}function j(s,e,t,i,a=0){let n;const r=new Date(s.getTime()+a);switch(t){case"second":n=(r.getTime()-e.getTime())/1e3;break;case"minute":n=(r.getTime()-e.getTime())/6e4;break;case"hour":n=(r.getTime()-e.getTime())/36e5;break;case"day":n=(r.getTime()-e.getTime())/864e5;break;case"week":n=(r.getTime()-e.getTime())/6048e5;break;case"month":n=12*(r.getFullYear()-e.getFullYear())+(r.getMonth()-e.getMonth()),n+=(r.getDate()-e.getDate())/new Date(r.getFullYear(),r.getMonth()+1,0).getDate();break;case"quarter":n=4*(r.getFullYear()-e.getFullYear())+Math.floor(r.getMonth()/3)-Math.floor(e.getMonth()/3),n+=(r.getDate()-e.getDate())/(3*new Date(r.getFullYear(),r.getMonth()+1,0).getDate());break;case"year":n=r.getFullYear()-e.getFullYear(),n+=(r.getMonth()-e.getMonth())/12;break;default:throw new Error("Invalid time scale")}return n/i}function bi(s,e,t,i=!0){let{deltaX:a,deltaY:n}=s;s.shiftKey&&s.deltaY&&(a=n,n=0);const[r,o]=_i(a,n,{horizontal:1,vertical:1});r&&(e.setScrollLeft(e.scroll.horizontalBarPos+r),t.scenegraph.scrollbarComponent.showHorizontalScrollBar(!0)),o&&(e.setScrollTop(e.scroll.verticalBarPos+o),t.scenegraph.scrollbarComponent.showVerticalScrollBar(!0)),i&&e.resetInteractionState(),s.cancelable&&(e._gantt.parsedOptions.overscrollBehavior==="none"||Math.abs(n)>=Math.abs(a)&&n!==0&&vi(n,e)||Math.abs(n)<=Math.abs(a)&&a!==0&&mi(a,e))&&s.preventDefault()}function _i(s,e,t){var i,a;const n=Math.abs(s/e),r=n<=.5?0:s,o=n>2?0:e;return[Math.ceil(r*((i=t.horizontal)!==null&&i!==void 0?i:0)),Math.ceil(o*((a=t.vertical)!==null&&a!==void 0?a:0))]}function vi(s,e){return e._gantt.getAllRowsHeight()-e._gantt.scenegraph.height!=0&&!yi(s,e)&&!ki(s,e)}function mi(s,e){return e._gantt.getAllDateColsWidth()-e._gantt.scenegraph.width!=0&&!fi(s,e)&&!Si(s,e)}function yi(s,e){return e._gantt.getAllRowsHeight()-e._gantt.scenegraph.height!==0&&s<=0&&e.scroll.verticalBarPos<1}function ki(s,e){const t=e._gantt.getAllRowsHeight()-e._gantt.scenegraph.height;return t!==0&&s>=0&&Math.abs(e.scroll.verticalBarPos-t)<1}function fi(s,e){return e._gantt.getAllDateColsWidth()-e._gantt.scenegraph.width!==0&&s<=0&&e.scroll.horizontalBarPos<1}function Si(s,e){const t=e._gantt.getAllDateColsWidth()-e._gantt.scenegraph.width;return t!==0&&s>=0&&Math.abs(e.scroll.horizontalBarPos-t)<1}function Li(s){const e=s._gantt,t=e.stateManager,i=e.scenegraph;i.scrollbarComponent.vScrollBar.addEventListener("pointerover",r=>{i.scrollbarComponent.showVerticalScrollBar()}),i.scrollbarComponent.hScrollBar.addEventListener("pointerover",r=>{i.scrollbarComponent.showHorizontalScrollBar()}),i.scrollbarComponent.vScrollBar.addEventListener("pointerout",r=>{t.interactionState!==A.scrolling&&i.scrollbarComponent.hideVerticalScrollBar()}),i.scrollbarComponent.hScrollBar.addEventListener("pointerout",r=>{t.interactionState!==A.scrolling&&i.scrollbarComponent.hideHorizontalScrollBar()}),i.scrollbarComponent.vScrollBar.addEventListener("pointermove",r=>{r.stopPropagation()}),i.scrollbarComponent.vScrollBar.addEventListener("scrollDown",r=>{i._gantt.eventManager.isDown=!0}),i.scrollbarComponent.vScrollBar.addEventListener("pointerup",()=>{i._gantt.eventManager.isDraging=!1,t.interactionState===A.scrolling&&t.updateInteractionState(A.default)}),i.scrollbarComponent.vScrollBar.addEventListener("pointerupoutside",()=>{t.interactionState===A.scrolling&&t.updateInteractionState(A.default)}),i.scrollbarComponent.vScrollBar.addEventListener("scrollUp",r=>{i._gantt.eventManager.isDraging=!1}),i.scrollbarComponent.hScrollBar.addEventListener("pointermove",r=>{r.stopPropagation()}),i.scrollbarComponent.hScrollBar.addEventListener("pointerdown",r=>{r.stopPropagation()}),i.scrollbarComponent.hScrollBar.addEventListener("scrollDown",r=>{i._gantt.eventManager.isDown=!0,t.interactionState!==A.scrolling&&t.updateInteractionState(A.scrolling)}),i.scrollbarComponent.hScrollBar.addEventListener("pointerup",()=>{t.interactionState===A.scrolling&&t.updateInteractionState(A.default)}),i.scrollbarComponent.hScrollBar.addEventListener("pointerupoutside",()=>{t.interactionState===A.scrolling&&t.updateInteractionState(A.default)}),i.scrollbarComponent.hScrollBar.addEventListener("scrollUp",r=>{i._gantt.eventManager.isDraging=!1});const a=yt(t.updateVerticalScrollBar,20),n=yt(t.updateHorizontalScrollBar,20);i.scrollbarComponent.vScrollBar.addEventListener("scrollDrag",r=>{i._gantt.eventManager.isDown&&(i._gantt.eventManager.isDraging=!0),t.interactionState!==A.scrolling&&t.updateInteractionState(A.scrolling);const o=r.detail.value[0]/(1-r.detail.value[1]+r.detail.value[0]);a(o,r)}),i.scrollbarComponent.hScrollBar.addEventListener("scrollDrag",r=>{i._gantt.eventManager.isDown&&(i._gantt.eventManager.isDraging=!0),t.fastScrolling=!0,t.interactionState!==A.scrolling&&t.updateInteractionState(A.scrolling);const o=r.detail.value[0]/(1-r.detail.value[1]+r.detail.value[0]);n(o)})}const Ti=typeof window>"u"||window.window===void 0;function ht(s,e){const t=s-e.headerHeight,i=e.stateManager.scroll.verticalBarPos+t;return Math.floor(i/e.parsedOptions.rowHeight)}function Ke(s,e){const t=s+e.stateManager.scroll.horizontalBarPos,i=e.getDateColWidth(0);return Math.floor((t-i)/e.parsedOptions.timelineColWidth)+1}function wi(s){var e,t,i,a,n;return s?s===!0?[{date:E().toLocaleDateString(),scrollToMarkLine:!0,position:"left",style:{lineColor:"red",lineWidth:1}}]:Array.isArray(s)?s.map((r,o)=>{var d,l,h,p;return{date:r.date,scrollToMarkLine:r.scrollToMarkLine,position:(d=r.position)!==null&&d!==void 0?d:"left",style:{lineColor:((l=r.style)===null||l===void 0?void 0:l.lineColor)||"red",lineWidth:((h=r.style)===null||h===void 0?void 0:h.lineWidth)||1,lineDash:(p=r.style)===null||p===void 0?void 0:p.lineDash}}}):[{date:s.date,scrollToMarkLine:(e=s.scrollToMarkLine)===null||e===void 0||e,position:(t=s.position)!==null&&t!==void 0?t:"left",style:{lineColor:((i=s.style)===null||i===void 0?void 0:i.lineColor)||"red",lineWidth:((a=s.style)===null||a===void 0?void 0:a.lineWidth)||1,lineDash:(n=s.style)===null||n===void 0?void 0:n.lineDash}}]:[]}function Bi(s){var e;return s!=null&&s.hoverOn||s!=null&&s.horizontalVisible&&(s==null?void 0:s.horizontalVisible)==="none"||!(s!=null&&s.horizontalVisible)&&(s==null?void 0:s.visible)==="none"?0:(e=s==null?void 0:s.width)!==null&&e!==void 0?e:7}function xi(s){var e;return s!=null&&s.hoverOn||s!=null&&s.verticalVisible&&(s==null?void 0:s.verticalVisible)==="none"||!(s!=null&&s.verticalVisible)&&(s==null?void 0:s.visible)==="none"?0:(e=s==null?void 0:s.width)!==null&&e!==void 0?e:7}function Ci(s){var e,t,i,a,n,r,o,d,l,h,p,u,c,g,_,L,m,v,b,B,k,T,f,w,W,C,O,H,z,R,P,M,K,$,V,U,te,ie,se,ae,Z,q,he,ce,pe,ge,ue,be,_e,ve,me,ye,ke,fe,Se,Le,Te,we,Be,xe,Ce,Oe,De,He,We,Me,x,Pe,D,Y,ne,re,Ue,qe,Ze,Qe,Je,et,tt,it,st,at,nt,rt;const y=s.options;s.parsedOptions.tasksShowMode=(e=y==null?void 0:y.tasksShowMode)!==null&&e!==void 0?e:S.Tasks_Separate,s.parsedOptions.pixelRatio=(t=y==null?void 0:y.pixelRatio)!==null&&t!==void 0?t:1,s.parsedOptions.rowHeight=(i=y==null?void 0:y.rowHeight)!==null&&i!==void 0?i:40,s.parsedOptions.timelineColWidth=(n=(a=y==null?void 0:y.timelineHeader)===null||a===void 0?void 0:a.colWidth)!==null&&n!==void 0?n:60,s.parsedOptions.startDateField=(o=(r=y.taskBar)===null||r===void 0?void 0:r.startDateField)!==null&&o!==void 0?o:"startDate",s.parsedOptions.endDateField=(l=(d=y.taskBar)===null||d===void 0?void 0:d.endDateField)!==null&&l!==void 0?l:"endDate",s.parsedOptions.progressField=(p=(h=y.taskBar)===null||h===void 0?void 0:h.progressField)!==null&&p!==void 0?p:"progress";const{unit:ot,startOfWeek:bt,step:At}=s.parsedOptions.reverseSortedTimelineScales[0];s.parsedOptions.minDate=y!=null&&y.minDate?Ve(new Date(y.minDate),ot,bt):void 0,s.parsedOptions.maxDate=y!=null&&y.maxDate?ut(s.parsedOptions.minDate,new Date(y.maxDate),ot,At):void 0,s.parsedOptions._minDateTime=(u=s.parsedOptions.minDate)===null||u===void 0?void 0:u.getTime(),s.parsedOptions._maxDateTime=(c=s.parsedOptions.maxDate)===null||c===void 0?void 0:c.getTime(),s.parsedOptions.overscrollBehavior=(g=y==null?void 0:y.overscrollBehavior)!==null&&g!==void 0?g:"auto",s.parsedOptions.underlayBackgroundColor=(_=y==null?void 0:y.underlayBackgroundColor)!==null&&_!==void 0?_:"#FFF",s.parsedOptions.scrollStyle=Object.assign({},{scrollRailColor:"rgba(100, 100, 100, 0.2)",scrollSliderColor:"rgba(100, 100, 100, 0.5)",scrollSliderCornerRadius:4,width:10,visible:"always",hoverOn:!0,barToSide:!1},y==null?void 0:y.scrollStyle),s.parsedOptions.timelineHeaderHorizontalLineStyle=(L=y==null?void 0:y.timelineHeader)===null||L===void 0?void 0:L.horizontalLine,s.parsedOptions.timelineHeaderVerticalLineStyle=(m=y==null?void 0:y.timelineHeader)===null||m===void 0?void 0:m.verticalLine,s.parsedOptions.timelineHeaderBackgroundColor=(v=y==null?void 0:y.timelineHeader)===null||v===void 0?void 0:v.backgroundColor,s.parsedOptions.timeLineHeaderRowHeights=[],s.parsedOptions.timelineHeaderStyles=[];for(let Q=0;(b=Q<s.parsedOptions.sortedTimelineScales.length)!==null&&b!==void 0&&b;Q++){const zt=s.parsedOptions.sortedTimelineScales[Q].style;s.parsedOptions.timelineHeaderStyles.push(Object.assign({fontSize:20,fontWeight:"bold",textAlign:"center",textBaseline:"middle",color:"#000",backgroundColor:"#fff"},zt)),s.parsedOptions.timeLineHeaderRowHeights.push((k=(B=s.parsedOptions.sortedTimelineScales[Q].rowHeight)!==null&&B!==void 0?B:y==null?void 0:y.headerRowHeight)!==null&&k!==void 0?k:40)}s.parsedOptions.grid=Object.assign({},y==null?void 0:y.grid),s.parsedOptions.taskBarStyle=Object.assign({},{barColor:"blue",completedBarColor:"gray",width:3*s.parsedOptions.rowHeight/4,cornerRadius:3,borderWidth:0,fontFamily:"Arial",fontSize:14},(T=y==null?void 0:y.taskBar)===null||T===void 0?void 0:T.barStyle),s.parsedOptions.dateFormat=y==null?void 0:y.dateFormat,s.parsedOptions.taskBarHoverStyle=Object.assign({barOverlayColor:"rgba(99, 144, 0, 0.4)"},(f=y==null?void 0:y.taskBar)===null||f===void 0?void 0:f.hoverBarStyle),s.parsedOptions.taskBarSelectable=(W=(w=y==null?void 0:y.taskBar)===null||w===void 0?void 0:w.selectable)===null||W===void 0||W,s.parsedOptions.taskBarSelectedStyle=Object.assign({shadowBlur:6,shadowOffsetX:0,shadowOffsetY:0,shadowColor:s.parsedOptions.taskBarStyle.barColor,borderColor:s.parsedOptions.taskBarStyle.barColor,borderLineWidth:1},(C=y==null?void 0:y.taskBar)===null||C===void 0?void 0:C.selectedBarStyle),s.parsedOptions.taskBarLabelText=(H=(O=y==null?void 0:y.taskBar)===null||O===void 0?void 0:O.labelText)!==null&&H!==void 0?H:"",s.parsedOptions.taskBarMoveable=(R=(z=y==null?void 0:y.taskBar)===null||z===void 0?void 0:z.moveable)===null||R===void 0||R,s.parsedOptions.taskBarResizable=(M=(P=y==null?void 0:y.taskBar)===null||P===void 0?void 0:P.resizable)===null||M===void 0||M,s.parsedOptions.taskBarDragOrder=($=(K=y==null?void 0:y.taskBar)===null||K===void 0?void 0:K.dragOrder)===null||$===void 0||$,s.parsedOptions.taskBarLabelStyle={fontFamily:(te=(U=(V=y==null?void 0:y.taskBar)===null||V===void 0?void 0:V.labelTextStyle)===null||U===void 0?void 0:U.fontFamily)!==null&&te!==void 0?te:"Arial",fontSize:(ae=(se=(ie=y==null?void 0:y.taskBar)===null||ie===void 0?void 0:ie.labelTextStyle)===null||se===void 0?void 0:se.fontSize)!==null&&ae!==void 0?ae:20,color:(he=(q=(Z=y==null?void 0:y.taskBar)===null||Z===void 0?void 0:Z.labelTextStyle)===null||q===void 0?void 0:q.color)!==null&&he!==void 0?he:"#F01",textAlign:(ge=(pe=(ce=y==null?void 0:y.taskBar)===null||ce===void 0?void 0:ce.labelTextStyle)===null||pe===void 0?void 0:pe.textAlign)!==null&&ge!==void 0?ge:"left",textBaseline:(_e=(be=(ue=y==null?void 0:y.taskBar)===null||ue===void 0?void 0:ue.labelTextStyle)===null||be===void 0?void 0:be.textBaseline)!==null&&_e!==void 0?_e:"middle",padding:(ye=(me=(ve=y==null?void 0:y.taskBar)===null||ve===void 0?void 0:ve.labelTextStyle)===null||me===void 0?void 0:me.padding)!==null&&ye!==void 0?ye:[0,0,0,10],textOverflow:(fe=(ke=y==null?void 0:y.taskBar)===null||ke===void 0?void 0:ke.labelTextStyle)===null||fe===void 0?void 0:fe.textOverflow},s.parsedOptions.taskBarCustomLayout=(Se=y==null?void 0:y.taskBar)===null||Se===void 0?void 0:Se.customLayout,s.parsedOptions.taskBarCreatable=(Te=(Le=y==null?void 0:y.taskBar)===null||Le===void 0?void 0:Le.scheduleCreatable)===null||Te===void 0||Te,s.parsedOptions.taskBarCreationButtonStyle=Object.assign({lineColor:"rgb(99, 144, 0)",lineWidth:1,lineDash:[5,5],cornerRadius:4,backgroundColor:"#FFF"},(Be=(we=y==null?void 0:y.taskBar)===null||we===void 0?void 0:we.scheduleCreation)===null||Be===void 0?void 0:Be.buttonStyle),s.parsedOptions.taskBarCreationCustomLayout=(Ce=(xe=y==null?void 0:y.taskBar)===null||xe===void 0?void 0:xe.scheduleCreation)===null||Ce===void 0?void 0:Ce.customLayout,s.parsedOptions.outerFrameStyle=Object.assign({borderColor:"#e1e4e8",borderLineWidth:1,cornerRadius:4},(Oe=y.frame)===null||Oe===void 0?void 0:Oe.outerFrameStyle),s.parsedOptions.markLine=wi(y==null?void 0:y.markLine),(He=(De=s.parsedOptions.markLine)===null||De===void 0?void 0:De.length)!==null&&He!==void 0&&He&&(!((We=s.parsedOptions.markLine)===null||We===void 0)&&We.every(Q=>Q.scrollToMarkLine===void 0)&&(s.parsedOptions.markLine[0].scrollToMarkLine=!0),!((Me=s.parsedOptions.markLine)===null||Me===void 0)&&Me.find(Q=>Q.scrollToMarkLine)&&(s.parsedOptions.scrollToMarkLineDate=Ve(new Date((x=s.parsedOptions.markLine)===null||x===void 0?void 0:x.find(Q=>Q.scrollToMarkLine).date),ot,bt))),s.parsedOptions.verticalSplitLineHighlight=(Pe=y.frame)===null||Pe===void 0?void 0:Pe.verticalSplitLineHighlight,s.parsedOptions.verticalSplitLine=Object.assign({lineColor:(D=s.parsedOptions.outerFrameStyle)===null||D===void 0?void 0:D.borderColor,lineWidth:(Y=s.parsedOptions.outerFrameStyle)===null||Y===void 0?void 0:Y.borderLineWidth},(ne=y.frame)===null||ne===void 0?void 0:ne.verticalSplitLine),s.parsedOptions.horizontalSplitLine=(re=y.frame)===null||re===void 0?void 0:re.horizontalSplitLine,s.parsedOptions.verticalSplitLineMoveable=(Ue=y.frame)===null||Ue===void 0?void 0:Ue.verticalSplitLineMoveable,s.parsedOptions.taskKeyField=(qe=y.taskKeyField)!==null&&qe!==void 0?qe:"id",s.parsedOptions.dependencyLinks=(Ze=y.dependency)===null||Ze===void 0?void 0:Ze.links,s.parsedOptions.dependencyLinkCreatable=(Je=(Qe=y.dependency)===null||Qe===void 0?void 0:Qe.linkCreatable)!==null&&Je!==void 0&&Je,s.parsedOptions.dependencyLinkSelectable=(tt=(et=y.dependency)===null||et===void 0?void 0:et.linkSelectable)===null||tt===void 0||tt,s.parsedOptions.dependencyLinkLineStyle=Object.assign({lineColor:"red",lineWidth:1},(it=y.dependency)===null||it===void 0?void 0:it.linkLineStyle),s.parsedOptions.dependencyLinkSelectedLineStyle=Object.assign({shadowBlur:4,shadowOffset:0,shadowColor:s.parsedOptions.dependencyLinkLineStyle.lineColor,lineColor:s.parsedOptions.dependencyLinkLineStyle.lineColor,lineWidth:s.parsedOptions.dependencyLinkLineStyle.lineWidth},(st=y==null?void 0:y.dependency)===null||st===void 0?void 0:st.linkSelectedLineStyle),s.parsedOptions.dependencyLinkLineCreatePointStyle=Object.assign({strokeColor:"red",fillColor:"white",radius:5,strokeWidth:1},(at=y==null?void 0:y.dependency)===null||at===void 0?void 0:at.linkCreatePointStyle),s.parsedOptions.dependencyLinkLineCreatingPointStyle=Object.assign({strokeColor:"red",fillColor:"red",radius:5,strokeWidth:1},(nt=y==null?void 0:y.dependency)===null||nt===void 0?void 0:nt.linkCreatingPointStyle),s.parsedOptions.dependencyLinkLineCreatingStyle=Object.assign({lineColor:"red",lineWidth:1,lineDash:[5,5]},(rt=y==null?void 0:y.dependency)===null||rt===void 0?void 0:rt.linkCreatingLineStyle)}function Oi(s){var e,t,i,a,n;const r=s.options,{unit:o,startOfWeek:d,step:l}=s.parsedOptions.reverseSortedTimelineScales[0];s.parsedOptions.minDate=Ve(new Date(s.parsedOptions.minDate),o,d),s.parsedOptions.maxDate=ut(s.parsedOptions.minDate,new Date(s.parsedOptions.maxDate),o,l),s.parsedOptions._minDateTime=(e=s.parsedOptions.minDate)===null||e===void 0?void 0:e.getTime(),s.parsedOptions._maxDateTime=(t=s.parsedOptions.maxDate)===null||t===void 0?void 0:t.getTime(),s.parsedOptions.timeLineHeaderRowHeights=[],s.parsedOptions.timelineHeaderStyles=[];for(let h=0;(i=h<s.parsedOptions.sortedTimelineScales.length)!==null&&i!==void 0&&i;h++){const p=s.parsedOptions.sortedTimelineScales[h].style;s.parsedOptions.timelineHeaderStyles.push(Object.assign({fontSize:20,fontWeight:"bold",textAlign:"center",textBaseline:"middle",color:"#000",backgroundColor:"#fff"},p)),s.parsedOptions.timeLineHeaderRowHeights.push((n=(a=s.parsedOptions.sortedTimelineScales[h].rowHeight)!==null&&a!==void 0?a:r==null?void 0:r.headerRowHeight)!==null&&n!==void 0?n:40)}}function Di(s,e,t){var i;const{unit:a,step:n,format:r}=t,o=[];for(;s<e;)if(a==="day"){const d=s.getFullYear(),l=s.getMonth(),h=s.getDate(),p=le(new Date(d,l,h+n-1),!0);p.getTime()>e.getTime()&&p.setTime(e.getTime());const u=s,c=(r==null?void 0:r({dateIndex:h,startDate:u,endDate:p}))||h.toString(),g={days:Math.abs(p.getTime()-s.getTime()+1)/864e5,startDate:u,endDate:p,step:n,unit:"day",title:c,dateIndex:h};o.push(g),s=new Date(d,l,h+n)}else if(a==="month"){const d=s.getFullYear(),l=s.getMonth(),h=le(new Date(d,l+n,0),!0);h.getTime()>e.getTime()&&h.setTime(e.getTime());const p=s,u=(r==null?void 0:r({dateIndex:l+1,startDate:p,endDate:h}))||(l+1).toString(),c={days:Math.abs(h.getTime()-s.getTime()+1)/864e5,startDate:p,step:n,unit:"month",endDate:h,title:u,dateIndex:l+1};o.push(c),s=new Date(d,l+n,1)}else if(a==="quarter"){const d=s.getFullYear(),l=Math.floor(s.getMonth()/3),h=le(new Date(d,3*(l+n),0),!0);h.getTime()>e.getTime()&&h.setTime(e.getTime());const p=s,u=(r==null?void 0:r({dateIndex:l+1,startDate:p,endDate:h}))||(l+1).toString(),c={days:Math.abs(h.getTime()-s.getTime()+1)/864e5,startDate:p,step:n,unit:"quarter",endDate:h,title:u,dateIndex:l+1};o.push(c),s=new Date(d,3*(l+n),1)}else if(a==="year"){const d=s.getFullYear(),l=le(new Date(d+n-1,11,31),!0);l.getTime()>e.getTime()&&l.setTime(e.getTime());const h=s,p=(r==null?void 0:r({dateIndex:d,startDate:h,endDate:l}))||d.toString(),u={days:Math.abs(l.getTime()-s.getTime()+1)/864e5,startDate:h,endDate:l,step:n,unit:"year",title:p,dateIndex:d};o.push(u),s=new Date(d+n,0,1)}else if(a==="week"){const d=(i=t.startOfWeek)!==null&&i!==void 0?i:"monday";let l=s.getDay();d==="monday"&&(l=l===0?6:l-1);const h=E(s),p=le(s.getTime()+24*(7*n-l)*60*60*1e3-1,!0);p>e&&p.setTime(e.getTime());const u=hi(h),c=(r==null?void 0:r({dateIndex:u,startDate:h,endDate:p}))||u.toString(),g={days:(p.getTime()-h.getTime()+1)/864e5,startDate:h,endDate:p,step:n,unit:"week",title:c,dateIndex:u};o.push(g),s.setTime(E(s.getTime()+24*(7*n-l)*60*60*1e3,!0).getTime())}else if(a==="hour"){const d=s.getFullYear(),l=s.getMonth(),h=s.getDate(),p=s.getHours(),u=gi(new Date(d,l,h,p+n-1),!0);u.getTime()>e.getTime()&&u.setTime(e.getTime());const c=s,g=(r==null?void 0:r({dateIndex:p,startDate:c,endDate:u}))||p.toString(),_={days:Math.abs(u.getTime()-s.getTime()+1)/864e5,startDate:c,endDate:u,step:n,unit:"hour",title:g,dateIndex:s.getHours()};o.push(_),s=new Date(d,l,h,p+n)}else if(a==="minute"){const d=s.getFullYear(),l=s.getMonth(),h=s.getDate(),p=s.getHours(),u=s.getMinutes(),c=ui(new Date(d,l,h,p,u+n-1),!0);c.getTime()>e.getTime()&&c.setTime(e.getTime());const g=s,_=(r==null?void 0:r({dateIndex:u,startDate:g,endDate:c}))||u.toString(),L={days:Math.abs(c.getTime()-s.getTime()+1)/864e5,startDate:g,endDate:c,step:n,unit:"minute",title:_,dateIndex:s.getMinutes()};o.push(L),s=new Date(d,l,h,p,u+n)}else if(a==="second"){const d=s.getFullYear(),l=s.getMonth(),h=s.getDate(),p=s.getHours(),u=s.getMinutes(),c=s.getSeconds(),g=wt(new Date(d,l,h,p,u,c+n-1),!0);g.getTime()>e.getTime()&&g.setTime(e.getTime());const _=s,L=(r==null?void 0:r({dateIndex:c,startDate:_,endDate:g}))||c.toString(),m={days:Math.abs(g.getTime()-s.getTime()+1)/864e5,startDate:_,endDate:g,step:n,unit:"second",title:L,dateIndex:s.getSeconds()};o.push(m),s=new Date(d,l,h,p,u,c+n)}return o}function Bt(s,e,t,i,a){var n,r,o,d,l,h,p,u,c;let g=(n=s[3])!==null&&n!==void 0?n:10;e==="right"||e==="end"?g=i-0-((r=s[1])!==null&&r!==void 0?r:10):e==="center"&&(g=0+(i-0+((o=s[3])!==null&&o!==void 0?o:10)-((d=s[1])!==null&&d!==void 0?d:10))/2);let _=0+((l=s[0])!==null&&l!==void 0?l:10);return t==="bottom"||t==="alphabetic"||t==="ideographic"?_=a-0-((h=s[2])!==null&&h!==void 0?h:10):t==="middle"&&(_=0+(a-0-((p=s[0])!==null&&p!==void 0?p:10)-((u=s[2])!==null&&u!==void 0?u:10))/2+((c=s[0])!==null&&c!==void 0?c:10)),{x:g,y:_}}function Hi(s){return typeof s=="string"&&(s=s.replace("%",""),s=parseFloat(s)),s<=1&&(s*=100),Math.round(s)}function Wi(s){var e,t;if(s.taskListTableInstance){s.verticalSplitResizeLine=document.createElement("div"),s.verticalSplitResizeLine.style.position="absolute",s.verticalSplitResizeLine.style.top=s.tableY+"px",s.verticalSplitResizeLine.style.left=(s.taskTableWidth?s.taskTableWidth-7+s.parsedOptions.verticalSplitLine.lineWidth/2:0)+"px",s.verticalSplitResizeLine.style.width="14px",s.verticalSplitResizeLine.style.height=s.drawHeight+"px",s.verticalSplitResizeLine.style.backgroundColor="rgba(0,0,0,0)",s.verticalSplitResizeLine.style.zIndex="100",s.parsedOptions.verticalSplitLineMoveable&&(s.verticalSplitResizeLine.style.cursor="col-resize"),s.verticalSplitResizeLine.style.userSelect="none",s.verticalSplitResizeLine.style.opacity="1";const i=document.createElement("div");if(i.style.position="absolute",i.style.top="0px",i.style.left=(14-s.parsedOptions.verticalSplitLine.lineWidth)/2+"px",i.style.width=s.parsedOptions.verticalSplitLine.lineWidth+"px",i.style.height="100%",i.style.backgroundColor=s.parsedOptions.verticalSplitLine.lineColor,i.style.zIndex="100",i.style.userSelect="none",i.style.pointerEvents="none",i.style.transition="background-color 0.3s",s.verticalSplitResizeLine.appendChild(i),s.parsedOptions.verticalSplitLineHighlight){const a=document.createElement("div");a.style.position="absolute",a.style.top="0px",a.style.left=((e=14-s.parsedOptions.verticalSplitLineHighlight.lineWidth)!==null&&e!==void 0?e:2)/2+"px",a.style.width=((t=s.parsedOptions.verticalSplitLineHighlight.lineWidth)!==null&&t!==void 0?t:2)+"px",a.style.height="100%",a.style.backgroundColor=s.parsedOptions.verticalSplitLineHighlight.lineColor,a.style.zIndex="100",a.style.cursor="col-resize",a.style.userSelect="none",a.style.pointerEvents="none",a.style.opacity="0",a.style.transition="background-color 0.3s",s.verticalSplitResizeLine.appendChild(a)}s.container.appendChild(s.verticalSplitResizeLine)}}function gt(s){var e,t;if(s.verticalSplitResizeLine){s.verticalSplitResizeLine.style.position="absolute",s.verticalSplitResizeLine.style.top=s.tableY+"px",s.verticalSplitResizeLine.style.left=s.taskTableWidth?s.taskTableWidth-7+s.parsedOptions.verticalSplitLine.lineWidth/2+"px":"0px",s.verticalSplitResizeLine.style.width="14px",s.verticalSplitResizeLine.style.height=s.drawHeight+"px",s.verticalSplitResizeLine.style.backgroundColor="rgba(0,0,0,0)",s.verticalSplitResizeLine.style.zIndex="100",s.parsedOptions.verticalSplitLineMoveable&&(s.verticalSplitResizeLine.style.cursor="col-resize"),s.verticalSplitResizeLine.style.userSelect="none",s.verticalSplitResizeLine.style.opacity="1";const i=s.verticalSplitResizeLine.childNodes[0];if(i.style.position="absolute",i.style.top="0px",i.style.left=(14-s.parsedOptions.verticalSplitLine.lineWidth)/2+"px",i.style.width=s.parsedOptions.verticalSplitLine.lineWidth+"px",i.style.height="100%",i.style.backgroundColor=s.parsedOptions.verticalSplitLine.lineColor,i.style.zIndex="100",i.style.userSelect="none",i.style.pointerEvents="none",i.style.transition="background-color 0.3s",s.verticalSplitResizeLine.childNodes[1]){const a=s.verticalSplitResizeLine.childNodes[1];a.style.position="absolute",a.style.top="0px",a.style.left=((e=14-s.parsedOptions.verticalSplitLineHighlight.lineWidth)!==null&&e!==void 0?e:2)/2+"px",a.style.width=((t=s.parsedOptions.verticalSplitLineHighlight.lineWidth)!==null&&t!==void 0?t:2)+"px",a.style.height="100%",a.style.backgroundColor=s.parsedOptions.verticalSplitLineHighlight.lineColor,a.style.zIndex="100",a.style.cursor="col-resize",a.style.userSelect="none",a.style.pointerEvents="none",a.style.opacity="0",a.style.transition="background-color 0.3s"}}}function J(s,e,t,i="children"){var a;for(let n=0;n<s.length;n++){if(Array.isArray(t)&&t.length===1&&s[n][e]===t[0]||s[n][e]===t)return{record:s[n],index:[n]};if(!((a=s[n][i])===null||a===void 0)&&a.length){if(Array.isArray(t)&&t[0]===s[n][e]){const r=J(s[n][i],e,t.slice(1));if(r)return r.index.unshift(n),r}else if(!Array.isArray(t)){const r=J(s[n][i],e,t);if(r)return r.index.unshift(n),r}}}}function xt(s,e="children"){var t;for(let i=0;i<s.length;i++)!((t=s[i][e])===null||t===void 0)&&t.length?xt(s[i][e],e):(delete s[i].vtable_gantt_linkedTo,delete s[i].vtable_gantt_linkedFrom)}function Ct(s,e="children"){var t;for(let i=0;i<s.length;i++)!((t=s[i][e])===null||t===void 0)&&t.length?Ct(s[i][e],e):delete s[i].vtable_gantt_showIndex}function Ie(s,e){let t,i;if(e.taskListTableInstance){const a=e.taskListTableInstance.getTargetRowAt(s+e.headerHeight);if(a){const{row:n}=a;t=n-e.taskListTableInstance.columnHeaderLevelCount;const r=e.getRowsHeightByIndex(0,t-1);i=Math.floor((s-r)/e.parsedOptions.rowHeight)}}else t=Math.floor(s/e.parsedOptions.rowHeight);return{task_index:t,sub_task_index:i}}function Ot(s,e){var t;if(!e.children||e.children.length===1)return((t=e.children)===null||t===void 0?void 0:t.length)===1&&(e.children[0].vtable_gantt_showIndex=0),1;const i=e.children.slice().sort((n,r)=>{const{startDate:o}=je(s,n),{startDate:d}=je(s,r);return o.getTime()-d.getTime()}),a=[];for(let n=0;n<=i.length-1;n++){const r=i[n],{startDate:o,endDate:d}=je(s,r);let l=!1;for(let h=0;h<a.length;h++)if(o.getTime()>a[h]){a[h]=d.getTime(),l=!0,r.vtable_gantt_showIndex=h;break}l||(a.push(d.getTime()),r.vtable_gantt_showIndex=a.length-1)}return a.length}function Mi(s,e,t,i){return t.some(a=>{const{startDate:n,endDate:r}=je(i,a);return s<=r&&n<=e})}function Dt(s,e){var t;if(!e.children||e.children.length===1)return((t=e.children)===null||t===void 0?void 0:t.length)===1&&(e.children[0].vtable_gantt_showIndex=0),1;const i=[];for(let a=0;a<=e.children.length-1;a++){const n=e.children[a],{startDate:r,endDate:o}=je(s,n);let d=!1;for(let l=0;l<i.length;l++)if(!Mi(r,o,e.children.filter(h=>h!==n&&h.vtable_gantt_showIndex===l),s)){i[l]=o.getTime(),d=!0,n.vtable_gantt_showIndex=l;break}d||(i.push(o.getTime()),n.vtable_gantt_showIndex=i.length-1)}return i.length}function je(s,e){const{timeScaleIncludeHour:t,startDateField:i,endDateField:a}=s.parsedOptions,n=e[i],r=e[a];return t?{startDate:E(n),endDate:le(r)}:{startDate:E(n,!0),endDate:le(r,!0)}}class Ai{constructor(e){this._scene=e,this.initNodes()}initNodes(){var e,t,i,a,n,r,o,d,l;const{_scene:h}=this,p=new I({x:0,y:0,width:h._gantt.getAllDateColsWidth(),height:h._gantt.getAllHeaderRowsHeight(),clip:!0,pickable:!1});this.group=p,p.name="date-header-container",h.tableGroup.addChild(this.group);const{unit:u,step:c}=h._gantt.parsedOptions.reverseSortedTimelineScales[0];let g=0;for(let _=0;_<h._gantt.timeLineHeaderLevel;_++){const L=new I({x:0,y:g,width:h._gantt.getAllDateColsWidth(),height:h._gantt.parsedOptions.timeLineHeaderRowHeights[_],clip:!1});g+=L.attribute.height,L.name="row-header",p.addChild(L);const{timelineDates:m,customLayout:v}=h._gantt.parsedOptions.sortedTimelineScales[_];for(let b=0;b<(m==null?void 0:m.length);b++){const{days:B,endDate:k,startDate:T,title:f,dateIndex:w,unit:W}=m[b],C=Math.ceil(j(T,h._gantt.parsedOptions.minDate,u,c)*h._gantt.parsedOptions.timelineColWidth),O=Math.ceil(j(k,h._gantt.parsedOptions.minDate,u,c,1)*h._gantt.parsedOptions.timelineColWidth)-C,H=new I({x:C,y:0,width:O,height:L.attribute.height,clip:!1,fill:h._gantt.parsedOptions.timelineHeaderBackgroundColor});let z;H.name="date-header-cell";let R=!0;const P=L.attribute.height;if(v){let M;typeof v=="function"?M=v({width:O,height:P,index:b,startDate:T,endDate:k,days:B,dateIndex:w,title:f,ganttInstance:this._scene._gantt}):M=v,M&&(z=M.rootContainer,R=(e=M.renderDefaultText)!==null&&e!==void 0&&e,z.name="task-bar-custom-render"),z&&H.appendChild(z)}if(R){const{padding:M,textAlign:K,textBaseline:$,textOverflow:V,fontSize:U,fontWeight:te,color:ie,strokeColor:se,textStick:ae}=h._gantt.parsedOptions.timelineHeaderStyles[_],Z=Bt(Tt(M),K,$,O,P),q=new oe({x:Z.x,y:Z.y,maxLineWidth:O,heightLimit:P,pickable:!0,text:f.toLocaleString(),fontSize:U,fontWeight:te,fill:ie,stroke:se,lineWidth:2,textAlign:K,textBaseline:$,ellipsis:V==="clip"?"":V==="ellipsis"?"...":N(V)?V:void 0});q.attribute.textStick=ae,H.appendChild(q),q.name="date-header-cell-text"}if(L.addChild(H),b>0){const M=ee({pickable:!1,stroke:(t=h._gantt.parsedOptions.timelineHeaderVerticalLineStyle)===null||t===void 0?void 0:t.lineColor,lineWidth:(i=h._gantt.parsedOptions.timelineHeaderVerticalLineStyle)===null||i===void 0?void 0:i.lineWidth,points:[{x:1&((a=h._gantt.parsedOptions.timelineHeaderVerticalLineStyle)===null||a===void 0?void 0:a.lineWidth)?.5:0,y:0},{x:1&((n=h._gantt.parsedOptions.timelineHeaderVerticalLineStyle)===null||n===void 0?void 0:n.lineWidth)?.5:0,y:L.attribute.height}]});H.appendChild(M)}}if(_>0){const b=ee({pickable:!1,stroke:(r=h._gantt.parsedOptions.timelineHeaderHorizontalLineStyle)===null||r===void 0?void 0:r.lineColor,lineWidth:(o=h._gantt.parsedOptions.timelineHeaderHorizontalLineStyle)===null||o===void 0?void 0:o.lineWidth,points:[{x:0,y:1&((d=h._gantt.parsedOptions.timelineHeaderHorizontalLineStyle)===null||d===void 0?void 0:d.lineWidth)?.5:0},{x:h._gantt.getAllDateColsWidth(),y:1&((l=h._gantt.parsedOptions.timelineHeaderHorizontalLineStyle)===null||l===void 0?void 0:l.lineWidth)?.5:0}]});L.addChild(b)}}}setX(e){this.group.setAttribute("x",e)}setY(e){this.group.setAttribute("y",e)}resize(){var e,t,i,a;this.group.setAttribute("width",(t=(e=this.group.attribute)===null||e===void 0?void 0:e.width)!==null&&t!==void 0?t:0),this.group.setAttribute("height",(a=(i=this.group.attribute)===null||i===void 0?void 0:i.height)!==null&&a!==void 0?a:0)}refresh(){var e;(e=this.group)===null||e===void 0||e.parent.removeChild(this.group),this.initNodes()}}class zi extends I{constructor(e){super(e)}}const kt=`<svg width="100" height="200" xmlns="http://www.w3.org/2000/svg">
  <line x1="30" y1="10" x2="30" y2="190" stroke="black" stroke-width="4"/>
  <line x1="70" y1="10" x2="70" y2="190" stroke="black" stroke-width="4"/>
</svg>`,Ii=10;class Pi{constructor(e){this.selectedBorders=[],this._scene=e,this.width=e._gantt.tableNoFrameWidth,this.height=e._gantt.gridHeight,this.group=new I({x:0,y:e._gantt.getAllHeaderRowsHeight(),width:this.width,height:this.height,pickable:!1,clip:!0}),this.group.name="task-bar-container",e.tableGroup.addChild(this.group),this.initBars(),this.initHoverBarIcons()}initBars(){var e;this.barContainer=new I({x:0,y:0,width:this._scene._gantt.getAllDateColsWidth(),height:this._scene._gantt.getAllTaskBarsHeight(),pickable:!1,clip:!0}),this.group.appendChild(this.barContainer);for(let t=0;t<this._scene._gantt.itemCount;t++)if(this._scene._gantt.parsedOptions.tasksShowMode!==S.Sub_Tasks_Inline&&this._scene._gantt.parsedOptions.tasksShowMode!==S.Sub_Tasks_Separate&&this._scene._gantt.parsedOptions.tasksShowMode!==S.Sub_Tasks_Arrange&&this._scene._gantt.parsedOptions.tasksShowMode!==S.Sub_Tasks_Compact){const i=this.initBar(t);i&&this.barContainer.appendChild(i)}else{const i=this._scene._gantt.getRecordByIndex(t);if(((e=i.children)===null||e===void 0?void 0:e.length)>0)for(let a=0;a<i.children.length;a++){const n=this.initBar(t,a,i.children.length);n&&this.barContainer.appendChild(n)}}}initBar(e,t,i){var a,n;const r=this._scene._gantt.parsedOptions.taskBarCustomLayout,{startDate:o,endDate:d,taskDays:l,progress:h,taskRecord:p}=this._scene._gantt.getTaskInfoByTaskListIndex(e,t);if(l<=0||!o||!d||o.getTime()>d.getTime())return null;const{unit:u,step:c}=this._scene._gantt.parsedOptions.reverseSortedTimelineScales[0],g=j(d,o,u,c,1)*this._scene._gantt.parsedOptions.timelineColWidth,_=this._scene._gantt.parsedOptions.taskBarStyle.width,L=(E(this._scene._gantt.parsedOptions.minDate),this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Separate?i:this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange?Dt(this._scene._gantt,this._scene._gantt.records[e]):this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact?Ot(this._scene._gantt,this._scene._gantt.records[e]):1),m=this._scene._gantt.getRowHeightByIndex(e)/L,v=j(o,this._scene._gantt.parsedOptions.minDate,u,c)*this._scene._gantt.parsedOptions.timelineColWidth,b=new zi({x:v,y:this._scene._gantt.getRowsHeightByIndex(0,e-1)+(this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Separate?t*m:this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact?p.vtable_gantt_showIndex*m:0)+(m-_)/2,width:g,height:_,cornerRadius:this._scene._gantt.parsedOptions.taskBarStyle.cornerRadius,lineWidth:2*this._scene._gantt.parsedOptions.taskBarStyle.borderWidth,stroke:this._scene._gantt.parsedOptions.taskBarStyle.borderColor});b.name="task-bar",b.task_index=e,b.sub_task_index=t,b.record=p;const B=new I({x:0,y:0,width:g,height:_,cornerRadius:this._scene._gantt.parsedOptions.taskBarStyle.cornerRadius,clip:!0});let k;B.name="task-bar-group",b.appendChild(B),b.clipGroupBox=B;let T=!0,f=!0;if(r){let w;typeof r=="function"?w=r({width:g,height:_,index:e,startDate:o,endDate:d,taskDays:l,progress:h,taskRecord:p,ganttInstance:this._scene._gantt}):w=r,w&&(k=w.rootContainer,T=(a=w.renderDefaultBar)!==null&&a!==void 0&&a,f=(n=w.renderDefaultText)!==null&&n!==void 0&&n,k.name="task-bar-custom-render")}if(T){const w=pt({x:0,y:0,width:g,height:_,fill:this._scene._gantt.parsedOptions.taskBarStyle.barColor,pickable:!1});w.name="task-bar-rect",B.appendChild(w),b.barRect=w;const W=pt({x:0,y:0,width:g*h/100,height:_,fill:this._scene._gantt.parsedOptions.taskBarStyle.completedBarColor,pickable:!1});W.name="task-bar-progress-rect",B.appendChild(W),b.progressRect=W}if(k&&B.appendChild(k),f){const{textAlign:w,textBaseline:W,fontSize:C,fontFamily:O,textOverflow:H,color:z,padding:R}=this._scene._gantt.parsedOptions.taskBarLabelStyle,P=Bt(Tt(R),w,W,g,_),M=Pt({x:P.x,y:P.y,fontSize:C,fill:z,fontFamily:O,text:di(this._scene._gantt.parsedOptions.taskBarLabelText,p),maxLineWidth:g-10,textBaseline:W,textAlign:w,ellipsis:H==="clip"?"":H==="ellipsis"?"...":N(H)?H:void 0,poptip:{position:"bottom",dx:(g-10)/4}});B.appendChild(M),b.textLabel=M}return b}updateTaskBarNode(e){const t=this.getTaskBarNodeByIndex(e);t&&this.barContainer.removeChild(t);const i=this.initBar(e);i&&this.barContainer.insertInto(i,e)}initHoverBarIcons(){var e,t;const i=new I({x:0,y:0,width:100,height:100,clip:!0,cursor:this._scene._gantt.parsedOptions.taskBarMoveable?"grab":"default",pickable:!1,cornerRadius:(t=(e=this._scene._gantt.parsedOptions.taskBarHoverStyle.cornerRadius)!==null&&e!==void 0?e:this._scene._gantt.parsedOptions.taskBarStyle.cornerRadius)!==null&&t!==void 0?t:0,fill:this._scene._gantt.parsedOptions.taskBarHoverStyle.barOverlayColor,visibleAll:!1});if(this.hoverBarGroup=i,i.name="task-bar-hover-shadow",this._scene._gantt.parsedOptions.taskBarResizable){const a=new Ye({x:0,y:0,width:10,height:20,image:kt,pickable:!0,cursor:"col-resize"});a.name="task-bar-hover-shadow-left-icon",this.hoverBarLeftIcon=a,i.appendChild(a);const n=new Ye({x:0,y:0,width:10,height:20,image:kt,pickable:!0,cursor:"col-resize"});n.name="task-bar-hover-shadow-right-icon",this.hoverBarRightIcon=n,i.appendChild(n)}}setX(e){this.barContainer.setAttribute("x",e)}setY(e){this.barContainer.setAttribute("y",e)}refresh(){this.width=this._scene._gantt.tableNoFrameWidth,this.height=this._scene._gantt.gridHeight,this.group.setAttributes({height:this.height,width:this.width,y:this._scene._gantt.getAllHeaderRowsHeight()}),this.barContainer.removeAllChild(),this.group.removeChild(this.barContainer),this.initBars()}resize(){this.width=this._scene._gantt.tableNoFrameWidth,this.height=this._scene._gantt.gridHeight,this.group.setAttribute("width",this.width),this.group.setAttribute("height",this.height)}showHoverBar(e,t,i,a,n){n&&n.name==="task-bar"&&n.appendChild(this.hoverBarGroup),this.hoverBarGroup.setAttribute("x",0),this.hoverBarGroup.setAttribute("y",0),this.hoverBarGroup.setAttribute("width",i),this.hoverBarGroup.setAttribute("height",a),this.hoverBarGroup.setAttribute("visibleAll",!0),this.hoverBarLeftIcon&&(this.hoverBarLeftIcon.setAttribute("x",0),this.hoverBarLeftIcon.setAttribute("y",Math.ceil(a/10)),this.hoverBarLeftIcon.setAttribute("width",10),this.hoverBarLeftIcon.setAttribute("height",a-2*Math.ceil(a/10)),this.hoverBarRightIcon.setAttribute("x",i-10),this.hoverBarRightIcon.setAttribute("y",Math.ceil(a/10)),this.hoverBarRightIcon.setAttribute("width",10),this.hoverBarRightIcon.setAttribute("height",a-2*Math.ceil(a/10)))}hideHoverBar(){this.hoverBarGroup.setAttribute("visibleAll",!1)}createSelectedBorder(e,t,i,a,n,r=!1){var o;const d=new I({x:e,y:t,width:i,height:a,lineWidth:this._scene._gantt.parsedOptions.taskBarSelectedStyle.borderLineWidth,pickable:!1,cornerRadius:(o=this._scene._gantt.parsedOptions.taskBarStyle.cornerRadius)!==null&&o!==void 0?o:0,fill:!1,stroke:this._scene._gantt.parsedOptions.taskBarSelectedStyle.borderColor,shadowColor:this._scene._gantt.parsedOptions.taskBarSelectedStyle.shadowColor,shadowOffsetX:this._scene._gantt.parsedOptions.taskBarSelectedStyle.shadowOffsetX,shadowOffsetY:this._scene._gantt.parsedOptions.taskBarSelectedStyle.shadowOffsetY,shadowBlur:this._scene._gantt.parsedOptions.taskBarSelectedStyle.shadowBlur,attachedToTaskBarNode:n,zIndex:1e4});if(d.name="task-bar-select-border",this.barContainer.appendChild(d),this.selectedBorders.push(d),r){const l=new I({x:-10,y:0,width:10,height:a,pickable:!0}),h=new vt({x:5,y:a/2,radius:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.radius,fill:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.fillColor,stroke:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeColor,lineWidth:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeWidth,pickable:!1});l.appendChild(h),l.name="task-bar-link-point-left",d.appendChild(l);const p=new I({x:i,y:0,width:10,height:a,pickable:!0}),u=new vt({x:5,y:a/2,radius:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.radius,fill:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.fillColor,stroke:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeColor,lineWidth:this._scene._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeWidth,pickable:!1,pickStrokeBuffer:10});p.appendChild(u),p.name="task-bar-link-point-right",d.appendChild(p)}}removeSelectedBorder(){this.selectedBorders.forEach(e=>{e.delete()}),this.selectedBorders=[]}removeSecondSelectedBorder(){this.selectedBorders.length===2&&this.selectedBorders.pop().delete()}updateCreatingDependencyLine(e,t,i,a){this.creatingDependencyLine&&(this.creatingDependencyLine.delete(),this.creatingDependencyLine=void 0);const n=new Ft({points:[{x:e,y:t},{x:i,y:a}],stroke:this._scene._gantt.parsedOptions.dependencyLinkLineCreatingStyle.lineColor,lineWidth:this._scene._gantt.parsedOptions.dependencyLinkLineCreatingStyle.lineWidth,lineDash:this._scene._gantt.parsedOptions.dependencyLinkLineCreatingStyle.lineDash,pickable:!1});this.creatingDependencyLine=n,this.selectedBorders[0].appendChild(n)}getTaskBarNodeByIndex(e,t){let i=this.barContainer.firstChild;if(!i)return null;for(let a=0;a<this.barContainer.childrenCount;a++){if(i.task_index===e&&(!N(t)||N(t)&&i.sub_task_index===t))return i;i=i._next}return null}}class Fi{constructor(e){this.markLineContainerWidth=20,this._scene=e,this.markLine=e._gantt.parsedOptions.markLine,this.height=Math.min(e._gantt.tableNoFrameHeight,e._gantt.drawHeight)-e._gantt.getAllHeaderRowsHeight(),this.group=new I({x:0,y:e._gantt.getAllHeaderRowsHeight(),width:e._gantt.tableNoFrameWidth,height:this.height,pickable:!1,clip:!0}),this.group.name="mark-line-container",e.tableGroup.addChild(this.group),this.markLIneContainer=new I({x:0,y:0,width:this._scene._gantt.getAllDateColsWidth(),height:this.height,pickable:!1,clip:!0}),this.group.appendChild(this.markLIneContainer),this.initMarkLines()}initMarkLines(){this.markLine.forEach(e=>{const t=e.style,i=this._scene._gantt.parsedOptions.timeScaleIncludeHour?E(e.date):E(e.date,!0),a=this._scene._gantt.parsedOptions.minDate,{unit:n,step:r}=this._scene._gantt.parsedOptions.reverseSortedTimelineScales[0],o=j(i,a,n,r),d=this._scene._gantt.parsedOptions.timelineColWidth*(Math.floor(o)+(e.position==="right"?1:e.position==="middle"?.5:0)),l=new I({pickable:!1,x:d-this.markLineContainerWidth/2,y:0,width:this.markLineContainerWidth,height:this.height});l.name="mark-line",this.markLIneContainer.appendChild(l);const h=ee({pickable:!1,stroke:t.lineColor,lineWidth:t.lineWidth,lineDash:t.lineDash,points:[{x:this.markLineContainerWidth/2,y:0},{x:this.markLineContainerWidth/2,y:this.height}]});l.appendChild(h)})}refresh(){this.height=Math.min(this._scene._gantt.tableNoFrameHeight,this._scene._gantt.drawHeight)-this._scene._gantt.getAllHeaderRowsHeight(),this.markLIneContainer.removeAllChild(),this.group.setAttribute("height",this.height),this.markLIneContainer.setAttribute("height",this.height),this.initMarkLines()}setX(e){this.markLIneContainer.setAttribute("x",e)}}class Ei{constructor(e){this._scene=e,this.createFrameBorder()}createFrameBorder(){var e,t,i,a,n,r;const o=this._scene.tableGroup,d=this._scene._gantt.parsedOptions.outerFrameStyle;if(!d)return;const{cornerRadius:l,borderColor:h,borderLineWidth:p,borderLineDash:u}=d,c={},g={pickable:!1};if(p&&(g.stroke=!0,g.fill=!1,g.stroke=h,g.lineWidth=p,u&&(g.lineDash=u),g.lineCap="butt"),l&&(this._scene._gantt.taskListTableInstance?(g.cornerRadius=[0,(e=this._scene._gantt.parsedOptions.outerFrameStyle.cornerRadius)!==null&&e!==void 0?e:0,(t=this._scene._gantt.parsedOptions.outerFrameStyle.cornerRadius)!==null&&t!==void 0?t:0,0],c.cornerRadius=[0,(i=this._scene._gantt.parsedOptions.outerFrameStyle.cornerRadius)!==null&&i!==void 0?i:0,(a=this._scene._gantt.parsedOptions.outerFrameStyle.cornerRadius)!==null&&a!==void 0?a:0,0]):(g.cornerRadius=(n=this._scene._gantt.parsedOptions.outerFrameStyle.cornerRadius)!==null&&n!==void 0?n:0,c.cornerRadius=(r=this._scene._gantt.parsedOptions.outerFrameStyle.cornerRadius)!==null&&r!==void 0?r:0)),o.setAttributes(c),g.stroke){g.x=this._scene._gantt.taskListTableInstance?-p/2:p/2,g.y=p/2,g.pickable=!1,g.width=o.attribute.width+p+(this._scene._gantt.taskListTableInstance?this._scene._gantt.parsedOptions.verticalSplitLine.lineWidth:0),g.height=o.attribute.height+p/2+p/2;const _=pt(g);_.name="border-rect",o.parent.insertAfter(_,o),o.border=_,this.border=_}}resize(){var e;const{cornerRadius:t,borderColor:i,borderLineWidth:a,borderLineDash:n}=this._scene._gantt.parsedOptions.outerFrameStyle;(e=this.border)===null||e===void 0||e.setAttributes({width:this._scene.tableGroup.attribute.width+a+(this._scene._gantt.taskListTableInstance?this._scene._gantt.parsedOptions.verticalSplitLine.lineWidth:0),height:this._scene._gantt.drawHeight+a})}}var Ri=function(s,e,t,i){var a,n=arguments.length,r=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,e,t,i);else for(var o=s.length-1;o>=0;o--)(a=s[o])&&(r=(n<3?a(r):n>3?a(e,t,r):a(e,t))||r);return n>3&&r&&Object.defineProperty(e,t,r),r};let $e=class{constructor(){this.time=Rt.beforeFillStroke,this.useStyle=!0,this.order=0,this.supportedAppName="vtable"}drawShape(s,e,t,i,a,n,r,o,d,l,h,p,u){s.name==="date-header-cell"&&s.forEachChildren(c=>{var g;if(c.name==="date-header-cell-text"&&c.attribute.textStick===!0){const _=c;_.setAttribute("dx",0);const L=_.globalAABBBounds,m=_.stage.globalAABBBounds,v=_.parent.globalAABBBounds,b=m.intersect(v);m.intersect(v)&&(L.width()>=b.width()&&_.attribute.last_dx?_.setAttribute("dx",(g=_.attribute.last_dx)!==null&&g!==void 0?g:0):m.x1>=L.x1?(_.setAttribute("dx",m.x1-L.x1),_.setAttribute("last_dx",m.x1-L.x1)):m.x2<=L.x2&&(_.setAttribute("dx",m.x2-L.x2),_.setAttribute("last_dx",m.x1-L.x1)))}})}};$e=Ri([Et()],$e);const Ni=new Nt((s,e,t,i)=>{s($e).toSelf().inSingletonScope(),s(jt).toService($e)});class ji{constructor(e){this._scene=e,this.createAddButton()}createAddButton(){var e;this._scene._gantt.parsedOptions.taskBarCreationCustomLayout?this.group=new I({x:0,y:0,width:100,height:100}):(this.group=new I({x:0,y:0,width:100,height:100,lineDash:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineDash,cursor:"pointer",lineWidth:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineWidth,stroke:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineColor,cornerRadius:(e=this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.cornerRadius)!==null&&e!==void 0?e:0,fill:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.backgroundColor}),this.lineVertical=ee({pickable:!1,stroke:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineColor,lineWidth:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineWidth,points:[{x:50,y:0},{x:50,y:100}]}),this.group.appendChild(this.lineVertical),this.lineHorizontal=ee({pickable:!1,stroke:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineColor,lineWidth:this._scene._gantt.parsedOptions.taskBarCreationButtonStyle.lineWidth,points:[{x:0,y:50},{x:100,y:50}]}),this.group.appendChild(this.lineHorizontal)),this.group.name="task-creation-button",this._scene.taskBar.group.addChild(this.group)}show(e,t,i,a){if(this._scene._gantt.parsedOptions.taskBarCreationCustomLayout)this.group.appendChild(this._scene._gantt.parsedOptions.taskBarCreationCustomLayout({width:i,height:a,ganttInstance:this._scene._gantt}).rootContainer);else{const n=Math.min(i,a)/6;this.lineHorizontal.setAttribute("points",[{x:(i-4*n)/2,y:a/2},{x:(i-4*n)/2+4*n,y:a/2}]),this.lineVertical.setAttribute("points",[{x:i/2,y:(a-4*n)/2},{x:i/2,y:(a-4*n)/2+4*n}])}this.group.setAttribute("x",e),this.group.setAttribute("y",t),this.group.setAttribute("width",i),this.group.setAttribute("height",a),this.group.setAttribute("visibleAll",!0)}hide(){this.group.setAttribute("visibleAll",!1),this._scene._gantt.parsedOptions.taskBarCreationCustomLayout&&this.group.removeAllChild()}}class Gi{constructor(e){this._scene=e,this.width=e._gantt.tableNoFrameWidth,this.height=e._gantt.gridHeight,this.group=new I({x:0,y:e._gantt.getAllHeaderRowsHeight(),width:this.width,height:this.height,pickable:!1,clip:!0}),this.group.name="dependency-link-container",e.tableGroup.addChild(this.group),this.initLinkLines()}initLinkLines(){var e,t,i;if(xt(this._scene._gantt.records),this.linkLinesContainer=new I({x:0,y:0,width:this._scene._gantt.getAllDateColsWidth(),height:this._scene._gantt.getAllTaskBarsHeight(),pickable:!1,clip:!0}),this.group.appendChild(this.linkLinesContainer),(e=this._scene._gantt.records)===null||e===void 0?void 0:e.length)for(let a=0;(i=a<((t=this._scene._gantt.parsedOptions.dependencyLinks)===null||t===void 0?void 0:t.length))!==null&&i!==void 0&&i;a++)this.initLinkLine(a)}initLinkLine(e){const{taskKeyField:t,dependencyLinks:i}=this._scene._gantt.parsedOptions,a=i[e],{linkedToTaskKey:n,linkedFromTaskKey:r,type:o}=a,d=J(this._scene._gantt.records,t,n),l=J(this._scene._gantt.records,t,r);if(!d||!l)return;let h,p,u,c,g,_,L,m;if(d.record.vtable_gantt_linkedTo||(d.record.vtable_gantt_linkedTo=[]),d.record.vtable_gantt_linkedTo.push(a),l.record.vtable_gantt_linkedFrom||(l.record.vtable_gantt_linkedFrom=[]),l.record.vtable_gantt_linkedFrom.push(a),this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Inline?(m=l.index[0],L=d.index[0],{startDate:h,endDate:p,taskDays:u}=this._scene._gantt.getTaskInfoByTaskListIndex(d.index[0],d.index[1]),{startDate:c,endDate:g,taskDays:_}=this._scene._gantt.getTaskInfoByTaskListIndex(l.index[0],l.index[1])):this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Separate||this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact?(m=this._scene._gantt.getRowsHeightByIndex(0,l.index[0]-1)/this._scene._gantt.parsedOptions.rowHeight+(this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact?l.record.vtable_gantt_showIndex:l.index[1]),L=this._scene._gantt.getRowsHeightByIndex(0,d.index[0]-1)/this._scene._gantt.parsedOptions.rowHeight+(this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||this._scene._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact?d.record.vtable_gantt_showIndex:d.index[1]),{startDate:h,endDate:p,taskDays:u}=this._scene._gantt.getTaskInfoByTaskListIndex(d.index[0],d.index[1]),{startDate:c,endDate:g,taskDays:_}=this._scene._gantt.getTaskInfoByTaskListIndex(l.index[0],l.index[1])):(m=this._scene._gantt.getTaskShowIndexByRecordIndex(l.index),L=this._scene._gantt.getTaskShowIndexByRecordIndex(d.index),{startDate:h,endDate:p,taskDays:u}=this._scene._gantt.getTaskInfoByTaskListIndex(L),{startDate:c,endDate:g,taskDays:_}=this._scene._gantt.getTaskInfoByTaskListIndex(m)),!_||!u)return;E(this._scene._gantt.parsedOptions.minDate);const{arrowPoints:v,linePoints:b}=Xi(o,c,g,m,_,h,p,L,u,this._scene._gantt),B=this._scene._gantt.parsedOptions.dependencyLinkLineStyle,k=ee({pickable:!0,stroke:B.lineColor,lineWidth:B.lineWidth,lineDash:B.lineDash,points:b,pickStrokeBuffer:3,vtable_link:a});this.linkLinesContainer.appendChild(k),a.vtable_gantt_linkLineNode=k;const T=new Gt({fill:B.lineColor,points:v});this.linkLinesContainer.appendChild(T),a.vtable_gantt_linkArrowNode=T}setX(e){this.linkLinesContainer.setAttribute("x",e)}setY(e){this.linkLinesContainer.setAttribute("y",e)}refresh(){this.width=this._scene._gantt.tableNoFrameWidth,this.height=this._scene._gantt.gridHeight,this.group.setAttributes({height:this.height,width:this.width,y:this._scene._gantt.getAllHeaderRowsHeight()}),this.linkLinesContainer.removeAllChild(),this.group.removeChild(this.linkLinesContainer),this.initLinkLines()}resize(){this.width=this._scene._gantt.tableNoFrameWidth,this.height=this._scene._gantt.gridHeight,this.group.setAttribute("width",this.width),this.group.setAttribute("height",this.height)}createSelectedLinkLine(e){const t=e.vtable_gantt_linkLineNode,i=e.vtable_gantt_linkArrowNode,a=t.clone(),n=i.clone();a.setAttribute("stroke",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.lineColor),a.setAttribute("lineWidth",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.lineWidth),a.setAttribute("shadowColor",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.shadowColor),a.setAttribute("shadowOffsetX",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.shadowOffset),a.setAttribute("shadowOffsetY",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.shadowOffset),a.setAttribute("shadowBlur",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.shadowBlur),this.linkLinesContainer.appendChild(a),n.setAttribute("fill",this._scene._gantt.parsedOptions.dependencyLinkSelectedLineStyle.lineColor),this.linkLinesContainer.appendChild(n),this.selectedEffectNodes=[a,n]}removeSelectedLinkLine(){var e;(e=this.selectedEffectNodes)===null||e===void 0||e.forEach(t=>{t.delete()}),this.selectedEffectNodes=[]}deleteLink(e){const t=e.vtable_gantt_linkLineNode,i=e.vtable_gantt_linkArrowNode;t.delete(),i.delete()}}function Xi(s,e,t,i,a,n,r,o,d,l){const{unit:h,step:p}=l.parsedOptions.reverseSortedTimelineScales[0],{minDate:u,rowHeight:c,timelineColWidth:g}=l.parsedOptions;let _=[],L=[];if(s===X.FinishToStart){const m=j(t,u,h,p,1)*g,v=j(n,u,h,p)*g;_=[{x:m,y:c*(i+.5)},{x:m+20,y:c*(i+.5)},{x:m+20,y:c*(i+(i>o?0:1))},{x:v-20,y:c*(i+(i>o?0:1))},{x:v-20,y:c*(o+.5)},{x:v,y:c*(o+.5)}],m+20<=v-20&&_.splice(2,3,{x:m+20,y:c*(o+.5)});const b=_[_.length-1];L=[{x:b.x,y:b.y},{x:b.x-10,y:b.y-5},{x:b.x-10,y:b.y+5},{x:b.x,y:b.y}]}else if(s===X.StartToFinish){const m=j(e,u,h,p)*g,v=j(r,u,h,p,1)*g;_=[{x:m,y:c*(i+.5)},{x:m-20,y:c*(i+.5)},{x:m-20,y:c*(i+(i>o?0:1))},{x:v+20,y:c*(i+(i>o?0:1))},{x:v+20,y:c*(o+.5)},{x:v,y:c*(o+.5)}],m-20>=v+20&&_.splice(2,3,{x:m-20,y:c*(o+.5)});const b=_[_.length-1];L=[{x:b.x,y:b.y},{x:b.x+10,y:b.y-5},{x:b.x+10,y:b.y+5},{x:b.x,y:b.y}]}else if(s===X.StartToStart){const m=j(e,u,h,p)*g,v=j(n,u,h,p)*g;_=[{x:m,y:c*(i+.5)},{x:(i===o?m:Math.min(m,v))-20,y:c*(i+.5)},{x:(i===o?m:Math.min(m,v))-20,y:c*(o+(i===o?1:.5))},{x:v-20,y:c*(o+(i===o?1:.5))},{x:(i===o?v:Math.min(m,v))-20,y:c*(o+.5)},{x:v,y:c*(o+.5)}];const b=_[_.length-1];L=[{x:b.x,y:b.y},{x:b.x-10,y:b.y-5},{x:b.x-10,y:b.y+5},{x:b.x,y:b.y}]}else if(s===X.FinishToFinish){const m=j(t,u,h,p,1)*g,v=j(r,u,h,p,1)*g;_=[{x:m,y:c*(i+.5)},{x:(i===o?m:Math.max(m,v))+20,y:c*(i+.5)},{x:(i===o?m:Math.max(m,v))+20,y:c*(o+(i===o?1:.5))},{x:v+20,y:c*(o+(i===o?1:.5))},{x:v+20,y:c*(o+.5)},{x:v,y:c*(o+.5)}];const b=_[_.length-1];L=[{x:b.x,y:b.y},{x:b.x+10,y:b.y-5},{x:b.x+10,y:b.y+5},{x:b.x,y:b.y}]}return{linePoints:_,arrowPoints:L}}function ft(s,e,t,i,a,n,r,o,d,l,h,p,u,c){const{unit:g,step:_}=c.parsedOptions.reverseSortedTimelineScales[0],{minDate:L,rowHeight:m,timelineColWidth:v}=c.parsedOptions;let b=[],B=[];if(s===X.FinishToStart){const k=n?n.attribute.x+n.attribute.width:j(t,L,g,_,1)*v,T=p?p.attribute.x:j(o,L,g,_)*v;b=[{x:k,y:m*(i+.5)+r},{x:k+20,y:m*(i+.5)+r},{x:k+20,y:m*(i+(i>l?0:1))+r},{x:T-20,y:m*(i+(i>l?0:1))+r},{x:T-20,y:m*(l+.5)+u},{x:T,y:m*(l+.5)+u}],k+20<=T-20&&b.splice(2,3,{x:k+20,y:m*(l+.5)+u});const f=b[b.length-1];B=[{x:f.x,y:f.y},{x:f.x-10,y:f.y-5},{x:f.x-10,y:f.y+5},{x:f.x,y:f.y}]}else if(s===X.StartToFinish){const k=n?n.attribute.x:j(e,L,g,_)*v,T=p?p.attribute.x+p.attribute.width:j(d,L,g,_,1)*v;b=[{x:k,y:m*(i+.5)+r},{x:k-20,y:m*(i+.5)+r},{x:k-20,y:m*(i+(i>l?0:1))+r},{x:T+20,y:m*(i+(i>l?0:1))+r},{x:T+20,y:m*(l+.5)+u},{x:T,y:m*(l+.5)+u}],k-20>=T+20&&b.splice(2,3,{x:k-20,y:m*(l+.5)+u});const f=b[b.length-1];B=[{x:f.x,y:f.y},{x:f.x+10,y:f.y-5},{x:f.x+10,y:f.y+5},{x:f.x,y:f.y}]}else if(s===X.StartToStart){const k=n?n.attribute.x:j(e,L,g,_)*v,T=p?p.attribute.x:j(o,L,g,_)*v;b=[{x:k,y:m*(i+.5)+r},{x:(i===l?k:Math.min(k,T))-20,y:m*(i+.5)+r},{x:(i===l?k:Math.min(k,T))-20,y:m*(l+(i===l?1:.5))+u},{x:T-20,y:m*(l+(i===l?1:.5))+u},{x:(i===l?T:Math.min(k,T))-20,y:m*(l+.5)+u},{x:T,y:m*(l+.5)+u}];const f=b[b.length-1];B=[{x:f.x,y:f.y},{x:f.x-10,y:f.y-5},{x:f.x-10,y:f.y+5},{x:f.x,y:f.y}]}else if(s===X.FinishToFinish){const k=n?n.attribute.x+n.attribute.width:j(t,L,g,_,1)*v,T=p?p.attribute.x+p.attribute.width:j(d,L,g,_,1)*v;b=[{x:k,y:m*(i+.5)+r},{x:(i===l?k:Math.max(k,T))+20,y:m*(i+.5)+r},{x:(i===l?k:Math.max(k,T))+20,y:m*(l+(i===l?1:.5))+u},{x:T+20,y:m*(l+(i===l?1:.5))+u},{x:T+20,y:m*(l+.5)+u},{x:T,y:m*(l+.5)+u}];const f=b[b.length-1];B=[{x:f.x,y:f.y},{x:f.x+10,y:f.y-5},{x:f.x+10,y:f.y+5},{x:f.x,y:f.y}]}return{linePoints:b,arrowPoints:B}}class Yi{constructor(e){this._scene=e,this.dragLineContainer=new I({x:0,y:0,width:e._gantt.tableNoFrameWidth,height:Math.min(e._gantt.tableNoFrameHeight,e._gantt.drawHeight),pickable:!1,clip:!0,visible:!1}),this.dragLineContainer.name="drag-order-line-container",e.tableGroup.addChild(this.dragLineContainer),this.initDragLine()}initDragLine(){if(this._scene._gantt.taskListTableInstance){const e=this._scene._gantt.taskListTableInstance.theme.dragHeaderSplitLine,t=ee({pickable:!1,stroke:e.lineColor,lineWidth:e.lineWidth,points:[]});this.dragLine=t,this.dragLineContainer.appendChild(t)}}showDragLine(e){this.dragLineContainer.showAll(),this.dragLine.setAttribute("points",[{x:0,y:e},{x:this._scene._gantt.tableNoFrameWidth,y:e}])}hideDragLine(){this.dragLineContainer.hideAll()}}Xt.load(Ni);class Vi{constructor(e){let t,i;this._gantt=e,this.tableGroupWidth=e.tableNoFrameWidth,this.tableGroupHeight=Math.min(e.tableNoFrameHeight,e.drawHeight),F.mode==="node"||(Xe.setEnv("browser"),t=e.canvas.width,i=e.canvas.height),this.stage=Yt({canvas:e.canvas,width:t,height:i,disableDirtyBounds:!1,background:e.parsedOptions.underlayBackgroundColor,enableLayout:!0,autoRender:!1,context:{appName:"vtable"},pluginList:["poptipForText"]}),this.stage.gantt=this._gantt,this.stage.table=this._gantt,this.stage.defaultLayer.setTheme({group:{boundsPadding:0,strokeBoundsBuffer:0,lineJoin:"round"},text:{ignoreBuf:!0}}),this.initSceneGraph()}initSceneGraph(){this.tableGroup=new I({x:this._gantt.tableX,y:this._gantt.tableY,width:this.tableGroupWidth,height:this.tableGroupHeight,clip:!0,pickable:!1}),this.stage.defaultLayer.add(this.tableGroup),this.tableGroup.name="table",this.timelineHeader=new Ai(this),this.grid=new si(this),this.dependencyLink=new Gi(this),this.taskBar=new Pi(this),this.markLine=new Fi(this),this.frameBorder=new Ei(this),this.scrollbarComponent=new ni(this._gantt),this.stage.defaultLayer.addChild(this.scrollbarComponent.hScrollBar),this.stage.defaultLayer.addChild(this.scrollbarComponent.vScrollBar),this.dragOrderLine=new Yi(this)}afterCreateSceneGraph(){this.scrollbarComponent.updateScrollBar(),Li(this._gantt.eventManager)}refreshAll(){this.tableGroupHeight=Math.min(this._gantt.tableNoFrameHeight,this._gantt.drawHeight),this.tableGroupWidth=this._gantt.tableNoFrameWidth,this.tableGroup.setAttribute("height",this.tableGroupHeight),this.tableGroup.setAttribute("width",this.tableGroupWidth),this.timelineHeader.refresh(),this.grid.refresh(),this.taskBar.refresh(),this.dependencyLink.refresh(),this.markLine.refresh(),this.dependencyLink.refresh(),this.frameBorder.resize(),this.scrollbarComponent.updateScrollBar(),this.updateNextFrame()}refreshTaskBars(){this.dependencyLink.refresh(),this.taskBar.refresh(),this.updateNextFrame()}refreshTaskBarsAndGrid(){this._gantt.verticalSplitResizeLine.style.height=this._gantt.drawHeight+"px",this.tableGroupHeight=Math.min(this._gantt.tableNoFrameHeight,this._gantt.drawHeight),this.tableGroup.setAttribute("height",this.tableGroupHeight),this.grid.refresh(),this.taskBar.refresh(),this.dependencyLink.refresh(),this.markLine.refresh(),this.frameBorder.resize(),this.scrollbarComponent.updateScrollBar(),this.updateNextFrame()}updateTableSize(){this.tableGroupHeight=Math.min(this._gantt.tableNoFrameHeight,this._gantt.drawHeight),this.tableGroupWidth=this._gantt.tableNoFrameWidth,this.tableGroup.setAttributes({x:this._gantt.tableX,y:this._gantt.tableY,width:this._gantt.tableNoFrameWidth,height:this.tableGroupHeight}),this.grid.resize(),this.taskBar.resize(),this.markLine.refresh(),this.frameBorder.resize()}renderSceneGraph(){this.stage.render()}updateNextFrame(){this.stage.renderNextFrame()}get width(){var e,t;return(t=(e=this.tableGroup.attribute)===null||e===void 0?void 0:e.width)!==null&&t!==void 0?t:0}get height(){var e,t;return(t=(e=this.tableGroup.attribute)===null||e===void 0?void 0:e.height)!==null&&t!==void 0?t:0}get x(){var e,t;return(t=(e=this.tableGroup.attribute)===null||e===void 0?void 0:e.x)!==null&&t!==void 0?t:0}get y(){var e,t;return(t=(e=this.tableGroup.attribute)===null||e===void 0?void 0:e.y)!==null&&t!==void 0?t:0}setX(e,t=!1){this.timelineHeader.setX(e),this.grid.setX(e),this.taskBar.setX(e),this.dependencyLink.setX(e),this.markLine.setX(e),this.updateNextFrame()}setY(e,t=!1){this.grid.setY(e),this.taskBar.setY(e),this.dependencyLink.setY(e),this.updateNextFrame()}setPixelRatio(e){this.stage.disableDirtyBounds(),this.stage.window.setDpr(e),this.stage.render(),this.stage.enableDirtyBounds()}resize(){this.updateTableSize(),this.scrollbarComponent.updateScrollBar(),this.updateNextFrame()}release(){this.stage.release()}showTaskCreationButton(e,t,i){this.taskCreationButton||(this.taskCreationButton=new ji(this._gantt.scenegraph)),this.taskCreationButton.show(e,t,this._gantt.getDateColWidth(i),this._gantt.parsedOptions.rowHeight),this.updateNextFrame()}hideTaskCreationButton(){this.taskCreationButton&&(this.taskCreationButton.hide(),this.updateNextFrame())}refreshRecordLinkNodes(e,t,i,a=0){const n=this._gantt,r=n.getRecordByIndex(e,t),o=r.vtable_gantt_linkedTo,d=r.vtable_gantt_linkedFrom;for(let l=0;l<(o==null?void 0:o.length);l++){const h=o[l],p=h.vtable_gantt_linkLineNode,u=h.vtable_gantt_linkArrowNode,{linkedToTaskKey:c,linkedFromTaskKey:g,type:_}=h,{taskKeyField:L,minDate:m}=n.parsedOptions,v=J(n.records,L,g),b=J(n.records,L,c);let B,k,T,f,w,W,C,O,H;if(n.parsedOptions.tasksShowMode===S.Sub_Tasks_Inline){const P=Ie(i.attribute.y+a,n);O=v.index[0],C=n.getRowsHeightByIndex(0,P.task_index-1)/n.parsedOptions.rowHeight,{startDate:B,endDate:k,taskDays:T}=n.getTaskInfoByTaskListIndex(b.index[0],b.index[1]),{startDate:f,endDate:w,taskDays:W}=n.getTaskInfoByTaskListIndex(v.index[0],v.index[1]);const M=n.parsedOptions.taskBarStyle.width;H=i.attribute.y+M/2-(C+.5)*n.parsedOptions.rowHeight}else if(n.parsedOptions.tasksShowMode===S.Sub_Tasks_Separate||n.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||n.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact){const P=Ie(i.attribute.y+a,n);O=n.getRowsHeightByIndex(0,v.index[0]-1)/n.parsedOptions.rowHeight+(n.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||n.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact?v.record.vtable_gantt_showIndex:v.index[1]),C=n.getRowsHeightByIndex(0,P.task_index-1)/n.parsedOptions.rowHeight+(n.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||n.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact?b.record.vtable_gantt_showIndex:P.sub_task_index),{startDate:B,endDate:k,taskDays:T}=n.getTaskInfoByTaskListIndex(b.index[0],b.index[1]),{startDate:f,endDate:w,taskDays:W}=n.getTaskInfoByTaskListIndex(v.index[0],v.index[1]);const M=n.parsedOptions.taskBarStyle.width;H=i.attribute.y+M/2-(C+.5)*n.parsedOptions.rowHeight}else{if(O=n.getTaskShowIndexByRecordIndex(v.index),C=n.getTaskShowIndexByRecordIndex(b.index),O===-1||C===-1)continue;({startDate:B,endDate:k,taskDays:T}=n.getTaskInfoByTaskListIndex(C)),{startDate:f,endDate:w,taskDays:W}=n.getTaskInfoByTaskListIndex(O)}const{linePoints:z,arrowPoints:R}=ft(_,f,w,O,W,null,0,B,k,C,T,i,H??0,this._gantt);p.setAttribute("points",z),u.setAttribute("points",R)}for(let l=0;l<(d==null?void 0:d.length);l++){const h=d[l],p=h.vtable_gantt_linkLineNode,u=h.vtable_gantt_linkArrowNode,{linkedToTaskKey:c,linkedFromTaskKey:g,type:_}=h,{taskKeyField:L,minDate:m}=n.parsedOptions,v=J(n.records,L,c),b=J(n.records,L,g);let B,k,T,f,w,W,C,O,H;if(n.parsedOptions.tasksShowMode===S.Sub_Tasks_Inline){const P=Ie(i.attribute.y+a,n);O=n.getRowsHeightByIndex(0,P.task_index-1)/n.parsedOptions.rowHeight,C=v.index[0],{startDate:B,endDate:k,taskDays:T}=n.getTaskInfoByTaskListIndex(v.index[0],v.index[1]),{startDate:f,endDate:w,taskDays:W}=n.getTaskInfoByTaskListIndex(b.index[0],b.index[1]);const M=n.parsedOptions.taskBarStyle.width;H=i.attribute.y+M/2-(O+.5)*n.parsedOptions.rowHeight}else if(n.parsedOptions.tasksShowMode===S.Sub_Tasks_Separate||n.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||n.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact){const P=Ie(i.attribute.y+a,n);O=n.getRowsHeightByIndex(0,P.task_index-1)/n.parsedOptions.rowHeight+(n.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||n.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact?b.record.vtable_gantt_showIndex:P.sub_task_index),C=n.getRowsHeightByIndex(0,v.index[0]-1)/n.parsedOptions.rowHeight+(n.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||n.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact?v.record.vtable_gantt_showIndex:v.index[1]),{startDate:B,endDate:k,taskDays:T}=n.getTaskInfoByTaskListIndex(v.index[0],v.index[1]),{startDate:f,endDate:w,taskDays:W}=n.getTaskInfoByTaskListIndex(b.index[0],b.index[1]);const M=n.parsedOptions.taskBarStyle.width;H=i.attribute.y+M/2-(O+.5)*n.parsedOptions.rowHeight}else{if(O=n.getTaskShowIndexByRecordIndex(b.index),C=n.getTaskShowIndexByRecordIndex(v.index),O===-1||C===-1)continue;({startDate:B,endDate:k,taskDays:T}=n.getTaskInfoByTaskListIndex(C)),{startDate:f,endDate:w,taskDays:W}=n.getTaskInfoByTaskListIndex(O)}const{linePoints:z,arrowPoints:R}=ft(_,f,w,O,W,i,H??0,B,k,C,T,null,0,this._gantt);p.setAttribute("points",z),u.setAttribute("points",R)}}}const Ki=s=>{switch(Object.prototype.toString.call(s)){case"[object Object]":return"object";case"[object Function]":return"function";case"[object Array]":return"array";case"[object String]":return"string";case"[object Number]":return"number";case"[object RegExp]":return"regExp";case"[object Boolean]":return"boolean";case"[object Symbol]":return"symbol";case"[object Date]":return"date";case"[object Undefined]":return"undefined";case"[object Null]":return"null";case"[object Error]":return"error";case"[object HTMLDocument]":return"document";case"[object global]":return"global";default:return null}},$i=(s,e)=>Ki(s)===e,Ui=s=>$i(s,"object");function Ht(s,e,t){let i,a,n,r,o,d,l=0,h=!1,p=!1,u=!0;const c=!e&&e!==0&&typeof requestAnimationFrame=="function";if(typeof s!="function")throw new TypeError("Expected a function");function g(v){const b=i,B=a;return a=void 0,i=void 0,l=v,r=s.apply(B,b),r}function _(v,b){return c?requestAnimationFrame(v):setTimeout(v,b)}function L(v){const b=v-d;return d===void 0||b>=e||b<0||h&&v-l>=n}function m(){const v=Date.now();if(L(v))return function(b){return o=void 0,u&&i?g(b):(a=void 0,i=void 0,r)}(v);o=_(m,function(b){const B=b-l,k=e&&-(b-d);return h?Math.min(k,n-B):k}(v))}return e=+e||0,Ui(t)&&(p=!!t.leading,h="maxWait"in t,h&&(n=Math.max(+t.maxWait||0,e)),u="trailing"in t?!!t.trailing:u),function(...v){const b=Date.now(),B=L(b);if(i=v,a=this,d=b,B){if(o===void 0)return function(k){return l=k,o=_(m,e),p?g(k):r}(d);if(h)return o=_(m,e),g(d)}return o===void 0&&(o=_(m,e)),r}}let qi=1;class Zi{constructor(e,t,i){var a;if(this.resizeTime=100,this.lastSize={width:0,height:0},this.mutationResize=()=>{this.onResize()},this.callBack=()=>{const n=this.getSize();let r=!1;n.width===this.lastSize.width&&n.height===this.lastSize.height&&(r=!0),this.lastSize=n,this.cb&&this.cb(Object.assign(Object.assign({},this.lastSize),{windowSizeNotChange:r}))},this.onResize=()=>{this.callBackDebounce()},this.element=e,this.cb=t,this.lastSize=this.getSize(),i&&(this.resizeTime=Math.max(i,16)),this.callBackDebounce=Ht(this.callBack,this.resizeTime),window==null||window.addEventListener("resize",this.onResize),"ResizeObserver"in window){const n=window.ResizeObserver;this.observer=new n(this.mutationResize),(a=this.observer)===null||a===void 0||a.observe(this.element)}else"MutationObserver"in window&&(this.observer=new MutationObserver(this.mutationResize),this.observer.observe(this.element,{attributes:!0,attributeFilter:["style"]}))}disConnect(){window.removeEventListener("resize",this.onResize),this.observer&&(this.observer.disconnect(),this.observer=void 0)}setSize(e){this.lastSize=e}checkSize(){const e=this.getSize();return e.width!==this.lastSize.width||e.height!==this.lastSize.height}getSize(){return this.element?{width:Math.floor(this.element.clientWidth),height:Math.floor(this.element.clientHeight)}:Object.assign({},this.lastSize)}}class Qi{constructor(){this.listeners={},this.reseizeListeners={}}on(e,t,i,...a){if(F.mode==="node")return-1;const n=qi++;if(e!=null&&e.addEventListener)if(t!=="resize"||e===window)e==null||e.addEventListener(t,i,...a);else{const o=new Zi(e,i,this.resizeTime);this.reseizeListeners[n]=o}const r={target:e,type:t,listener:i,options:a};return this.listeners[n]=r,n}once(e,t,i,...a){if(F.mode==="node")return-1;const n=this.on(e,t,(...r)=>{this.off(n),i(...r)},...a);return n}off(e){var t;if(F.mode==="node"||e==null)return;const i=(t=this.listeners)===null||t===void 0?void 0:t[e];i&&(delete this.listeners[e],i.target.removeEventListener&&i.target.removeEventListener(i.type,i.listener,...i.options))}fire(e,t,...i){if(F.mode!=="node")for(const a in this.listeners){const n=this.listeners[a];n.target===e&&n.type===t&&n.listener.call(n.target,...i)}}hasListener(e,t){if(F.mode==="node")return!1;let i=!1;for(const a in this.listeners){const n=this.listeners[a];n.target===e&&n.type===t&&(i=!0)}return i}clear(){if(F.mode!=="node"){for(const e in this.listeners){const t=this.listeners[e];t.target.removeEventListener&&t.target.removeEventListener(t.type,t.listener,...t.options)}for(const e in this.reseizeListeners){const t=this.reseizeListeners[e];t==null||t.disConnect()}this.listeners={}}}release(){F.mode!=="node"&&(this.clear(),this.listeners={})}}let ze=1;function Wt(){return Ti?ze=1:(ze=Math.ceil(window.devicePixelRatio||1),ze>1&&ze%2!=0&&(ze+=1)),ze}Wt();class Ji{constructor(e){this.isDown=!1,this.isDraging=!1,this.globalEventListeners=[],this._gantt=e,this._eventHandler=new Qi,this.bindEvent()}release(){this._eventHandler.release(),this.globalEventListeners.forEach(e=>{e.env==="document"?document.removeEventListener(e.name,e.callback):e.env==="body"?document.body.removeEventListener(e.name,e.callback):e.env==="window"&&window.removeEventListener(e.name,e.callback)}),this.globalEventListeners=[]}bindEvent(){es(this),ts(this)}}function es(s){const e=s._gantt.scenegraph,t=s._gantt,i=t.stateManager;e.tableGroup.addEventListener("pointerdown",a=>{if(a.button!==0)return;let n,r,o;a.detailPath.find(d=>d.name==="task-bar"?(n=d,!0):d.name==="task-creation-button"?!0:d.name==="task-bar-link-point-left"?(r=d,!0):d.name==="task-bar-link-point-right"?(o=d,!0):!!d.attribute.vtable_link&&(d.attribute.vtable_link,!0)),n?a.target.name==="task-bar-hover-shadow-left-icon"?(i.startResizeTaskBar(n,a.nativeEvent.x,a.nativeEvent.y,a.offset.y,"left"),i.updateInteractionState(A.grabing)):a.target.name==="task-bar-hover-shadow-right-icon"?(i.startResizeTaskBar(n,a.nativeEvent.x,a.nativeEvent.y,a.offset.y,"right"),i.updateInteractionState(A.grabing)):t.parsedOptions.taskBarMoveable&&(i.startMoveTaskBar(n,a.nativeEvent.x,a.nativeEvent.y,a.offset.y),i.updateInteractionState(A.grabing)):r?(i.startCreateDependencyLine(r,a.nativeEvent.x,a.nativeEvent.y,a.offset.y,"left"),i.updateInteractionState(A.grabing)):o&&(i.startCreateDependencyLine(o,a.nativeEvent.x,a.nativeEvent.y,a.offset.y,"right"),i.updateInteractionState(A.grabing))}),e.tableGroup.addEventListener("pointermove",a=>{var n,r,o;if(i.interactionState===A.default){const d=a.detailPath.find(l=>l.name==="task-bar");if(d){if(e._gantt.stateManager.hoverTaskBar.target!==d&&(e._gantt.stateManager.hoverTaskBar.target=d,i.showTaskBarHover(),e._gantt.hasListeners(G.MOUSEENTER_TASK_BAR))){const l=d.task_index,h=d.sub_task_index,p=e._gantt.getRecordByIndex(l,h);e._gantt.fireListeners(G.MOUSEENTER_TASK_BAR,{federatedEvent:a,event:a.nativeEvent,index:l,sub_task_index:h,record:p})}}else{if(e._gantt.stateManager.hoverTaskBar.target){if(e._gantt.hasListeners(G.MOUSELEAVE_TASK_BAR)){const l=e._gantt.stateManager.hoverTaskBar.target.task_index,h=e._gantt.stateManager.hoverTaskBar.target.sub_task_index,p=e._gantt.getRecordByIndex(l,h);e._gantt.fireListeners(G.MOUSELEAVE_TASK_BAR,{federatedEvent:a,event:a.nativeEvent,index:l,sub_task_index:h,record:p})}i.hideTaskBarHover(a)}if(t.parsedOptions.tasksShowMode!==S.Sub_Tasks_Inline&&t.parsedOptions.tasksShowMode!==S.Sub_Tasks_Separate&&t.parsedOptions.tasksShowMode!==S.Sub_Tasks_Arrange&&t.parsedOptions.tasksShowMode!==S.Sub_Tasks_Compact&&t.parsedOptions.taskBarCreatable){const l=ht(a.offset.y,t),h=t.getTaskInfoByTaskListIndex(l);if(!h.taskDays&&h.taskRecord&&!h.taskRecord.vtableMerge){const p=Ke(a.offset.x,t),u=(p>=1?t.getDateColsWidth(0,p-1):0)-t.stateManager.scroll.horizontalBarPos,c=l*t.parsedOptions.rowHeight-t.stateManager.scroll.verticalBarPos;return void t.scenegraph.showTaskCreationButton(u,c,p)}}}t.scenegraph.hideTaskCreationButton()}else if(i.interactionState===A.grabing){let d,l,h;a.detailPath.find(p=>p.name==="task-bar"?(d=p,!0):p.name==="task-creation-button"?!0:p.name==="task-bar-link-point-left"?(l=p,!0):p.name==="task-bar-link-point-right"?(h=p,!0):!!p.attribute.vtable_link&&(p.attribute.vtable_link,!0)),d=(r=d??((n=l==null?void 0:l.parent)===null||n===void 0?void 0:n.attribute.attachedToTaskBarNode))!==null&&r!==void 0?r:(o=h==null?void 0:h.parent)===null||o===void 0?void 0:o.attribute.attachedToTaskBarNode,e._gantt.stateManager.isCreatingDependencyLine()&&!d?i.hideSecondTaskBarSelectedBorder():e._gantt.stateManager.isCreatingDependencyLine()&&l&&e._gantt.stateManager.selectedTaskBar.target!==d?(i.highlightLinkPointNode(l),i.creatingDenpendencyLink.lastHighLightLinkPoint=l,i.creatingDenpendencyLink.secondTaskBarPosition="left"):e._gantt.stateManager.isCreatingDependencyLine()&&h&&e._gantt.stateManager.selectedTaskBar.target!==d?(i.highlightLinkPointNode(h),i.creatingDenpendencyLink.lastHighLightLinkPoint=h,i.creatingDenpendencyLink.secondTaskBarPosition="right"):e._gantt.stateManager.isCreatingDependencyLine()&&d&&e._gantt.stateManager.selectedTaskBar.target!==d&&(i.unhighlightLinkPointNode(i.creatingDenpendencyLink.lastHighLightLinkPoint),i.creatingDenpendencyLink.secondTaskBarNode&&i.creatingDenpendencyLink.secondTaskBarNode===d||(i.creatingDenpendencyLink.secondTaskBarNode&&i.creatingDenpendencyLink.secondTaskBarNode!==d&&i.hideSecondTaskBarSelectedBorder(),i.creatingDenpendencyLink.secondTaskBarNode=d,i.showSecondTaskBarSelectedBorder()))}}),e.tableGroup.addEventListener("pointerup",a=>{var n;let r,o=!1,d=!1,l=!1,h=!1,p=!1;const u=a.detailPath.find(c=>c.name==="task-bar"?(o=!0,!0):c.name==="task-creation-button"?(d=!0,!1):c.name==="task-bar-link-point-left"?(h=!0,!1):c.name==="task-bar-link-point-right"?(p=!0,!1):!!c.attribute.vtable_link&&(l=!0,r=c.attribute.vtable_link,!1));if(o&&e._gantt.parsedOptions.taskBarSelectable&&s.poniterState==="down"){if(i.hideDependencyLinkSelectedLine(),i.showTaskBarSelectedBorder(u),t.hasListeners(G.CLICK_TASK_BAR)){const c=u.task_index,g=u.sub_task_index,_=t.getRecordByIndex(c,g);t.fireListeners(G.CLICK_TASK_BAR,{federatedEvent:a,event:a.nativeEvent,index:c,sub_task_index:g,record:_})}}else if(d&&s.poniterState==="down"){i.hideDependencyLinkSelectedLine(),i.hideTaskBarSelectedBorder();const c=ht(a.offset.y,t),g=t.getTaskInfoByTaskListIndex(c);if(g.taskRecord){const _=(n=t.parsedOptions.dateFormat)!==null&&n!==void 0?n:t.parsedOptions.timeScaleIncludeHour?"yyyy-mm-dd hh:mm:ss":"yyyy-mm-dd",L=Ke(a.offset.x,t),m=t.getDateRangeByIndex(L);g.taskRecord[t.parsedOptions.startDateField]=de(m.startDate,_),g.taskRecord[t.parsedOptions.endDateField]=de(m.endDate,_),t.scenegraph.hideTaskCreationButton(),t.updateTaskRecord(g.taskRecord,c),t.hasListeners(G.CREATE_TASK_SCHEDULE)&&t.fireListeners(G.CREATE_TASK_SCHEDULE,{federatedEvent:a,event:a.nativeEvent,index:c,startDate:g.taskRecord[t.parsedOptions.startDateField],endDate:g.taskRecord[t.parsedOptions.endDateField],record:g.taskRecord})}}else if(l&&e._gantt.parsedOptions.dependencyLinkSelectable&&s.poniterState==="down")i.hideDependencyLinkSelectedLine(),i.hideTaskBarSelectedBorder(),e._gantt.stateManager.selectedDenpendencyLink.link=r,i.showDependencyLinkSelectedLine();else if((h||p)&&s.poniterState==="down"){if(t.hasListeners(G.CLICK_DEPENDENCY_LINK_POINT)){const c=ht(a.offset.y,t),g=t.getRecordByIndex(c);t.fireListeners(G.CLICK_DEPENDENCY_LINK_POINT,{event:a.nativeEvent,index:c,point:h?"start":"end",record:g})}i.hideTaskBarSelectedBorder()}else if(h&&s.poniterState==="draging"){if(i.isCreatingDependencyLine()){const c=i.endCreateDependencyLine(a.offset.y);t.hasListeners(G.CREATE_DEPENDENCY_LINK)&&t.fireListeners(G.CREATE_DEPENDENCY_LINK,{federatedEvent:a,event:a.nativeEvent,link:c})}}else if(p&&s.poniterState==="draging"){if(i.isCreatingDependencyLine()){const c=i.endCreateDependencyLine(a.offset.y);t.hasListeners(G.CREATE_DEPENDENCY_LINK)&&t.fireListeners(G.CREATE_DEPENDENCY_LINK,{federatedEvent:a,event:a.nativeEvent,link:c})}}else i.hideDependencyLinkSelectedLine(),i.hideTaskBarSelectedBorder()}),e.tableGroup.addEventListener("pointerenter",a=>{(t.parsedOptions.scrollStyle.horizontalVisible&&t.parsedOptions.scrollStyle.horizontalVisible==="focus"||!t.parsedOptions.scrollStyle.horizontalVisible&&t.parsedOptions.scrollStyle.visible==="focus")&&e.scrollbarComponent.showHorizontalScrollBar(),(t.parsedOptions.scrollStyle.verticalVisible&&t.parsedOptions.scrollStyle.verticalVisible==="focus"||!t.parsedOptions.scrollStyle.verticalVisible&&t.parsedOptions.scrollStyle.visible==="focus")&&e.scrollbarComponent.showVerticalScrollBar()}),e.tableGroup.addEventListener("pointerleave",a=>{(t.parsedOptions.scrollStyle.horizontalVisible&&t.parsedOptions.scrollStyle.horizontalVisible==="focus"||!t.parsedOptions.scrollStyle.horizontalVisible&&t.parsedOptions.scrollStyle.visible==="focus")&&e.scrollbarComponent.hideHorizontalScrollBar(),(t.parsedOptions.scrollStyle.verticalVisible&&t.parsedOptions.scrollStyle.verticalVisible==="focus"||!t.parsedOptions.scrollStyle.verticalVisible&&t.parsedOptions.scrollStyle.visible==="focus")&&e.scrollbarComponent.hideVerticalScrollBar()})}function ts(s){const e=s._gantt,t=(s._gantt.scenegraph,e.stateManager),i=s._eventHandler;i.on(e.getElement(),"wheel",o=>{bi(o,t,s._gantt)}),i.on(e.getContainer(),"resize",o=>{o.width===0&&o.height===0||(N(e.options.pixelRatio)||e.setPixelRatio(Wt()),o.windowSizeNotChange||e._resize())}),e.taskListTableInstance&&e.parsedOptions.verticalSplitLineMoveable&&i.on(e.verticalSplitResizeLine,"mousedown",o=>{t.updateInteractionState(A.grabing),t.startResizeTableWidth(o)}),e.parsedOptions.verticalSplitLineHighlight&&(e.verticalSplitResizeLine&&i.on(e.verticalSplitResizeLine,"mouseover",o=>{e.verticalSplitResizeLine.childNodes[1].style.opacity="1"}),e.verticalSplitResizeLine&&i.on(e.verticalSplitResizeLine,"mouseout",o=>{e.verticalSplitResizeLine.childNodes[1].style.opacity="0"}));const a=o=>{e.eventManager.lastDragPointerXYOnWindow={x:o.x,y:o.y},e.eventManager.poniterState="down"};s.globalEventListeners.push({name:"mousedown",env:"document",callback:a}),Xe.addEventListener("mousedown",a);const n=o=>{var d,l,h,p,u,c;if(e.eventManager.poniterState==="down"){const g=(d=e.eventManager.lastDragPointerXYOnWindow.x)!==null&&d!==void 0?d:o.x,_=o.x-g,L=(l=e.eventManager.lastDragPointerXYOnWindow.y)!==null&&l!==void 0?l:o.y,m=o.y-L;(Math.abs(_)>=1||Math.abs(m)>=1)&&(e.eventManager.poniterState="draging")}if(t.interactionState===A.grabing&&e.eventManager.poniterState==="draging"){const g=(p=(h=e.eventManager.lastDragPointerXYOnWindow)===null||h===void 0?void 0:h.x)!==null&&p!==void 0?p:o.x,_=(c=(u=e.eventManager.lastDragPointerXYOnWindow)===null||u===void 0?void 0:u.y)!==null&&c!==void 0?c:o.y;(Math.abs(g-o.x)>=1||Math.abs(_-o.y)>=1)&&(t.isResizingTableWidth()?(t.hideDependencyLinkSelectedLine(),t.hideTaskBarSelectedBorder(),t.dealResizeTableWidth(o)):t.isMoveingTaskBar()?(t.hideDependencyLinkSelectedLine(),t.hideTaskBarSelectedBorder(),t.dealTaskBarMove(o)):t.isResizingTaskBar()?(t.hideDependencyLinkSelectedLine(),t.hideTaskBarSelectedBorder(),t.dealTaskBarResize(o)):t.isCreatingDependencyLine()&&t.dealCreateDependencyLine(o),e.eventManager.lastDragPointerXYOnWindow={x:o.x,y:o.y})}};s.globalEventListeners.push({name:"mousemove",env:"document",callback:n}),Xe.addEventListener("mousemove",n);const r=o=>{t.interactionState==="grabing"&&(t.updateInteractionState(A.default),t.isResizingTableWidth()?t.endResizeTableWidth():t.isMoveingTaskBar()?t.endMoveTaskBar():t.isResizingTaskBar()&&t.endResizeTaskBar(o.x)),e.eventManager.lastDragPointerXYOnWindow=void 0,e.eventManager.poniterState="up"};s.globalEventListeners.push({name:"mouseup",env:"document",callback:r}),Xe.addEventListener("mouseup",r)}function St(s){const{scroll:e}=s.stateManager,{verticalBarPos:t}=e;s.taskListTableInstance.stateManager.setScrollTop(t,void 0,!1)}function is(s){var e;s.taskListTableInstance&&((e=s.taskListTableInstance)===null||e===void 0||e.on("scroll",t=>{if(t.scrollDirection==="vertical"){const{scroll:i}=s.taskListTableInstance.stateManager,{verticalBarPos:a}=i;s.stateManager.setScrollTop(a,!1)}}))}function ss(s){var e;(e=s.taskListTableInstance)===null||e===void 0||e.on("change_cell_value",t=>{const{col:i,row:a,rawValue:n,changedValue:r}=t;s._refreshTaskBar(a-s.taskListTableInstance.columnHeaderLevelCount)})}function as(s){var e;(e=s.taskListTableInstance)===null||e===void 0||e.on("tree_hierarchy_state_change",t=>{s._syncPropsFromTable(),s.scenegraph.refreshTaskBarsAndGrid();const i=s.stateManager.scroll.horizontalBarPos,a=s.stateManager.scroll.verticalBarPos;s.scenegraph.setX(-i),s.scenegraph.setY(-a)})}function ns(s){var e;(e=s.taskListTableInstance)===null||e===void 0||e.on("after_sort",t=>{s.scenegraph.refreshTaskBars();const i=s.stateManager.scroll.horizontalBarPos,a=s.stateManager.scroll.verticalBarPos;s.scenegraph.setX(-i),s.scenegraph.setY(-a)})}function rs(s){var e,t,i,a;(e=s.taskListTableInstance)===null||e===void 0||e.on("change_header_position",n=>{s.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||s.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact||s.parsedOptions.tasksShowMode===S.Sub_Tasks_Separate?s.scenegraph.refreshTaskBarsAndGrid():s.scenegraph.refreshTaskBars(),s.scenegraph.dragOrderLine.hideDragLine();const r=s.stateManager.scroll.horizontalBarPos,o=s.stateManager.scroll.verticalBarPos;s.scenegraph.setX(-r),s.scenegraph.setY(-o)}),(t=s.taskListTableInstance)===null||t===void 0||t.on("change_header_position_start",n=>{const{col:r,row:o,x:d,y:l,backX:h,lineX:p,backY:u,lineY:c,event:g}=n;s.scenegraph.dragOrderLine.showDragLine(c),s.scenegraph.updateNextFrame()}),(i=s.taskListTableInstance)===null||i===void 0||i.on("changing_header_position",n=>{const{col:r,row:o,x:d,y:l,backX:h,lineX:p,backY:u,lineY:c,event:g}=n;s.scenegraph.dragOrderLine.showDragLine(c),s.scenegraph.updateNextFrame()}),(a=s.taskListTableInstance)===null||a===void 0||a.on("change_header_position_fail",n=>{s.scenegraph.dragOrderLine.hideDragLine(),s.scenegraph.updateNextFrame()})}function os(s){var e;(e=s.taskListTableInstance)===null||e===void 0||e.on("resize_column",t=>{var i,a,n,r,o,d,l,h;const p=s.taskTableWidth;s.taskTableWidth=s.taskListTableInstance.getAllColsWidth()+s.parsedOptions.outerFrameStyle.borderLineWidth,!((a=(i=s.options)===null||i===void 0?void 0:i.taskListTable)===null||a===void 0)&&a.maxTableWidth&&(s.taskTableWidth=Math.min((r=(n=s.options)===null||n===void 0?void 0:n.taskListTable)===null||r===void 0?void 0:r.maxTableWidth,s.taskTableWidth)),!((d=(o=s.options)===null||o===void 0?void 0:o.taskListTable)===null||d===void 0)&&d.minTableWidth&&(s.taskTableWidth=Math.max((h=(l=s.options)===null||l===void 0?void 0:l.taskListTable)===null||h===void 0?void 0:h.minTableWidth,s.taskTableWidth)),p!==s.taskTableWidth&&(s.element.style.left=s.taskTableWidth?`${s.taskTableWidth}px`:"0px",s.taskListTableInstance.setCanvasSize(s.taskTableWidth,s.tableNoFrameHeight+2*s.parsedOptions.outerFrameStyle.borderLineWidth),s._updateSize(),gt(s))})}class ls{constructor(){}setScrollHandle(e){this.scrollHandle=e}startInertia(e,t,i){this.stopped=!1,this.lastTime=Date.now(),this.speedX=e,this.speedY=t,this.friction=i,this.runingId||(this.runingId=requestAnimationFrame(this.inertia.bind(this)))}inertia(){var e;if(this.stopped)return;const t=Date.now(),i=t-this.lastTime;let a=!0;const n=Math.pow(this.friction,i/16),r=n*this.speedX,o=n*this.speedY;let d=0,l=0;Math.abs(r)>.05&&(a=!1,d=(this.speedX+r)/2*i),Math.abs(o)>.05&&(a=!1,l=(this.speedY+o)/2*i),(e=this.scrollHandle)===null||e===void 0||e.call(this,d,l),a?this.runingId=null:(this.lastTime=t,this.speedX=r,this.speedY=o,this.runingId=requestAnimationFrame(this.inertia.bind(this)))}endInertia(){cancelAnimationFrame(this.runingId),this.runingId=null,this.stopped=!0}isInertiaScrolling(){return!!this.runingId}}class ds{constructor(e){var t;this.interactionState=A.default,this.resetInteractionState=Ht(()=>{this.updateInteractionState(A.default)},100),this._gantt=e,this.scroll={horizontalBarPos:0,verticalBarPos:0},this.moveTaskBar={targetStartX:null,targetStartY:null,deltaX:0,deltaY:0,startOffsetY:null,startX:null,startY:null,moving:!1,target:null,moveTaskBarXSpeed:0,moveTaskBarXInertia:new ls},this.hoverTaskBar={targetStartX:null,startX:null,target:null},this.selectedTaskBar={target:null},this.resizeTaskBar={startOffsetY:null,targetStartX:null,targetEndX:null,startX:null,startY:null,target:null,resizing:!1,onIconName:""},this.resizeTableWidth={lastX:null,resizing:!1},this.selectedDenpendencyLink={link:null},this.creatingDenpendencyLink={startClickedPoint:null,startX:null,startY:null,startOffsetY:null,targetStartX:null,creating:!1,secondTaskBarNode:null},this.updateVerticalScrollBar=this.updateVerticalScrollBar.bind(this),this.updateHorizontalScrollBar=this.updateHorizontalScrollBar.bind(this),is(this._gantt),ss(this._gantt),rs(this._gantt),as(this._gantt),ns(this._gantt),((t=this._gantt.options.taskListTable)===null||t===void 0?void 0:t.tableWidth)!=="auto"&&this._gantt.taskTableWidth!==-1||os(this._gantt)}setScrollTop(e,t=!0){const i=this._gantt.getAllRowsHeight();e=Math.max(0,Math.min(e,i-this._gantt.scenegraph.height)),e=Math.ceil(e);const a=this.scroll.verticalBarPos;this.scroll.verticalBarPos=e,N(this.scroll.verticalBarPos)&&!isNaN(this.scroll.verticalBarPos)||(this.scroll.verticalBarPos=0),this._gantt.scenegraph.setY(-e);const n=e/(i-this._gantt.scenegraph.height);this._gantt.scenegraph.scrollbarComponent.updateVerticalScrollBarPos(n),a!==e&&t&&(St(this._gantt),this._gantt.fireListeners(G.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollDirection:"vertical",scrollRatioY:n}))}get scrollLeft(){return this.scroll.horizontalBarPos}get scrollTop(){return this.scroll.verticalBarPos}setScrollLeft(e,t=!0){const i=this._gantt.getAllDateColsWidth();e=Math.max(0,Math.min(e,i-this._gantt.scenegraph.width)),e=Math.ceil(e);const a=this.scroll.horizontalBarPos;this.scroll.horizontalBarPos=e,N(this.scroll.horizontalBarPos)&&!isNaN(this.scroll.horizontalBarPos)||(this.scroll.horizontalBarPos=0),this._gantt.scenegraph.setX(-e);const n=e/(i-this._gantt.scenegraph.width);this._gantt.scenegraph.scrollbarComponent.updateHorizontalScrollBarPos(n),a!==e&&t&&this._gantt.fireListeners(G.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollDirection:"horizontal",scrollRatioX:n})}updateInteractionState(e){if(this.interactionState===e)return;const t=this.interactionState;this.interactionState=e,t===A.scrolling&&A.default}updateVerticalScrollBar(e){const t=this._gantt.getAllRowsHeight();this.scroll.verticalBarPos,this.scroll.verticalBarPos=Math.ceil(e*(t-this._gantt.scenegraph.height)),N(this.scroll.verticalBarPos)&&!isNaN(this.scroll.verticalBarPos)||(this.scroll.verticalBarPos=0),this._gantt.scenegraph.setY(-this.scroll.verticalBarPos,e===1),St(this._gantt),this._gantt.fireListeners(G.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollDirection:"vertical",scrollRatioY:e})}updateHorizontalScrollBar(e){const t=this._gantt.getAllDateColsWidth();this.scroll.horizontalBarPos,this.scroll.horizontalBarPos=Math.ceil(e*(t-this._gantt.scenegraph.width)),N(this.scroll.horizontalBarPos)&&!isNaN(this.scroll.horizontalBarPos)||(this.scroll.horizontalBarPos=0),this._gantt.scenegraph.setX(-this.scroll.horizontalBarPos,e===1),this._gantt.fireListeners(G.SCROLL,{scrollTop:this.scroll.verticalBarPos,scrollLeft:this.scroll.horizontalBarPos,scrollDirection:"horizontal",scrollRatioY:e})}startMoveTaskBar(e,t,i,a){e.name==="task-bar-hover-shadow"&&(e=e.parent),this.moveTaskBar.moving=!0,this.moveTaskBar.target=e,this.moveTaskBar.targetStartX=e.attribute.x,this.moveTaskBar.targetStartY=e.attribute.y,this.moveTaskBar.startX=t,this.moveTaskBar.startY=i,this.moveTaskBar.startOffsetY=a,e.setAttribute("zIndex",1e4)}isMoveingTaskBar(){return this.moveTaskBar.moving}endMoveTaskBar(){this.moveTaskBar.moveTaskBarXInertia.isInertiaScrolling()&&this.moveTaskBar.moveTaskBarXInertia.endInertia();const e=this.moveTaskBar.deltaX,t=this.moveTaskBar.deltaY,i=this.moveTaskBar.target;if(Math.abs(e)>=1||Math.abs(t)>=1){const a=i.task_index,n=i.sub_task_index,{startDate:r,endDate:o}=this._gantt.getTaskInfoByTaskListIndex(a,n),d=this.moveTaskBar.targetStartY+this._gantt.parsedOptions.rowHeight*Math.round(t/this._gantt.parsedOptions.rowHeight),l=Ke(this.moveTaskBar.target.attribute.x-this._gantt.stateManager.scroll.horizontalBarPos,this._gantt),h=this._gantt.parsedOptions.reverseSortedTimelineScales[0].timelineDates[l].startDate,p=new Date(h.getTime()+(E(o).getTime()-E(r).getTime()));let u;if(E(r).getTime()!==h.getTime()){u=E(r).getTime()>h.getTime()?"left":"right",this._gantt._updateStartEndDateToTaskRecord(h,p,a,n);const c=this._gantt.getRecordByIndex(a,n);this._gantt.hasListeners(G.CHANGE_DATE_RANGE)&&this._gantt.fireListeners(G.CHANGE_DATE_RANGE,{startDate:c[this._gantt.parsedOptions.startDateField],endDate:c[this._gantt.parsedOptions.endDateField],oldStartDate:r,oldEndDate:o,index:a,record:c})}if(this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact){const c=Ie(d,this._gantt);this._gantt._dragOrderTaskRecord(i.task_index,i.sub_task_index,c.task_index,c.sub_task_index),Ct(this._gantt.records),this._gantt.taskListTableInstance.renderWithRecreateCells(),this._gantt._syncPropsFromTable(),this._gantt.scenegraph.refreshTaskBarsAndGrid()}else if(this._gantt.parsedOptions.tasksShowMode!==S.Tasks_Separate&&Math.abs(Math.round(t/this._gantt.parsedOptions.rowHeight))>=1){const c=Ie(d,this._gantt);this._gantt._dragOrderTaskRecord(i.task_index,i.sub_task_index,c.task_index,c.sub_task_index),this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Separate?(this._gantt.taskListTableInstance.renderWithRecreateCells(),this._gantt.scenegraph.refreshTaskBarsAndGrid()):(this._gantt.scenegraph.taskBar.refresh(),this._gantt.scenegraph.dependencyLink.refresh())}else if(Re(i,(l>=1?this._gantt.getDateColsWidth(0,l-1):0)-i.attribute.x,d-i.attribute.y,null,this),u==="right"){let c=i;for(;c.nextSibling&&c.nextSibling.attribute.y===i.attribute.y&&c.nextSibling.record[this._gantt.parsedOptions.startDateField]<=i.record[this._gantt.parsedOptions.startDateField];)c=c.nextSibling;c!==i&&c.parent.insertAfter(i,c)}else if(u==="left"){let c=i;for(;c.previousSibling&&c.previousSibling.attribute.y===i.attribute.y&&c.previousSibling.record[this._gantt.parsedOptions.startDateField]>=i.record[this._gantt.parsedOptions.startDateField];)c=c.previousSibling;c!==i&&c.parent.insertBefore(i,c)}this._gantt.scenegraph.updateNextFrame()}this.moveTaskBar.moving=!1,this.selectedTaskBar.target!==i&&i.setAttribute("zIndex",0),this.moveTaskBar.target=null,this.moveTaskBar.deltaX=0,this.moveTaskBar.deltaY=0,this.moveTaskBar.moveTaskBarXSpeed=0}dealTaskBarMove(e){const t=this.moveTaskBar.target;t.setAttribute("zIndex",1e4);const i=this._gantt.eventManager.lastDragPointerXYOnWindow.x,a=e.x-i,n=this._gantt.eventManager.lastDragPointerXYOnWindow.y,r=e.y-n;this.moveTaskBar.deltaX+=a,this.moveTaskBar.deltaY+=r,Re(t,a,r,null,this),t.attribute.x<=this._gantt.stateManager.scrollLeft&&a<0?(this.moveTaskBar.moveTaskBarXSpeed=-this._gantt.parsedOptions.timelineColWidth/100,this.moveTaskBar.moveTaskBarXInertia.startInertia(this.moveTaskBar.moveTaskBarXSpeed,0,1),this.moveTaskBar.moveTaskBarXInertia.setScrollHandle((o,d)=>{this.moveTaskBar.deltaX+=o,this.moveTaskBar.deltaY+=d,Re(t,o,d,null,this),this._gantt.stateManager.setScrollLeft(t.attribute.x),this._gantt.stateManager.scrollLeft===0&&this.moveTaskBar.moveTaskBarXInertia.endInertia()})):t.attribute.x+t.attribute.width>=this._gantt.stateManager.scrollLeft+this._gantt.tableNoFrameWidth&&a>0?(this.moveTaskBar.moveTaskBarXSpeed=this._gantt.parsedOptions.timelineColWidth/100,this.moveTaskBar.moveTaskBarXInertia.startInertia(this.moveTaskBar.moveTaskBarXSpeed,0,1),this.moveTaskBar.moveTaskBarXInertia.setScrollHandle((o,d)=>{this.moveTaskBar.deltaX+=o,this.moveTaskBar.deltaY+=d,Re(t,o,d,null,this),this._gantt.stateManager.setScrollLeft(t.attribute.x+t.attribute.width-this._gantt.tableNoFrameWidth),this._gantt.stateManager.scrollLeft===this._gantt.getAllDateColsWidth()-this._gantt.tableNoFrameWidth&&this.moveTaskBar.moveTaskBarXInertia.endInertia()})):this.moveTaskBar.moveTaskBarXInertia.isInertiaScrolling()?this.moveTaskBar.moveTaskBarXInertia.endInertia():this.moveTaskBar.moveTaskBarXSpeed=0,this._gantt.scenegraph.updateNextFrame()}startResizeTaskBar(e,t,i,a,n){this.resizeTaskBar.onIconName=n,this.resizeTaskBar.resizing=!0,this.resizeTaskBar.target=e,this.resizeTaskBar.targetStartX=e.attribute.x,this.resizeTaskBar.targetEndX=e.attribute.x+e.attribute.width,this.resizeTaskBar.startX=t,this.resizeTaskBar.startY=i,this.resizeTaskBar.startOffsetY=a}isResizingTaskBar(){return this.resizeTaskBar.resizing}endResizeTaskBar(e){const t=this._gantt.stateManager.resizeTaskBar.onIconName,i=e-this.resizeTaskBar.startX;if(Math.abs(i)>=1){const a=Ke((t==="left"?this.resizeTaskBar.target.attribute.x:this.resizeTaskBar.target.attribute.x+this.resizeTaskBar.target.attribute.width)-this._gantt.stateManager.scroll.horizontalBarPos,this._gantt),n=this._gantt.parsedOptions.reverseSortedTimelineScales[0].timelineDates[a],r=t==="left"?n.startDate:n.endDate,o=this.resizeTaskBar.target,d=o.clipGroupBox,l=this.resizeTaskBar.target.barRect,h=this.resizeTaskBar.target.progressRect,p=this.resizeTaskBar.target.task_index,u=this.resizeTaskBar.target.sub_task_index,{taskDays:c,progress:g,startDate:_,endDate:L}=this._gantt.getTaskInfoByTaskListIndex(p,u);let m=!1;if(t==="left"?(this._gantt._updateStartDateToTaskRecord(r,p,u),r.getTime()!==new Date(_).getTime()&&(m=!0)):(this._gantt._updateEndDateToTaskRecord(r,p,u),r.getTime()!==new Date(L).getTime()&&(m=!0)),this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact)this._gantt.taskListTableInstance.renderWithRecreateCells(),this._gantt._syncPropsFromTable(),this._gantt.scenegraph.refreshTaskBarsAndGrid();else{if(t==="left"){const v=a>=1?this._gantt.getDateColsWidth(0,a-1):0;o.setAttribute("x",v),o.setAttribute("width",this.resizeTaskBar.targetEndX-v)}else if(t==="right"){const v=this._gantt.getDateColsWidth(0,a);o.setAttribute("width",v-this.resizeTaskBar.targetStartX)}d.setAttribute("width",o.attribute.width),l==null||l.setAttribute("width",o.attribute.width),h==null||h.setAttribute("width",g/100*o.attribute.width),this._gantt.scenegraph.refreshRecordLinkNodes(p,u,o,0),this.showTaskBarHover(),Lt(this._gantt,o,p,u),o.setAttribute("zIndex",0)}if(this.resizeTaskBar.resizing=!1,this.resizeTaskBar.target=null,m&&this._gantt.hasListeners(G.CHANGE_DATE_RANGE)){const v=this._gantt.getRecordByIndex(p,u);this._gantt.fireListeners(G.CHANGE_DATE_RANGE,{startDate:v[this._gantt.parsedOptions.startDateField],endDate:v[this._gantt.parsedOptions.endDateField],oldStartDate:_,oldEndDate:L,index:p,record:v})}this._gantt.scenegraph.updateNextFrame()}}dealTaskBarResize(e){const t=this._gantt.eventManager.lastDragPointerXYOnWindow.x,i=e.x-t,a=this._gantt.stateManager.resizeTaskBar.target;a.setAttribute("zIndex",1e4);const n=a.clipGroupBox,r=a.barRect,o=a.progressRect,d=a.textLabel,l=this._gantt.parsedOptions.progressField,h=a.task_index,p=a.sub_task_index,u=this._gantt.getRecordByIndex(h,p)[l];let c=this._gantt.stateManager.resizeTaskBar.onIconName==="left"?-i:i,g=a.attribute.width+c;c<0&&g<=this._gantt.parsedOptions.timelineColWidth&&(c=this._gantt.parsedOptions.timelineColWidth-a.attribute.width,g+=c),Re(a,this._gantt.stateManager.resizeTaskBar.onIconName==="left"?-c:0,0,g,this),n.setAttribute("width",a.attribute.width),r==null||r.setAttribute("width",a.attribute.width),o==null||o.setAttribute("width",u/100*a.attribute.width),d==null||d.setAttribute("maxLineWidth",g-2*Ii),this.showTaskBarHover(),Lt(this._gantt,a,h,p),this._gantt.scenegraph.updateNextFrame()}startCreateDependencyLine(e,t,i,a,n){this.creatingDenpendencyLink.creating=!0,this.creatingDenpendencyLink.startClickedPoint=e,this.creatingDenpendencyLink.startX=t,this.creatingDenpendencyLink.startY=i,this.creatingDenpendencyLink.startOffsetY=a,this.creatingDenpendencyLink.firstTaskBarPosition=n,this.highlightLinkPointNode(e)}isCreatingDependencyLine(){return this.creatingDenpendencyLink.creating}endCreateDependencyLine(e){const t=this._gantt.parsedOptions.taskKeyField,i=this.selectedTaskBar.target.task_index,a=this.selectedTaskBar.target.sub_task_index,n=this.creatingDenpendencyLink.secondTaskBarNode.task_index,r=this.creatingDenpendencyLink.secondTaskBarNode.sub_task_index,o={linkedFromTaskKey:this._gantt.getRecordByIndex(i,a)[t],linkedToTaskKey:this._gantt.getRecordByIndex(n,r)[t],type:this.creatingDenpendencyLink.firstTaskBarPosition==="left"&&this.creatingDenpendencyLink.secondTaskBarPosition==="left"?X.StartToStart:this.creatingDenpendencyLink.firstTaskBarPosition==="right"&&this.creatingDenpendencyLink.secondTaskBarPosition==="left"?X.FinishToStart:this.creatingDenpendencyLink.firstTaskBarPosition==="right"&&this.creatingDenpendencyLink.secondTaskBarPosition==="right"?X.FinishToFinish:X.StartToFinish};return this._gantt.addLink(o),this.hideTaskBarSelectedBorder(),this._gantt.scenegraph.updateNextFrame(),this.creatingDenpendencyLink.creating=!1,o}dealCreateDependencyLine(e){const t=this.creatingDenpendencyLink.startX,i=this.creatingDenpendencyLink.startY,a=e.x-t,n=e.y-i,r=this.creatingDenpendencyLink.startClickedPoint,o=r.attribute.x+r.attribute.width/2,d=r.attribute.y+r.attribute.height/2;this._gantt.scenegraph.taskBar.updateCreatingDependencyLine(o,d,o+a,d+n),this._gantt.scenegraph.updateNextFrame()}startResizeTableWidth(e){this.resizeTableWidth.resizing=!0,this.resizeTableWidth.lastX=e.pageX}isResizingTableWidth(){return this.resizeTableWidth.resizing}endResizeTableWidth(){this.resizeTableWidth.resizing=!1}dealResizeTableWidth(e){var t,i;if(!this.resizeTableWidth.resizing)return;const a=e.pageX-this.resizeTableWidth.lastX;if(Math.abs(a)>=1){let n=this._gantt.taskTableWidth+a;const r=Math.min(this._gantt.taskListTableInstance.getAllColsWidth()+this._gantt.parsedOptions.outerFrameStyle.borderLineWidth,(t=this._gantt.options.taskListTable.maxTableWidth)!==null&&t!==void 0?t:1e5),o=Math.max(this._gantt.parsedOptions.outerFrameStyle.borderLineWidth,(i=this._gantt.options.taskListTable.minTableWidth)!==null&&i!==void 0?i:0);a>0&&n>r&&(n=r),a<0&&n<o&&(n=o),this._gantt.taskTableWidth=n,this._gantt.element.style.left=this._gantt.taskTableWidth?`${this._gantt.taskTableWidth}px`:"0px",this._gantt.verticalSplitResizeLine.style.left=this._gantt.taskTableWidth?this._gantt.taskTableWidth-7+"px":"0px",this._gantt._resize(),this.resizeTableWidth.lastX=e.pageX}}showTaskBarHover(){const e=this._gantt.stateManager.hoverTaskBar.target;if(e){const t=e.attribute.x,i=e.attribute.y,a=e.attribute.width,n=e.attribute.height;this._gantt.scenegraph.taskBar.showHoverBar(t,i,a,n,e),this._gantt.scenegraph.updateNextFrame()}}hideTaskBarHover(e){this._gantt.stateManager.hoverTaskBar.target=null,this._gantt.scenegraph.taskBar.hideHoverBar(),this._gantt.scenegraph.updateNextFrame()}showTaskBarSelectedBorder(e){var t;(t=this._gantt.stateManager.selectedTaskBar.target)===null||t===void 0||t.setAttribute("zIndex",0),this._gantt.stateManager.selectedTaskBar.target=e;const i=this._gantt.parsedOptions.dependencyLinkCreatable;e.setAttribute("zIndex",1e4);const a=e.attribute.x,n=e.attribute.y,r=e.attribute.width,o=e.attribute.height;this._gantt.scenegraph.taskBar.createSelectedBorder(a,n,r,o,e,i),this._gantt.scenegraph.updateNextFrame()}hideTaskBarSelectedBorder(){var e;(e=this._gantt.stateManager.selectedTaskBar.target)===null||e===void 0||e.setAttribute("zIndex",0),this._gantt.stateManager.selectedTaskBar.target=null,this._gantt.scenegraph.taskBar.removeSelectedBorder(),this._gantt.scenegraph.updateNextFrame()}showSecondTaskBarSelectedBorder(){const e=this._gantt.stateManager.creatingDenpendencyLink.secondTaskBarNode,t=e.attribute.x,i=e.attribute.y,a=e.attribute.width,n=e.attribute.height;this._gantt.scenegraph.taskBar.createSelectedBorder(t,i,a,n,e,!0),this._gantt.scenegraph.updateNextFrame()}hideSecondTaskBarSelectedBorder(){this._gantt.stateManager.creatingDenpendencyLink.secondTaskBarNode=null,this._gantt.scenegraph.taskBar.removeSecondSelectedBorder(),this._gantt.scenegraph.updateNextFrame()}showDependencyLinkSelectedLine(){const e=this._gantt.stateManager.selectedDenpendencyLink.link;this._gantt.scenegraph.dependencyLink.createSelectedLinkLine(e);const{taskKeyField:t,dependencyLinks:i}=this._gantt.parsedOptions,{linkedToTaskKey:a,linkedFromTaskKey:n,type:r}=e;let o,d,l,h;const p=J(this._gantt.records,t,a),u=J(this._gantt.records,t,n);this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Inline||this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Separate||this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact?(o=u.index[0],d=u.index[1],l=p.index[0],h=p.index[1]):(o=this._gantt.getTaskShowIndexByRecordIndex(u.index),l=this._gantt.getTaskShowIndexByRecordIndex(p.index));const c=this._gantt.scenegraph.taskBar.getTaskBarNodeByIndex(o,d);this._gantt.scenegraph.taskBar.createSelectedBorder(c.attribute.x,c.attribute.y,c.attribute.width,c.attribute.height,c,!1);const g=this._gantt.scenegraph.taskBar.getTaskBarNodeByIndex(l,h);this._gantt.scenegraph.taskBar.createSelectedBorder(g.attribute.x,g.attribute.y,g.attribute.width,g.attribute.height,g,!1),this._gantt.scenegraph.updateNextFrame()}hideDependencyLinkSelectedLine(){this._gantt.stateManager.selectedDenpendencyLink.link=null,this._gantt.scenegraph.dependencyLink.removeSelectedLinkLine(),this._gantt.scenegraph.taskBar.removeSelectedBorder(),this._gantt.scenegraph.updateNextFrame()}highlightLinkPointNode(e){if((e==null?void 0:e.children.length)>0){const t=e.children[0];t.setAttribute("fill",this._gantt.parsedOptions.dependencyLinkLineCreatingPointStyle.fillColor),t.setAttribute("stroke",this._gantt.parsedOptions.dependencyLinkLineCreatingPointStyle.strokeColor),t.setAttribute("radius",this._gantt.parsedOptions.dependencyLinkLineCreatingPointStyle.radius),t.setAttribute("lineWidth",this._gantt.parsedOptions.dependencyLinkLineCreatingPointStyle.strokeWidth),this._gantt.scenegraph.updateNextFrame()}}unhighlightLinkPointNode(e){if((e==null?void 0:e.children.length)>0){const t=e.children[0];t.setAttribute("fill",this._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.fillColor),t.setAttribute("stroke",this._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeColor),t.setAttribute("radius",this._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.radius),t.setAttribute("lineWidth",this._gantt.parsedOptions.dependencyLinkLineCreatePointStyle.strokeWidth),this._gantt.scenegraph.updateNextFrame()}}}function Lt(s,e,t,i){const a=s.parsedOptions.taskBarCustomLayout;if(a){let n;if(typeof a=="function"){const{startDate:r,endDate:o,taskDays:d,progress:l,taskRecord:h}=s.getTaskInfoByTaskListIndex(t,i);n=a({width:e.attribute.width,height:e.attribute.height,index:t,startDate:r,endDate:o,taskDays:d,progress:l,taskRecord:h,ganttInstance:s})}else n=a;if(n){const r=n.rootContainer;r.name="task-bar-custom-render";const o=e.children.find(d=>d.name==="task-bar-group");if(o){const d=o.children.findIndex(h=>h.name==="task-bar-custom-render"),l=o.children[d];l&&(o.removeChild(l),o.insertInto(r,d))}}}}function Re(s,e,t,i,a){const n=s.task_index,r=s.sub_task_index;e&&s.setAttribute("x",s.attribute.x+e),a._gantt.parsedOptions.tasksShowMode!==S.Tasks_Separate?t&&s.setAttribute("y",s.attribute.y+t):t=0,i&&s.setAttribute("width",i),a._gantt.scenegraph.refreshRecordLinkNodes(n,r,s,t)}let hs=1;class cs{constructor(){this.listenersData={listeners:{},listenerData:{}}}on(e,t){const i=this.listenersData.listeners[e]||(this.listenersData.listeners[e]=[]);i.push(t);const a=hs++;return this.listenersData.listenerData[a]={type:e,listener:t,remove:()=>{delete this.listenersData.listenerData[a];const n=i.indexOf(t);i.splice(n,1),this.listenersData.listeners[e].length||delete this.listenersData.listeners[e]}},a}off(e,t){var i;if(t){const a=e;this.removeEventListener(a,t)}else{const a=e;if(!this.listenersData)return;(i=this.listenersData.listenerData[a])===null||i===void 0||i.remove()}}addEventListener(e,t,i){this.on(e,t)}removeEventListener(e,t){if(this.listenersData)for(const i in this.listenersData.listenerData){const a=this.listenersData.listenerData[i];a.type===e&&a.listener===t&&this.off(i)}}hasListeners(e){return!!this.listenersData&&!!this.listenersData.listeners[e]}fireListeners(e,t){if(!this.listenersData)return[];const i=this.listenersData.listeners[e];return i?i.map(a=>a.call(this,t)).filter(a=>N(a)):[]}release(){delete this.listenersData}}class ps{constructor(e){this._gantt=e,this.records=e.records,this.minDate=e.parsedOptions.minDate,this.maxDate=e.parsedOptions.maxDate,this.processRecords()}processRecords(){const e=!this.minDate,t=!this.maxDate;let i=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;if((e||t||this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Inline||this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact)&&this.records.length){for(let d=0;d<this.records.length;d++){const l=this.records[d];if(e&&l[this._gantt.parsedOptions.startDateField]){const h=E(l[this._gantt.parsedOptions.startDateField]);i=Math.min(i,h.getTime())}if(t&&l[this._gantt.parsedOptions.endDateField]){const h=E(l[this._gantt.parsedOptions.endDateField]);a=Math.max(a,h.getTime())}this._gantt.parsedOptions.tasksShowMode!==S.Sub_Tasks_Inline&&this._gantt.parsedOptions.tasksShowMode!==S.Sub_Tasks_Compact||l.children&&l.children.sort((h,p)=>E(h[this._gantt.parsedOptions.startDateField]).getTime()-E(p[this._gantt.parsedOptions.startDateField]).getTime())}e&&(this.minDate=E(i)),t&&(this.maxDate=E(a));const{unit:n,startOfWeek:r,step:o}=this._gantt.parsedOptions.reverseSortedTimelineScales[0];e&&(this._gantt.parsedOptions.minDate=Ve(new Date(i),n,r),this._gantt.parsedOptions._minDateTime=this._gantt.parsedOptions.minDate.getTime()),t&&(this._gantt.parsedOptions.maxDate=ut(this._gantt.parsedOptions.minDate,new Date(a),n,o),this._gantt.parsedOptions._maxDateTime=this._gantt.parsedOptions.maxDate.getTime())}}adjustOrder(e,t,i,a){var n,r;if(this._gantt.parsedOptions.tasksShowMode!==S.Sub_Tasks_Arrange&&this._gantt.parsedOptions.tasksShowMode!==S.Sub_Tasks_Compact||e!==i){if(this._gantt.parsedOptions.tasksShowMode===S.Sub_Tasks_Inline){if(N(t)&&N(a)&&N(e)&&N(i)){const o=this.records[e].children[t];this.records[e].children.splice(t,1),this.records[i].children||(this.records[i].children=[]),this.records[i].children.splice(a,0,o)}(r=(n=this.records[i])===null||n===void 0?void 0:n.children)===null||r===void 0||r.sort((o,d)=>E(o[this._gantt.parsedOptions.startDateField]).getTime()-E(d[this._gantt.parsedOptions.startDateField]).getTime())}else if(N(t)&&N(a)&&N(e)&&N(i)){const o=this.records[e].children[t];this.records[e].children.splice(t,1),this.records[i].children||(this.records[i].children=[]),this.records[i].children.splice(a,0,o)}}}setRecords(e){this.records=e,this.processRecords()}}function gs(s,e="vtable-gantt"){var t,i;const a=document.createElement("div");a.setAttribute("tabindex","0"),a.classList.add(e),a.style.outline="none",a.style.margin=`${s.top}px ${s.right}px ${s.bottom}px ${s.left}px`;const n=(a.offsetWidth||((t=a.parentElement)===null||t===void 0?void 0:t.offsetWidth)||1)-1,r=(a.offsetHeight||((i=a.parentElement)===null||i===void 0?void 0:i.offsetHeight)||1)-1;return a.style.width=n&&n-s.left-s.right+"px"||"0px",a.style.height=r&&r-s.top-s.bottom+"px"||"0px",a}class ct extends cs{constructor(e,t){var i,a,n,r,o;super(),this.parsedOptions={},this.container=e,this.options=t,this.taskTableWidth=typeof((i=t==null?void 0:t.taskListTable)===null||i===void 0?void 0:i.tableWidth)=="number"?(a=t==null?void 0:t.taskListTable)===null||a===void 0?void 0:a.tableWidth:-1,this.taskTableColumns=(r=(n=t==null?void 0:t.taskListTable)===null||n===void 0?void 0:n.columns)!==null&&r!==void 0?r:[],this.records=(o=t==null?void 0:t.records)!==null&&o!==void 0?o:[],this._sortScales(),Ci(this),this.data=new ps(this),this._generateTimeLineDateMap(),this.timeLineHeaderLevel=this.parsedOptions.sortedTimelineScales.length,this.element=gs({top:0,right:0,left:0,bottom:0},"vtable-gantt"),this.element.style.left=this.taskTableWidth?`${this.taskTableWidth}px`:"0px",this.canvas=document.createElement("canvas"),this.element.appendChild(this.canvas),this.context=this.canvas.getContext("2d"),e?(e.appendChild(this.element),this._updateSize()):this._updateSize(),this._generateListTable(),this._syncPropsFromTable(),Wi(this),this.scenegraph=new Vi(this),this.stateManager=new ds(this),this.eventManager=new Ji(this),this.scenegraph.afterCreateSceneGraph(),this._scrollToMarkLine()}renderTaskBarsTable(){this.scenegraph.updateNextFrame()}_updateSize(){var e,t,i,a,n,r,o,d;let l=0,h=0;if(F.mode==="browser"){const c=this.getElement();let g=0,_=0;if(c.parentElement){const b=c.parentElement.style||window.getComputedStyle(c.parentElement);g=c.parentElement.offsetWidth-parseInt(b.paddingLeft||"0px",10)-parseInt(b.paddingRight||"0px",10),_=c.parentElement.offsetHeight-parseInt(b.paddingTop||"0px",10)-parseInt(b.paddingBottom||"0px",20)}const L=(g??1)-1-this.taskTableWidth,m=(_??1)-1;c.style.width=L&&`${L}px`||"0px",c.style.height=m&&`${m}px`||"0px";const{canvas:v}=this;l=(t=(e=v.parentElement)===null||e===void 0?void 0:e.offsetWidth)!==null&&t!==void 0?t:1,h=(a=(i=v.parentElement)===null||i===void 0?void 0:i.offsetHeight)!==null&&a!==void 0?a:1,!((n=this==null?void 0:this.scenegraph)===null||n===void 0)&&n.stage?this.scenegraph.stage.resize(l,h):(v.style.width="",v.style.height="",v.width=l,v.height=h,v.style.width=`${l}px`,v.style.height=`${h}px`)}else F.mode;const p=Math.floor(l-xi(this.parsedOptions.scrollStyle)),u=Math.floor(h-Bi(this.parsedOptions.scrollStyle));if(this.tableNoFrameWidth=l,this.tableNoFrameHeight=Math.floor(h),this.parsedOptions.outerFrameStyle){const c=(r=this.parsedOptions.outerFrameStyle)===null||r===void 0?void 0:r.borderLineWidth;this.tableX=this.taskTableColumns.length>=1||!((o=this.options)===null||o===void 0)&&o.rowSeriesNumber?(d=this.parsedOptions.verticalSplitLine.lineWidth)!==null&&d!==void 0?d:0:c,this.tableY=c,this.tableNoFrameWidth=Math.min(p-c-this.tableX,this.getAllDateColsWidth()),this.tableNoFrameHeight=u-2*c}}_generateListTable(){var e,t,i,a,n,r,o,d,l,h,p;if(this.taskTableColumns.length>=1||!((e=this.options)===null||e===void 0)&&e.rowSeriesNumber){const u=this._generateListTableOptions();if(this.taskListTableInstance=new Vt(this.container,u),((i=(t=this.options)===null||t===void 0?void 0:t.taskListTable)===null||i===void 0?void 0:i.tableWidth)!=="auto"&&this.taskTableWidth!==-1||(this.taskTableWidth=this.taskListTableInstance.getAllColsWidth()+this.parsedOptions.outerFrameStyle.borderLineWidth,!((n=(a=this.options)===null||a===void 0?void 0:a.taskListTable)===null||n===void 0)&&n.maxTableWidth&&(this.taskTableWidth=Math.min((o=(r=this.options)===null||r===void 0?void 0:r.taskListTable)===null||o===void 0?void 0:o.maxTableWidth,this.taskTableWidth)),!((l=(d=this.options)===null||d===void 0?void 0:d.taskListTable)===null||l===void 0)&&l.minTableWidth&&(this.taskTableWidth=Math.max((p=(h=this.options)===null||h===void 0?void 0:h.taskListTable)===null||p===void 0?void 0:p.minTableWidth,this.taskTableWidth)),this.element.style.left=this.taskTableWidth?`${this.taskTableWidth}px`:"0px",this.taskListTableInstance.setCanvasSize(this.taskTableWidth,this.tableNoFrameHeight+2*this.parsedOptions.outerFrameStyle.borderLineWidth),this._updateSize()),this.taskListTableInstance.columnHeaderLevelCount>1)if(this.taskListTableInstance.columnHeaderLevelCount===this.parsedOptions.timeLineHeaderRowHeights.length)for(let c=0;c<this.taskListTableInstance.columnHeaderLevelCount;c++)this.taskListTableInstance.setRowHeight(c,this.parsedOptions.timeLineHeaderRowHeights[c]);else{const c=this.getAllHeaderRowsHeight()/this.taskListTableInstance.columnHeaderLevelCount;for(let g=0;g<this.taskListTableInstance.columnHeaderLevelCount;g++)this.taskListTableInstance.setRowHeight(g,c)}}}_generateListTableOptions(){var e,t,i,a,n,r,o,d,l,h,p,u,c,g,_,L,m,v,b,B,k,T,f,w,W,C,O,H,z,R,P,M,K,$,V,U,te,ie,se,ae,Z,q,he,ce,pe,ge,ue,be,_e,ve,me,ye,ke,fe,Se,Le,Te,we,Be,xe,Ce,Oe,De,He,We,Me;const x={},Pe=["container","records","rowSeriesNumber","overscrollBehavior","pixelRatio"];for(const D in this.options)Pe.indexOf(D)>=0&&(x[D]=this.options[D]);for(const D in this.options.taskListTable){if(x[D]=this.options.taskListTable[D],D==="columns"&&(x[D][x[D].length-1].disableColumnResize=!0,this.parsedOptions.tasksShowMode===S.Sub_Tasks_Inline||this.parsedOptions.tasksShowMode===S.Sub_Tasks_Separate||this.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange||this.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact))for(let Y=0;Y<x.columns.length;Y++)x.columns[Y].tree&&(x.columns[Y].tree=!1);D!=="hierarchyExpandLevel"||this.parsedOptions.tasksShowMode!==S.Sub_Tasks_Inline&&this.parsedOptions.tasksShowMode!==S.Sub_Tasks_Separate&&this.parsedOptions.tasksShowMode!==S.Sub_Tasks_Arrange&&this.parsedOptions.tasksShowMode!==S.Sub_Tasks_Compact||delete x[D]}if(!((e=this.options.taskListTable)===null||e===void 0)&&e.theme)if(x.theme=(t=this.options.taskListTable)===null||t===void 0?void 0:t.theme,x.theme.bodyStyle&&!pi(x.theme,"bodyStyle")){x.theme=((i=this.options.taskListTable)===null||i===void 0?void 0:i.theme).extends(((a=this.options.taskListTable)===null||a===void 0?void 0:a.theme).getExtendTheme());const D=x.theme.getExtendTheme();x.theme.clearBodyStyleCache(),!((n=x.theme.headerStyle)===null||n===void 0)&&n.bgColor||(D.headerStyle?D.headerStyle.bgColor||(D.headerStyle.bgColor=this.parsedOptions.timelineHeaderBackgroundColor):D.headerStyle={bgColor:this.parsedOptions.timelineHeaderBackgroundColor}),D.bodyStyle?D.bodyStyle.frameStyle={borderLineWidth:[(o=(r=this.parsedOptions.horizontalSplitLine)===null||r===void 0?void 0:r.lineWidth)!==null&&o!==void 0?o:0,0,0,0],borderColor:(d=this.parsedOptions.horizontalSplitLine)===null||d===void 0?void 0:d.lineColor}:D.bodyStyle={frameStyle:{borderLineWidth:[(h=(l=this.parsedOptions.horizontalSplitLine)===null||l===void 0?void 0:l.lineWidth)!==null&&h!==void 0?h:0,0,0,0],borderColor:(p=this.parsedOptions.horizontalSplitLine)===null||p===void 0?void 0:p.lineColor}},D.cellInnerBorder=!1,D.frameStyle=Object.assign({},this.parsedOptions.outerFrameStyle,{shadowBlur:0,cornerRadius:[(c=(u=this.parsedOptions.outerFrameStyle)===null||u===void 0?void 0:u.cornerRadius)!==null&&c!==void 0?c:0,0,0,(_=(g=this.parsedOptions.outerFrameStyle)===null||g===void 0?void 0:g.cornerRadius)!==null&&_!==void 0?_:0],borderLineWidth:[(m=(L=this.parsedOptions.outerFrameStyle)===null||L===void 0?void 0:L.borderLineWidth)!==null&&m!==void 0?m:0,0,(b=(v=this.parsedOptions.outerFrameStyle)===null||v===void 0?void 0:v.borderLineWidth)!==null&&b!==void 0?b:0,(k=(B=this.parsedOptions.outerFrameStyle)===null||B===void 0?void 0:B.borderLineWidth)!==null&&k!==void 0?k:0]}),D.scrollStyle=Object.assign({},(f=(T=this.options.taskListTable)===null||T===void 0?void 0:T.theme)===null||f===void 0?void 0:f.scrollStyle,this.parsedOptions.scrollStyle,{verticalVisible:"none"}),D.columnResize=Object.assign({labelColor:"rgba(0,0,0,0)",labelBackgroundFill:"rgba(0,0,0,0)"},D==null?void 0:D.columnResize),D.underlayBackgroundColor||(D.underlayBackgroundColor=this.parsedOptions.underlayBackgroundColor)}else x.theme.headerStyle?x.theme.headerStyle.bgColor||(x.theme.headerStyle.bgColor=this.parsedOptions.timelineHeaderBackgroundColor):x.theme.headerStyle={bgColor:this.parsedOptions.timelineHeaderBackgroundColor},x.theme.headerStyle=Object.assign({},Ne.headerStyle,{bgColor:this.parsedOptions.timelineHeaderBackgroundColor},(W=(w=this.options.taskListTable)===null||w===void 0?void 0:w.theme)===null||W===void 0?void 0:W.headerStyle),x.theme.bodyStyle=Object.assign({},Ne.bodyStyle,(O=(C=this.options.taskListTable)===null||C===void 0?void 0:C.theme)===null||O===void 0?void 0:O.bodyStyle,{frameStyle:{borderLineWidth:[(z=(H=this.parsedOptions.horizontalSplitLine)===null||H===void 0?void 0:H.lineWidth)!==null&&z!==void 0?z:0,0,0,0],borderColor:(R=this.parsedOptions.horizontalSplitLine)===null||R===void 0?void 0:R.lineColor}}),x.theme.cellInnerBorder=!1,x.theme.frameStyle=Object.assign({},this.parsedOptions.outerFrameStyle,{cornerRadius:[(M=(P=this.parsedOptions.outerFrameStyle)===null||P===void 0?void 0:P.cornerRadius)!==null&&M!==void 0?M:0,0,0,($=(K=this.parsedOptions.outerFrameStyle)===null||K===void 0?void 0:K.cornerRadius)!==null&&$!==void 0?$:0],borderLineWidth:[(U=(V=this.parsedOptions.outerFrameStyle)===null||V===void 0?void 0:V.borderLineWidth)!==null&&U!==void 0?U:0,0,(ie=(te=this.parsedOptions.outerFrameStyle)===null||te===void 0?void 0:te.borderLineWidth)!==null&&ie!==void 0?ie:0,(ae=(se=this.parsedOptions.outerFrameStyle)===null||se===void 0?void 0:se.borderLineWidth)!==null&&ae!==void 0?ae:0]}),x.theme.scrollStyle=Object.assign({},(q=(Z=this.options.taskListTable)===null||Z===void 0?void 0:Z.theme)===null||q===void 0?void 0:q.scrollStyle,this.parsedOptions.scrollStyle,{verticalVisible:"none"}),x.theme.columnResize=Object.assign({labelColor:"rgba(0,0,0,0)",labelBackgroundFill:"rgba(0,0,0,0)"},(ce=(he=this.options.taskListTable)===null||he===void 0?void 0:he.theme)===null||ce===void 0?void 0:ce.columnResize),x.theme.underlayBackgroundColor||(x.theme.underlayBackgroundColor=this.parsedOptions.underlayBackgroundColor);else x.theme={scrollStyle:Object.assign({},(ge=(pe=this.options.taskListTable)===null||pe===void 0?void 0:pe.theme)===null||ge===void 0?void 0:ge.scrollStyle,this.parsedOptions.scrollStyle,{verticalVisible:"none"}),headerStyle:Object.assign({},Ne.headerStyle,{bgColor:this.parsedOptions.timelineHeaderBackgroundColor},(be=(ue=this.options.taskListTable)===null||ue===void 0?void 0:ue.theme)===null||be===void 0?void 0:be.headerStyle),bodyStyle:Object.assign({},Ne.bodyStyle,(ve=(_e=this.options.taskListTable)===null||_e===void 0?void 0:_e.theme)===null||ve===void 0?void 0:ve.bodyStyle,{frameStyle:{borderLineWidth:[(ye=(me=this.parsedOptions.horizontalSplitLine)===null||me===void 0?void 0:me.lineWidth)!==null&&ye!==void 0?ye:0,0,0,0],borderColor:(ke=this.parsedOptions.horizontalSplitLine)===null||ke===void 0?void 0:ke.lineColor}}),cellInnerBorder:!1,frameStyle:Object.assign({},this.parsedOptions.outerFrameStyle,{cornerRadius:[(Se=(fe=this.parsedOptions.outerFrameStyle)===null||fe===void 0?void 0:fe.cornerRadius)!==null&&Se!==void 0?Se:0,0,0,(Te=(Le=this.parsedOptions.outerFrameStyle)===null||Le===void 0?void 0:Le.cornerRadius)!==null&&Te!==void 0?Te:0],borderLineWidth:[(Be=(we=this.parsedOptions.outerFrameStyle)===null||we===void 0?void 0:we.borderLineWidth)!==null&&Be!==void 0?Be:0,0,(Ce=(xe=this.parsedOptions.outerFrameStyle)===null||xe===void 0?void 0:xe.borderLineWidth)!==null&&Ce!==void 0?Ce:0,(De=(Oe=this.parsedOptions.outerFrameStyle)===null||Oe===void 0?void 0:Oe.borderLineWidth)!==null&&De!==void 0?De:0]}),columnResize:Object.assign({labelColor:"rgba(0,0,0,0)",labelBackgroundFill:"rgba(0,0,0,0)"},(We=(He=this.options.taskListTable)===null||He===void 0?void 0:He.theme)===null||We===void 0?void 0:We.columnResize),underlayBackgroundColor:this.parsedOptions.underlayBackgroundColor};return x.canvasWidth=this.taskTableWidth,x.canvasHeight=this.canvas.height,x.defaultHeaderRowHeight=this.getAllHeaderRowsHeight(),this.parsedOptions.tasksShowMode===S.Sub_Tasks_Separate?(x.customComputeRowHeight=D=>{var Y;const{row:ne,table:re}=D;return(((Y=re.getRecordByRowCol(0,ne).children)===null||Y===void 0?void 0:Y.length)||1)*this.parsedOptions.rowHeight},x.defaultRowHeight="auto"):this.parsedOptions.tasksShowMode===S.Sub_Tasks_Compact?(x.customComputeRowHeight=D=>{const{row:Y,table:ne}=D,re=ne.getRecordByRowCol(0,Y);return Ot(this,re)*this.parsedOptions.rowHeight},x.defaultRowHeight="auto"):this.parsedOptions.tasksShowMode===S.Sub_Tasks_Arrange?(x.customComputeRowHeight=D=>{const{row:Y,table:ne}=D,re=ne.getRecordByRowCol(0,Y);return Dt(this,re)*this.parsedOptions.rowHeight},x.defaultRowHeight="auto"):x.defaultRowHeight=(Me=this.options.rowHeight)!==null&&Me!==void 0?Me:40,x.clearDOM=!1,x}getElement(){return this.element}getContainer(){return this.element.parentElement}_sortScales(){const{timelineHeader:e}=this.options;if(e){const t=e.scales,i=["year","quarter","month","week","day","hour","minute","second"];t.length===1&&(t[0].unit!=="hour"&&t[0].unit!=="minute"&&t[0].unit!=="second"||(this.parsedOptions.timeScaleIncludeHour=!0));const a=t.slice().sort((r,o)=>{r.unit!=="hour"&&r.unit!=="minute"&&r.unit!=="second"||(this.parsedOptions.timeScaleIncludeHour=!0);const d=i.indexOf(r.unit),l=i.indexOf(o.unit);return d===-1?1:l===-1?-1:d-l}),n=t.slice().sort((r,o)=>{const d=i.indexOf(r.unit),l=i.indexOf(o.unit);return d===-1?1:l===-1?-1:l-d});this.parsedOptions.sortedTimelineScales=a,this.parsedOptions.reverseSortedTimelineScales=n}}_generateTimeLineDateMap(){if(this.parsedOptions.minDate&&this.parsedOptions.maxDate)for(const e of this.parsedOptions.reverseSortedTimelineScales)e.timelineDates=Di(new Date(this.parsedOptions.minDate),this.parsedOptions.maxDate,e)}getRowHeightByIndex(e){return this.taskListTableInstance?this.taskListTableInstance.getRowHeight(e+this.taskListTableInstance.columnHeaderLevelCount):this.parsedOptions.rowHeight}getRowsHeightByIndex(e,t){return this.taskListTableInstance?this.taskListTableInstance.getRowsHeight(e+this.taskListTableInstance.columnHeaderLevelCount,t+this.taskListTableInstance.columnHeaderLevelCount):this.parsedOptions.rowHeight*(t-e+1)}getAllRowsHeight(){return this.taskListTableInstance?this.taskListTableInstance.getAllRowsHeight():this.getAllHeaderRowsHeight()+this.itemCount*this.parsedOptions.rowHeight}getAllHeaderRowsHeight(){return this.parsedOptions.timeLineHeaderRowHeights.reduce((e,t,i)=>e+t,0)}getAllDateColsWidth(){var e,t;return this.parsedOptions.timelineColWidth*((t=(e=this.parsedOptions.reverseSortedTimelineScales[0].timelineDates)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0)}getAllTaskBarsHeight(){return this.taskListTableInstance?this.taskListTableInstance.getRowsHeight(this.taskListTableInstance.columnHeaderLevelCount,this.taskListTableInstance.rowCount-1):this.itemCount*this.parsedOptions.rowHeight}getTaskShowIndexByRecordIndex(e){return this.taskListTableInstance.getBodyRowIndexByRecordIndex(e)}getRecordByIndex(e,t){var i,a;return N(t)?(a=(i=this.records[e])===null||i===void 0?void 0:i.children)===null||a===void 0?void 0:a[t]:this.taskListTableInstance?this.taskListTableInstance.getRecordByRowCol(0,e+this.taskListTableInstance.columnHeaderLevelCount):this.records[e]}_refreshTaskBar(e){this.scenegraph.taskBar.updateTaskBarNode(e),this.scenegraph.refreshRecordLinkNodes(e,void 0,this.scenegraph.taskBar.getTaskBarNodeByIndex(e)),this.scenegraph.updateNextFrame()}_updateRecordToListTable(e,t){const i=this.taskListTableInstance.getRecordIndexByCell(0,t+this.taskListTableInstance.columnHeaderLevelCount);this.taskListTableInstance.updateRecords([e],[i])}getTaskInfoByTaskListIndex(e,t){const i=this.getRecordByIndex(e,t),a=this.parsedOptions.startDateField,n=this.parsedOptions.endDateField,r=this.parsedOptions.progressField,o=E(i==null?void 0:i[a]).getTime(),d=E(i==null?void 0:i[n]).getTime();if(d<this.parsedOptions._minDateTime||o>this.parsedOptions._maxDateTime||!(i!=null&&i[a])||!(i!=null&&i[n]))return{taskDays:0,progress:0,startDate:null,endDate:null,taskRecord:i};const l=Hi(i[r]);let h,p;return this.parsedOptions.timeScaleIncludeHour?(h=E(Math.min(Math.max(this.parsedOptions._minDateTime,o),this.parsedOptions._maxDateTime)),p=wt(Math.max(Math.min(this.parsedOptions._maxDateTime,d),this.parsedOptions._minDateTime),!0)):(h=E(Math.min(Math.max(this.parsedOptions._minDateTime,o),this.parsedOptions._maxDateTime),!0),p=le(Math.max(Math.min(this.parsedOptions._maxDateTime,d),this.parsedOptions._minDateTime),!0)),{taskRecord:i,taskDays:(p.getTime()-h.getTime()+1)/864e5,startDate:h,endDate:p,progress:l}}_updateStartDateToTaskRecord(e,t,i){var a;const n=this.getRecordByIndex(t,i),r=this.parsedOptions.startDateField,o=(a=this.parsedOptions.dateFormat)!==null&&a!==void 0?a:Ge(n[r]),d=de(e,o);n[r]=d,N(i)||this._updateRecordToListTable(n,t)}_updateEndDateToTaskRecord(e,t,i){var a;const n=this.getRecordByIndex(t,i),r=this.parsedOptions.endDateField,o=(a=this.parsedOptions.dateFormat)!==null&&a!==void 0?a:Ge(n[r]),d=de(e,o);n[r]=d,N(i)||this._updateRecordToListTable(n,t)}_updateStartEndDateToTaskRecord(e,t,i,a){var n;const r=this.getRecordByIndex(i,a),o=this.parsedOptions.startDateField,d=this.parsedOptions.endDateField,l=(n=this.parsedOptions.dateFormat)!==null&&n!==void 0?n:Ge(r[o]),h=de(e,l);r[o]=h;const p=de(t,l);r[d]=p,N(a)||this._updateRecordToListTable(r,i)}_dragOrderTaskRecord(e,t,i,a){this.data.adjustOrder(e,t,i,a)}updateTaskRecord(e,t){this._updateRecordToListTable(e,t),this._refreshTaskBar(t)}setPixelRatio(e){var t;(t=this.taskListTableInstance)===null||t===void 0||t.setPixelRatio(e),this.parsedOptions.pixelRatio=e,this.scenegraph.setPixelRatio(e)}_resize(){var e;this._updateSize(),(e=this.taskListTableInstance)===null||e===void 0||e.setCanvasSize(this.taskTableWidth,this.tableNoFrameHeight+2*this.parsedOptions.outerFrameStyle.borderLineWidth),this._syncPropsFromTable(),this.scenegraph.resize(),gt(this)}_syncPropsFromTable(){this.itemCount=this.taskListTableInstance?this.taskListTableInstance.rowCount-this.taskListTableInstance.columnHeaderLevelCount:this.records.length,this.headerHeight=this.getAllHeaderRowsHeight(),this.drawHeight=Math.min(this.getAllRowsHeight(),this.tableNoFrameHeight),this.gridHeight=this.drawHeight-this.headerHeight}getContext(){return this.context}release(){var e,t;(e=super.release)===null||e===void 0||e.call(this),this.eventManager.release(),(t=this.taskListTableInstance)===null||t===void 0||t.release();const{parentElement:i}=this.element;i&&(i.removeChild(this.element),this.verticalSplitResizeLine&&i.removeChild(this.verticalSplitResizeLine),this.horizontalSplitLine&&i.removeChild(this.horizontalSplitLine)),this.scenegraph=null}setRecords(e){this.records=e,this.data.setRecords(e),this.taskListTableInstance.setRecords(e),this._syncPropsFromTable(),this._generateTimeLineDateMap(),this.timeLineHeaderLevel=this.parsedOptions.sortedTimelineScales.length,this._updateSize(),this.scenegraph.refreshAll(),this.verticalSplitResizeLine.style.height=this.drawHeight+"px";const t=this.stateManager.scroll.horizontalBarPos,i=this.stateManager.scroll.verticalBarPos;this.scenegraph.setX(-t),this.scenegraph.setY(-i)}updateScales(e){if(this.options.timelineHeader.scales=e,this._sortScales(),Oi(this),this._generateTimeLineDateMap(),this.timeLineHeaderLevel=this.parsedOptions.sortedTimelineScales.length,this.scenegraph.refreshAll(),gt(this),this.taskListTableInstance)if(this.taskListTableInstance.columnHeaderLevelCount===this.parsedOptions.timeLineHeaderRowHeights.length)for(let t=0;t<this.taskListTableInstance.columnHeaderLevelCount;t++)this.taskListTableInstance.setRowHeight(t,this.parsedOptions.timeLineHeaderRowHeights[t]);else{const t=this.getAllHeaderRowsHeight()/this.taskListTableInstance.columnHeaderLevelCount;for(let i=0;i<this.taskListTableInstance.columnHeaderLevelCount;i++)this.taskListTableInstance.setRowHeight(i,t)}}_scrollToMarkLine(){if(this.parsedOptions.scrollToMarkLineDate&&this.parsedOptions.minDate){const e=this.parsedOptions.minDate,{unit:t,step:i}=this.parsedOptions.reverseSortedTimelineScales[0],a=j(this.parsedOptions.scrollToMarkLineDate,e,t,i)*this.parsedOptions.timelineColWidth-this.tableNoFrameWidth/2;this.stateManager.setScrollLeft(a)}}addLink(e){this.parsedOptions.dependencyLinks.push(e),this.scenegraph.dependencyLink.initLinkLine(this.parsedOptions.dependencyLinks.length-1),this.scenegraph.updateNextFrame()}deleteLink(e){const t=this.parsedOptions.dependencyLinks.findIndex(i=>i.type===e.type&&i.linkedFromTaskKey===e.linkedFromTaskKey&&i.linkedToTaskKey===e.linkedToTaskKey);if(t!==-1){const i=this.parsedOptions.dependencyLinks[t];this.parsedOptions.dependencyLinks.splice(t,1),this.scenegraph.dependencyLink.deleteLink(i),this.scenegraph.updateNextFrame()}}get scrollTop(){return this.stateManager.scrollTop}set scrollTop(e){this.stateManager.setScrollTop(e)}get scrollLeft(){return this.stateManager.scrollLeft}set scrollLeft(e){this.stateManager.setScrollLeft(e)}getTaskBarRelativeRect(e){const t=this.scenegraph.taskBar.getTaskBarNodeByIndex(e);return{left:t.attribute.x+this.taskListTableInstance.tableNoFrameWidth+this.taskListTableInstance.tableX+this.tableX-this.scrollLeft,top:t.attribute.y+this.tableY+this.headerHeight-this.scrollTop,width:t.attribute.width,height:t.attribute.height}}getMinScaleUnitToDays(){var e;const t=this.parsedOptions.reverseSortedTimelineScales[0],i=t.unit,a=(e=t.step)!==null&&e!==void 0?e:1;return i==="day"?a:i==="week"?7*a:i==="month"?30*a:i==="quarter"?90*a:i==="year"?365*a:i==="hour"?1/24*a:i==="minute"?1/24/60*a:i==="second"?1/24/60/60*a:1}getDateColWidth(e){return this.parsedOptions.timelineColWidth}getDateColsWidth(e,t){return(t-e+1)*this.parsedOptions.timelineColWidth}getDateRangeByIndex(e){const t=this.parsedOptions.reverseSortedTimelineScales[0];return{startDate:t.timelineDates[e].startDate,endDate:t.timelineDates[e].endDate}}parseTimeFormat(e){return Ge(e)}}class Mt{constructor(e){this.editorType="Input",this.editorConfig=e}createElement(){var e;const t=document.createElement("input");t.setAttribute("type","text"),!((e=this.editorConfig)===null||e===void 0)&&e.readonly&&t.setAttribute("readonly",`${this.editorConfig.readonly}`),t.style.position="absolute",t.style.padding="4px",t.style.width="100%",t.style.boxSizing="border-box",t.style.backgroundColor="#FFFFFF",this.element=t,this.container.appendChild(t),t.addEventListener("keydown",i=>{i.key==="a"&&(i.ctrlKey||i.metaKey)&&i.stopPropagation()})}setValue(e){this.element.value=e!==void 0?e:""}getValue(){return this.element.value}onStart({value:e,referencePosition:t,container:i,endEdit:a}){this.container=i,this.successCallback=a,this.element||(this.createElement(),e!=null&&this.setValue(e),t!=null&&t.rect&&this.adjustPosition(t.rect)),this.element.focus()}adjustPosition(e){this.element.style.top=e.top+"px",this.element.style.left=e.left+"px",this.element.style.width=e.width+"px",this.element.style.height=e.height+"px"}endEditing(){}onEnd(){var e;!((e=this.container)===null||e===void 0)&&e.contains(this.element)&&this.container.removeChild(this.element),this.element=void 0}isEditorElement(e){return e===this.element}}class us extends Mt{constructor(e){super(e),this.editorType="DateInput",this.editorConfig=e}createElement(){const e=document.createElement("input");e.setAttribute("type","date"),e.style.padding="4px",e.style.width="100%",e.style.boxSizing="border-box",e.style.position="absolute",e.style.backgroundColor="#FFFFFF",this.element=e,this.container.appendChild(e),e.addEventListener("keydown",t=>{t.key==="a"&&(t.ctrlKey||t.metaKey)&&t.stopPropagation()})}}const bs=[{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-15",progress:31,priority:"P0",children:[{id:2,title:"Project Feature Review",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-07-24",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-25",end:"2024-07-26",progress:100,priority:"P1"},{id:3,title:"Project Create",developer:"liufangfang.jane@bytedance.com",start:"2024-07-27",end:"2024-07-26",progress:100,priority:"P1"},{id:3,title:"Develop feature 1",developer:"liufangfang.jane@bytedance.com",start:"2024-08-01",end:"2024-08-15",progress:0,priority:"P1"}]},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-01",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:100,priority:"P1",children:[{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-08-01",end:"2024-08-01",progress:90,priority:"P0"},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-30",end:"2024-08-04",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024.07.26",end:"2024.07.08",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1"},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"07.24.2024",end:"08.04.2024",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-16",end:"2024-07-18",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-08-09",end:"2024-09-11",progress:100,priority:"P1"}]},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-26",end:"2024-07-28",progress:60,priority:"P0",children:[{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1",children:[{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-26",end:"2024-07-28",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1"}]},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0",children:[{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-06",end:"2024-07-08",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1"}]},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-26",end:"2024-07-28",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1",children:[{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-06",end:"2024-07-08",progress:60,priority:"P0"}]},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-26",end:"2024-07-28",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1"}]},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1",children:[{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-23",end:"2024-07-28",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1"},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-30",end:"2024-08-14",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:60,priority:"P0"}]},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0",children:[{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:100,priority:"P1"},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-08-04",end:"2024-08-04",progress:90,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"07/24/2024",end:"08/04/2024",progress:60,priority:"P0"}]},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-27",end:"2024-07-28",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1",children:[{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"07.24.2024",end:"08.04.2024",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-26",end:"2024-07-28",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-08-09",end:"2024-09-11",progress:100,priority:"P1"},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-26",end:"2024-07-28",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1"},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-26",end:"2024-07-28",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1"}]},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0",children:[{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:100,priority:"P1"},{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024.07.06",end:"2024.07.08",progress:60,priority:"P0"},{id:3,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-29",end:"2024-07-31",progress:100,priority:"P1"}]}],_s=[{id:1,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-15",end:"2024-07-16",progress:31,priority:"P0"},{id:2,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-16",end:"2024-07-17",progress:60,priority:"P0"},{id:3,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-18",end:"2024-07-19",progress:90,priority:"P0"},{id:4,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024/07/17",end:"2024/07/18",progress:100,priority:"P1"},{id:5,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"07/19/2024",end:"07/20/2024",progress:60,priority:"P0"},{id:6,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:100,priority:"P1"},{id:7,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0"},{id:8,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024.07.06",end:"2024.07.08",progress:60,priority:"P0"},{id:9,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024/07/09",end:"2024/07/11",progress:100,priority:"P1"},{id:10,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"07.24.2024",end:"08.04.2024",progress:31,priority:"P0"},{id:11,title:"Software Development",developer:"liufangfang.jane@bytedance.com",start:"2024-07-24",end:"2024-08-04",progress:31,priority:"P0"},{id:12,title:"Scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-06",end:"2024-07-08",progress:60,priority:"P0"},{id:13,title:"Determine project scope",developer:"liufangfang.jane@bytedance.com",start:"2024-07-09",end:"2024-07-11",progress:100,priority:"P1"}],vs=[{id:1,title:"Project Task 1",developer:"bear.xiong",avatar:"https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/VTable/custom-render/bear.jpg",start:"2024-07-24",end:"2024-07-26",progress:31,priority:"P0"},{id:2,title:"Project Task 2",developer:"wolf.lang",avatar:"https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/VTable/custom-render/wolf.jpg",start:"07/25/2024",end:"07/28/2024",progress:60,priority:"P0"},{id:3,title:"Project Task 3",developer:"rabbit.tu",avatar:"https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/VTable/custom-render/rabbit.jpg",start:"2024-07-28",end:"2024-08-01",progress:100,priority:"P1"},{id:1,title:"Project Task 4",developer:"cat.mao",avatar:"https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/VTable/custom-render/cat.jpg",start:"2024-07-31",end:"2024-08-03",progress:31,priority:"P0"},{id:2,title:"Project Task 5",developer:"bird.niao",avatar:"https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/VTable/custom-render/bird.jpeg",start:"2024-08-02",end:"2024-08-04",progress:60,priority:"P0"},{id:3,title:"Project Task 6",developer:"flower.hua",avatar:"https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/VTable/custom-render/flower.jpg",start:"2024-08-03",end:"2024-08-10",progress:100,priority:"P1"}],ws=$t({name:"plugin_gantt_vtable",__name:"index",setup(s){const e=Ut(),t=new Mt,i=new us;mt("input",t),mt("date-input",i);const a=Ae(),n=Ae(),r=Ae(),o=Ae(),d=Ae(),l=Ae(),p={overscrollBehavior:"none",records:bs,taskListTable:{columns:[{field:"title",title:"title",width:"auto",sort:!0,tree:!0,editor:"input"},{field:"start",title:"start",width:"auto",sort:!0,editor:"date-input"},{field:"end",title:"end",width:"auto",sort:!0,editor:"date-input"},{field:"priority",title:"priority",width:"auto",sort:!0,editor:"input"},{field:"progress",title:"progress",width:"auto",sort:!0,headerStyle:{borderColor:"#e1e4e8"},style:{borderColor:"#e1e4e8",color:"green"},editor:"input"}],tableWidth:250,minTableWidth:100,maxTableWidth:600},frame:{outerFrameStyle:{borderLineWidth:2,borderColor:"#e1e4e8",cornerRadius:8},verticalSplitLine:{lineColor:"#e1e4e8",lineWidth:3},horizontalSplitLine:{lineColor:"#e1e4e8",lineWidth:3},verticalSplitLineMoveable:!0,verticalSplitLineHighlight:{lineColor:"green",lineWidth:3}},grid:{verticalLine:{lineWidth:1,lineColor:"#e1e4e8"},horizontalLine:{lineWidth:1,lineColor:"#e1e4e8"}},headerRowHeight:40,rowHeight:40,taskBar:{startDateField:"start",endDateField:"end",progressField:"progress",moveable:!0,hoverBarStyle:{barOverlayColor:"rgba(99, 144, 0, 0.4)"},labelText:"{title} {progress}%",labelTextStyle:{fontFamily:"Arial",fontSize:16,textAlign:"left",textOverflow:"ellipsis"},barStyle:{width:20,barColor:"#ee8800",completedBarColor:"#91e8e0",cornerRadius:8}},timelineHeader:{colWidth:100,backgroundColor:"#EEF1F5",horizontalLine:{lineWidth:1,lineColor:"#e1e4e8"},verticalLine:{lineWidth:1,lineColor:"#e1e4e8"},scales:[{unit:"week",step:1,startOfWeek:"sunday",format(k){return`Week ${k.dateIndex}`},style:{fontSize:20,fontWeight:"bold",color:"white",strokeColor:"black",textAlign:"right",textBaseline:"bottom",textStick:!0}},{unit:"day",step:1,format(k){return k.dateIndex.toString()},style:{fontSize:20,fontWeight:"bold",color:"white",strokeColor:"black",textAlign:"right",textBaseline:"bottom"}}]},markLine:[{date:"2024-07-28",style:{lineWidth:1,lineColor:"blue",lineDash:[8,4]}},{date:"2024-08-17",style:{lineWidth:2,lineColor:"red",lineDash:[8,4]}}],rowSeriesNumber:{title:"行号",dragOrder:!0},scrollStyle:{scrollRailColor:"RGBA(246,246,246,0.5)",visible:"scrolling",width:6,scrollSliderCornerRadius:2,scrollSliderColor:"#5cb85c"}},c={records:_s,taskListTable:{columns:[{field:"title",title:"title",width:"auto",tree:!0},{field:"start",title:"start",width:"auto",editor:"date-input"},{field:"end",title:"end",width:"auto",editor:"date-input"},{field:"priority",title:"priority",width:"auto",editor:"input"},{field:"progress",title:"progress",width:"auto",headerStyle:{borderColor:"#e1e4e8"},style:{borderColor:"#e1e4e8",color:"green"},editor:"input"}],tableWidth:400,minTableWidth:100,maxTableWidth:600},dependency:{links:[{type:X.FinishToStart,linkedFromTaskKey:1,linkedToTaskKey:2},{type:X.StartToFinish,linkedFromTaskKey:2,linkedToTaskKey:3},{type:X.StartToStart,linkedFromTaskKey:3,linkedToTaskKey:4},{type:X.FinishToFinish,linkedFromTaskKey:4,linkedToTaskKey:5}],linkSelectedLineStyle:{shadowBlur:5,shadowColor:"red",lineColor:"red",lineWidth:1}},frame:{verticalSplitLineMoveable:!0,outerFrameStyle:{borderLineWidth:2,cornerRadius:8},verticalSplitLine:{lineWidth:3,lineColor:"#e1e4e8"},verticalSplitLineHighlight:{lineColor:"green",lineWidth:3}},grid:{verticalLine:{lineWidth:1,lineColor:"#e1e4e8"},horizontalLine:{lineWidth:1,lineColor:"#e1e4e8"}},headerRowHeight:60,rowHeight:40,taskBar:{startDateField:"start",endDateField:"end",progressField:"progress",labelText:"{title} {progress}%",labelTextStyle:{fontFamily:"Arial",fontSize:16,textAlign:"left"},barStyle:{width:20,barColor:"#ee8800",completedBarColor:"#91e8e0",cornerRadius:10},selectedBarStyle:{shadowBlur:5,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"black",borderColor:"red",borderLineWidth:1}},timelineHeader:{verticalLine:{lineWidth:1,lineColor:"#e1e4e8"},horizontalLine:{lineWidth:1,lineColor:"#e1e4e8"},backgroundColor:"#EEF1F5",colWidth:60,scales:[{unit:"week",step:1,startOfWeek:"sunday",format(k){return`Week ${k.dateIndex}`},style:{fontSize:20,fontWeight:"bold",color:"red"}},{unit:"day",step:1,format(k){return k.dateIndex.toString()},style:{fontSize:20,fontWeight:"bold",color:"red"}}]},minDate:"2024-07-14",maxDate:"2024-10-15",rowSeriesNumber:{title:"行号",dragOrder:!0},scrollStyle:{visible:"scrolling"},overscrollBehavior:"none"},g=["#aecde6","#c6a49a","#ffb582","#eec1de","#b3d9b3","#cccccc","#e59a9c","#d9d1a5","#c9bede"],_=["#1f77b4","#8c564b","#ff7f0e","#e377c2","#2ca02c","#7f7f7f","#d62728","#bcbd22","#9467bd"],m={records:vs,taskListTable:{columns:[{field:"title",title:"TASK",width:"200",headerStyle:{textAlign:"center",fontSize:20,fontWeight:"bold"},style:{},customLayout:k=>{const{table:T,row:f,col:w,rect:W}=k,C=T.getCellOriginRecord(w,f),{height:O,width:H}=W??T.getCellRect(w,f),z=new I({y:10,x:20,height:O-20,width:H-40,fill:"#ddd",display:"flex",flexDirection:"column",cornerRadius:30}),R=new oe({text:C.developer,fontSize:16,fontFamily:"sans-serif",fill:_[k.row],fontWeight:"bold",maxLineWidth:H-120,boundsPadding:[10,0,0,0],alignSelf:"center"});z.add(R);const P=new oe({text:`${de(new Date(C.start),"mm/dd")}-${de(new Date(C.end),"mm/dd")}`,fontSize:12,fontFamily:"sans-serif",fontWeight:"bold",fill:"black",boundsPadding:[10,0,0,0],alignSelf:"center"});return z.add(P),{rootContainer:z,expectedWidth:160}}}],tableWidth:"auto"},frame:{outerFrameStyle:{borderLineWidth:2,borderColor:"#E1E4E8",cornerRadius:8}},grid:{horizontalLine:{lineWidth:2,lineColor:"#d5d9ee"}},headerRowHeight:60,rowHeight:80,taskBar:{startDateField:"start",endDateField:"end",progressField:"progress",barStyle:{width:60},customLayout:k=>{const T=_.length,{width:f,height:w,index:W,taskDays:C,progress:O,taskRecord:H}=k,z=new I({width:f,height:w,cornerRadius:30,fill:{gradient:"linear",x0:0,y0:0,x1:1,y1:0,stops:[{offset:0,color:g[W%T]},{offset:.5,color:_[W%T]},{offset:1,color:g[W%T]}]},display:"flex",flexDirection:"row",flexWrap:"nowrap"}),R=new I({height:w,width:60,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around"});z.add(R);const P=new Ye({width:50,height:50,image:H.avatar,cornerRadius:25});R.add(P);const M=new I({height:w,width:f-120,display:"flex",flexDirection:"column"});z.add(M);const K=new oe({text:H.developer,fontSize:16,fontFamily:"sans-serif",fill:"white",fontWeight:"bold",maxLineWidth:f-120,boundsPadding:[10,0,0,0]});M.add(K);const $=new oe({text:`${C}天`,fontSize:13,fontFamily:"sans-serif",fill:"white",boundsPadding:[10,0,0,0]});if(M.add($),f>=120){const V=new I({cornerRadius:20,fill:"white",height:40,width:40,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",boundsPadding:[10,0,0,0]});z.add(V);const U=new oe({text:`${O}%`,fontSize:12,fontFamily:"sans-serif",fill:"black",alignSelf:"center",fontWeight:"bold",maxLineWidth:(f-60)/2,boundsPadding:[0,0,0,0]});V.add(U)}return{rootContainer:z}},hoverBarStyle:{cornerRadius:30}},timelineHeader:{backgroundColor:"#f0f0fb",colWidth:80,scales:[{unit:"day",step:1,format(k){return k.dateIndex.toString()},customLayout:k=>{const{width:T,height:f,startDate:w,dateIndex:W}=k,C=new I({width:T,height:f,display:"flex",flexDirection:"row",flexWrap:"nowrap"}),O=new I({height:f,width:30,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around"});C.add(O);const H=new Ye({width:20,height:30,image:'<svg t="1724675965803" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4299" width="200" height="200"><path d="M53.085678 141.319468C23.790257 141.319468 0 165.035326 0 194.34775L0 918.084273C0 947.295126 23.796789 971.112572 53.085678 971.112572L970.914322 971.112572C1000.209743 971.112572 1024 947.396696 1024 918.084273L1024 194.34775C1024 165.136896 1000.203211 141.319468 970.914322 141.319468L776.827586 141.319468 812.137931 176.629813 812.137931 88.275862C812.137931 68.774506 796.328942 52.965517 776.827586 52.965517 757.32623 52.965517 741.517241 68.774506 741.517241 88.275862L741.517241 176.629813 741.517241 211.940158 776.827586 211.940158 970.914322 211.940158C961.186763 211.940158 953.37931 204.125926 953.37931 194.34775L953.37931 918.084273C953.37931 908.344373 961.25643 900.491882 970.914322 900.491882L53.085678 900.491882C62.813237 900.491882 70.62069 908.306097 70.62069 918.084273L70.62069 194.34775C70.62069 204.087649 62.74357 211.940158 53.085678 211.940158L247.172414 211.940158C266.67377 211.940158 282.482759 196.131169 282.482759 176.629813 282.482759 157.128439 266.67377 141.319468 247.172414 141.319468L53.085678 141.319468ZM211.862069 176.629813C211.862069 196.131169 227.671058 211.940158 247.172414 211.940158 266.67377 211.940158 282.482759 196.131169 282.482759 176.629813L282.482759 88.275862C282.482759 68.774506 266.67377 52.965517 247.172414 52.965517 227.671058 52.965517 211.862069 68.774506 211.862069 88.275862L211.862069 176.629813ZM1024 353.181537 1024 317.871192 988.689655 317.871192 35.310345 317.871192 0 317.871192 0 353.181537 0 441.457399C0 460.958755 15.808989 476.767744 35.310345 476.767744 54.811701 476.767744 70.62069 460.958755 70.62069 441.457399L70.62069 353.181537 35.310345 388.491882 988.689655 388.491882 953.37931 353.181537 953.37931 441.457399C953.37931 460.958755 969.188299 476.767744 988.689655 476.767744 1008.191011 476.767744 1024 460.958755 1024 441.457399L1024 353.181537ZM776.937913 582.62069C796.439287 582.62069 812.248258 566.811701 812.248258 547.310345 812.248258 527.808989 796.439287 512 776.937913 512L247.172414 512C227.671058 512 211.862069 527.808989 211.862069 547.310345 211.862069 566.811701 227.671058 582.62069 247.172414 582.62069L776.937913 582.62069ZM247.172414 688.551724C227.671058 688.551724 211.862069 704.360713 211.862069 723.862069 211.862069 743.363425 227.671058 759.172414 247.172414 759.172414L600.386189 759.172414C619.887563 759.172414 635.696534 743.363425 635.696534 723.862069 635.696534 704.360713 619.887563 688.551724 600.386189 688.551724L247.172414 688.551724ZM776.827586 211.940158 741.517241 176.629813 741.517241 247.328574C741.517241 266.829948 757.32623 282.638919 776.827586 282.638919 796.328942 282.638919 812.137931 266.829948 812.137931 247.328574L812.137931 176.629813 812.137931 141.319468 776.827586 141.319468 247.172414 141.319468C227.671058 141.319468 211.862069 157.128439 211.862069 176.629813 211.862069 196.131169 227.671058 211.940158 247.172414 211.940158L776.827586 211.940158ZM282.482759 176.629813C282.482759 157.128439 266.67377 141.319468 247.172414 141.319468 227.671058 141.319468 211.862069 157.128439 211.862069 176.629813L211.862069 247.328574C211.862069 266.829948 227.671058 282.638919 247.172414 282.638919 266.67377 282.638919 282.482759 266.829948 282.482759 247.328574L282.482759 176.629813Z" fill="#389BFF" p-id="4300"></path></svg>'});O.add(H);const z=new I({height:f,width:T-30,display:"flex",flexDirection:"column"});C.add(z);const R=new oe({text:String(W).padStart(2,"0"),fontSize:20,fontWeight:"bold",fontFamily:"sans-serif",fill:"#777",textAlign:"right",maxLineWidth:T-30,boundsPadding:[15,0,0,0]});z.add(R);const P=new oe({text:ci(w,"short").toLocaleUpperCase(),fontSize:12,fontFamily:"sans-serif",fill:"#777",boundsPadding:[0,0,0,0]});return z.add(P),{rootContainer:C}}}]},minDate:"2024-07-20",maxDate:"2024-08-15",markLine:[{date:"2024-07-29",style:{lineWidth:1,lineColor:"blue",lineDash:[8,4]}},{date:"2024-08-17",style:{lineWidth:2,lineColor:"red",lineDash:[8,4]}}],scrollStyle:{scrollRailColor:"RGBA(246,246,246,0.5)",visible:"focus",width:6,scrollSliderCornerRadius:2,scrollSliderColor:"#5cb85c"}};function v(){o.value=new ct(a.value,b(p)),d.value=new ct(n.value,b(c)),l.value=new ct(r.value,b(m))}function b(k){return e.darkMode?(k.taskListTable.theme=Kt,k.timelineHeader.backgroundColor="#212121",k.underlayBackgroundColor="#000"):(k.taskListTable.theme=Ne,k.timelineHeader.backgroundColor="#f0f0fb",k.underlayBackgroundColor="#fff"),k}const B=qt(()=>e.darkMode,k=>{var T,f,w;(T=o.value)==null||T.release(),(f=d.value)==null||f.release(),(w=l.value)==null||w.release(),v()});return Zt(()=>{v()}),Qt(()=>{B()}),(k,T)=>{const f=It,w=ti,W=ii;return Jt(),ei(W,{vertical:"",size:16},{default:Fe(()=>[Ee(w,{bordered:!1,title:"VTableGantt",class:"h-full card-wrapper"},{default:Fe(()=>[Ee(f,{label:"More Demos: ",link:"https://www.visactor.com/vtable/example"})]),_:1}),Ee(w,{bordered:!1,class:"h-full card-wrapper"},{default:Fe(()=>[lt("div",{ref_key:"basicGanttDomRef",ref:a,class:"relative h-400px"},null,512)]),_:1}),Ee(w,{bordered:!1,class:"h-full card-wrapper"},{default:Fe(()=>[lt("div",{ref_key:"linkGanttDomRef",ref:n,class:"relative h-400px"},null,512)]),_:1}),Ee(w,{bordered:!1,class:"h-full card-wrapper"},{default:Fe(()=>[lt("div",{ref_key:"customGanttDomRef",ref:r,class:"relative h-400px"},null,512)]),_:1})]),_:1})}}});export{ws as default};
